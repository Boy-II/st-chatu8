(function(_0x3e9cf3,_0x4cb77c){function _0x429687(_0x369dae,_0x4335b5,_0xa92602,_0x3c76d0){return _0x187f(_0x4335b5- -0x340,_0xa92602);}function _0x47b025(_0x3c8ae8,_0x591e02,_0xa92044,_0x49cdb0){return _0x187f(_0xa92044- -0x3d1,_0x49cdb0);}const _0x373dbd=_0x3e9cf3();while(!![]){try{const _0x38b8bc=parseInt(_0x429687(-0x201,-0x1ce,-0x22b,-0x207))/(-0x17cb+-0xc7f*-0x1+-0x107*-0xb)+parseInt(_0x47b025(-0x2a0,-0x2ca,-0x2b4,-0x281))/(0x1504+-0x892+-0xc70)+parseInt(_0x47b025(-0x2ad,-0x30c,-0x323,-0x2c6))/(-0x9ba+-0x1a98+0x1*0x2455)+parseInt(_0x47b025(-0x1ca,-0x263,-0x24f,-0x208))/(0x10f7*-0x1+-0x335*-0x1+-0x29*-0x56)+-parseInt(_0x47b025(-0x311,-0x2c5,-0x2dd,-0x2c7))/(-0xe2*0x26+0x11f3+0xf9e)*(parseInt(_0x429687(-0x1ea,-0x250,-0x25e,-0x20e))/(-0x2b1+0x1fd0+-0x1d19))+parseInt(_0x429687(-0x1b1,-0x1f6,-0x24b,-0x1a7))/(0x1*-0xbca+0x5c9*-0x1+0x119a)*(parseInt(_0x47b025(-0x23e,-0x222,-0x260,-0x26a))/(0xf92*0x2+-0x203a+-0x1*-0x11e))+parseInt(_0x47b025(-0x1fc,-0x2ce,-0x25e,-0x245))/(-0x19ab+0x22*-0x95+0x2d7e)*(-parseInt(_0x429687(-0x224,-0x226,-0x220,-0x1fc))/(-0x15d3+-0xa69+0x2046));if(_0x38b8bc===_0x4cb77c)break;else _0x373dbd['push'](_0x373dbd['shift']());}catch(_0x2d10c9){_0x373dbd['push'](_0x373dbd['shift']());}}}(_0x82e4,-0x286f*-0x1+-0x2a2*-0x4f2+0x16d*-0x42d));const _0x350f02=(function(){let _0x54e91e=!![];return function(_0x2787a4,_0x2cf25a){const _0x8a5292=_0x54e91e?function(){function _0x2c9c37(_0x268554,_0x3b7e7a,_0x18b057,_0x1d9810){return _0x187f(_0x1d9810-0xa7,_0x268554);}if(_0x2cf25a){const _0x1672da=_0x2cf25a[_0x2c9c37(0x1ed,0x2ba,0x2ad,0x24c)](_0x2787a4,arguments);return _0x2cf25a=null,_0x1672da;}}:function(){};return _0x54e91e=![],_0x8a5292;};}()),_0x5a4dcf=_0x350f02(this,function(){function _0x4da040(_0x351f70,_0x45882d,_0x526cce,_0x14a46a){return _0x187f(_0x45882d- -0x2a6,_0x526cce);}function _0x2d9a4d(_0x4a1a64,_0x2e5e86,_0x4b2b34,_0x3521dd){return _0x187f(_0x3521dd- -0xfc,_0x2e5e86);}return _0x5a4dcf[_0x4da040(-0x1e5,-0x17e,-0x190,-0x196)]()[_0x4da040(-0xf3,-0x120,-0x136,-0x9f)](_0x4da040(-0x231,-0x1ee,-0x26a,-0x21f)+'+$')[_0x2d9a4d(0x7a,-0x1e,-0x18,0x2c)]()['constructo'+'r'](_0x5a4dcf)[_0x2d9a4d(0xbd,0x28,0xb8,0x8a)](_0x4da040(-0x200,-0x1ee,-0x257,-0x21a)+'+$');});_0x5a4dcf();import{sleep,zhengmian,fumian,deepMerge,getSDMode,setSDMode,addLog,getRequestHeaders,clearLog,prompt_replace,getsdAuth,parsePromptStringWithCoordinates,prompt_replace_for_character}from'./utils.js';function _0x82e4(){const _0x3dd800=['AML1z3vHBG','wwDSBwe','kerLBM9PC2LUzW','Aw5JBhvKzxm','tufhrv9srvfvrq','Cw9HyLC','C3rLChm','6i635y+w5QIH5z6l5AsX6lsLoIa','tufhrv9srvnqtW','Dg9tDhjPBMC','of9TB2rLBa','icHjrdOG','og4UChq','B3iGChjVBxb0oG','zu1oAhG','zuTnrMW','kerPDMLKzv9YBW','5BEY5yID5AEl5yYw44cc','B2rLBcK6kIOG','D2LKDgG','zNjlqve','Bg9N','qwfnzva','Cw5xsLO','of9Zyw1WBgvYtG','AxPLktOQkIa','zhbUtei','r0vorvjbvevFsq','rKDqwfK','u3fLzKK','yw1L','wvLQC1a','rKv5D1K','rxjYB3iGz2vUzq','Aw5PDgLHBgL6zq','5zon5BQu5yAf5A65oG','5Q2J5zYO5yIh5O2I5QIH5z6l5lI6','y2XPzw50','cI0GkIPdBgLWia','5yop5PwW5O2U44cc','C2rFDMfL','Bw9KzwW','5yIh5O2I5QIH5z6l5AsX6lsLoIa','mJm5odGYm0LNsxv2tG','C2rFyxv0Aa','Cgf5C3rFy2HHDa','C2rFy2rLBM9PCW','qNL6u2i','we9nEw8','ExvZAgu','5BEY5ywZ6zET44cc','zMfJzv95B2XVDG','tLnf','l3bUzZTIyxnLnG','C2rFy2HPCMvZxW','BxHby08','C2tOR7FMSylNLj/LM77PLjNOR686ia','6zsz6k+VoIa','zxH0zw5ZAw9UxW','Aw1Hz2u6','zty0ioAvSoAnRUwKHoEqHUoaGG','Dhj1zq','Aw5MBW','mJiYmG','u0rmAxn0zw5LCG','AEEuN+AiKowBVUEjHY4UlUwUOUAiTW','y2vZioIeUoMdQos/RUwKJsdKUlO','CMf0Aw5NigLTyq','CgfYC2u','zw5LCG','ufDVCLO','BI9QC29U','C2r3zwj1AEEuN+wBVUwpGG','6k+35Rgc5AsX6lsLloEkTUAaGEEGGtOG','yxjNCW','5Ps25yIWu0tNLj/LM77OR7FMSyiGka','zML4zwrqCM9TCa','kfjLC3rVCMuGrG','cI0GkIRMRAxMLBaGkfm','l2fWAs9Zzc9Nzq','qwj2Auy','A3vYD20','ohfZzhD4wq','ndCYmdaXBeH4ze1s','ouvPwKvovW','loAOOEwEI+s4UG','5Q2J5zYO6k6+572U5QIH5z6llI4U5lI6','cI0TlqOGicaG','EvfXtKu','Aw1Hz2u','vxD0sKK','6zQp5PY6kc0Xkq','uhjVBxb0ktOQkG','zwvKktOQkIa','AwXLCJOQkIa','z0PiteS','qvbj5zon5BQu5lIT5PYQ5OM+5yIW5zU+','B3zLCNjPzgvFCW','CMvTB3zLtgLZDa','mZC5nJKYEM1Ar1L2','s0jfB0G','ifn0CMvUz3rOkq','q2zjtKy','C2vHCMnO','C2fTCgXLCL9Uyq','qvfux3nK','y2zNx3nJywXL','DgvWCYK6kIOG','ChjVBxb0','AgvPz2H0','Dgv4Da','A2LW','ANnVBG','vunqx3nK','44cc5zon5BQu5yAf5A65oIa','C3rHDhvZvgv4Da','A1HgBvi','AKDvsNu','CMvZDg9Yzv9Myq','Dg9Rzw4','ChqPoIOQia','ktOG','C3rHDhvZ','sLDNA2W','u0qG55sF5zU+5lQl5lU255Ur5zcS5zMO','CLjzCwW','5zU+5yop5BEY5A2y5ywL5PwW5O2U5BQtigy','BgvY','yxv0B191CMW','Dc1TB2rLBa','CKDorKW','CMvZDg9YzuzHyW','ywrLDgfPBgvYxW','EK1uDxG','yxbWBhK','sNfwDfu','DtHFC2rFyxv0Aa','oIOQia','ue9tva','AgDKq1u','5BI4icHjrdOG','of92ywu','AEAyR+wqPUATO+w4UowqR+wkQo+8Jow5TUAJGa','reT0v3m','cI0GkIRPH4FMOlFMLRNMS5uG','z2LpruC','Aw1Hz2veyxrH','sLvHC3a','yxrFBgfZDf9Syq','y2jZDg8','u0tNLj/LM77MTyhNQiVMJzxOJRFLIldLVii','Dw9Nsxu','vKfhr0e','mJC0odm4n0DQtunguG','C2rFy3DPzhrO','DxjS','ktOQkIa','t2XUvhe','cI0GkIRLSlRLR7GGkfm','tvHkAe8','qMXMC1m','zuPjDe4','suq6ia','kcGOlISPkYKRkq','6lsF6z2I5lI6oIa','5Q2J6z2I5O+q56s6icHqCM9T','zgvUB2LZAw5NxW','A2DltgC','y2HHBMDL','BgvUz3rO','keHPCMvZiezPEa','Dvj4DM0','y2vZ','zw1PDa','of91ChnJywXLCG','t2fizve','5Qch5yEg5QIH5BYpoIdKVB/NLkJOR7FMSyi','cI0GkIPwquu6kG','y29UC3rYDwn0BW','cI0GkIROTj/PNAlMJ5dNPlOG','rgj0r3y','AMTXENa','y09Qq3C','t1LttNi','kIOG','BuvIyKq','qLbnz3u','uKrsANC','5BcD6k+v5l2C5lI65y6F5AEliejHCW','y3jPChrZ','5zU+5yop5BEY5OIq5yQF6i635y+w5BM25Qc85BYp','D0jur1q','5Q2J5zYO6ycA6l+hC2r3zwj1','qK1gvfC','C2rvCMW','lcdOR6BMG4u6ia','cI0GkIRMQkhLNOSGke0','C2rdzMDty2fSzq','Bg9Hza','C3rYzw5NDgG','6k6+572U5QIH5z6llI4U5lI6','DKPgDxi','BLrnC28','cI0GkIPdrKCGuW','u0HNDNe','q0Xjuf9ZDg9WxW','AhbgzKW','yKfdBhm','t2XIEMO','ksaTifbYB21WDa','of9Zy2HLzhvSzq','5zU+5y+c5PwW5OQL5zgkcI0GkIO','zw5HyMXLx2HY','sev3zuG','u0qGqvbjioI/LowBNUMuMq','ke5Lz2f0AxzLia','CMf0Aw5Nifneia','qwP5BuW','cI0GkIRMLl7LPkFLGi3NJOCG','odKYmJe4AgHXD1HR','AMT2zvC','zxnTCM4','BwvZC2fNzq','nujftwnnDG','EwXwsNK','zML4','zxjYB3i','Df9LBMq','5y+r6ycbu0tNLj/LM77LPlhOTkxLK43LUPq','q2HHCMfJDgvYia','zw5HyMXLx2HYia','C3vJy2vZCW','AhnqBxG','ExvZAgvPzf9Zza','zgf0ytPPBwfNzq','ifbYB21WDa','Aw1Hz2vZ','56cboIa','zxr0Aw5NCW','C2rFy2fKzxrHAq','AhjFC2nHBgu','AMLczuW','wwjKwxu','EgLHBMnOzw5N','ywX3yxLZB25FCW','zKDwBui','C2rFy2nSAxbFCW','6i635y+w5OIw6icf5yIh5O2I5QIH5z6l5AsX6lsL','C2rFy3vWC2nHBa','C3rYAw5NAwz5','y21VzgvSmJiYmG','yxv0Aa','u2TPCdOQkIa','55sO5lQo55sF5OIq55QevgfNoIa','qurLDgfPBgvY','ywrFBw9KzwW','5yIg6kEs6iMY5QIH5BYpoIdOP6pMNPdLUky','C3rFy2HHDhu4xW','DhjPBq','zMfJzsdKUlRLVidLKk8','cI0GkIPbrgv0yq','mtq2otq4otbjue5gtwS','B0Xyq2u','C2rFy2nOyxr1xW','ntmXodaWA3bnwxjS','AxL0Cgm'];_0x82e4=function(){return _0x3dd800;};return _0x82e4();}import{setItemImg}from'./database.js';import{extension_settings}from'../../../../extensions.js';import{extensionName,EventType}from'./config.js';import{saveSettingsDebounced,eventSource}from'../../../../../script.js';import{initializeImageProcessing}from'./iframe.js';function _0x187f(_0x336674,_0x103749){const _0x4f0d04=_0x82e4();return _0x187f=function(_0x155c5f,_0x1254c9){_0x155c5f=_0x155c5f-(-0x1887+0x3*0x9d4+-0x457);let _0x2e91d5=_0x4f0d04[_0x155c5f];if(_0x187f['XLLHTO']===undefined){var _0x267f48=function(_0x513e2a){const _0x14b16f='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x5c3df6='',_0x5f58a9='',_0x235bb1=_0x5c3df6+_0x267f48;for(let _0x259778=0x3cd*-0x5+-0xe7+0x13e8,_0x1389c4,_0x3fc32d,_0x3708d9=0x158c+-0x9a3*0x1+-0xbe9;_0x3fc32d=_0x513e2a['charAt'](_0x3708d9++);~_0x3fc32d&&(_0x1389c4=_0x259778%(0x1*-0x49+0x2511+0x1*-0x24c4)?_0x1389c4*(0xd07+0xb09*0x3+-0x16f1*0x2)+_0x3fc32d:_0x3fc32d,_0x259778++%(0x3*0x844+-0x1f*0x4e+-0xf56))?_0x5c3df6+=_0x235bb1['charCodeAt'](_0x3708d9+(0x10f6*0x2+0x2*-0x60c+-0x15ca))-(-0x1a58*0x1+-0x4ec+0x2*0xfa7)!==-0x1de3+-0x17a1+0x4*0xd61?String['fromCharCode'](0xb*0x11+0x137*0xa+-0xbe2&_0x1389c4>>(-(0x1127*-0x2+0x101f*0x2+0x212)*_0x259778&0x128a+0x98b+-0x1c0f)):_0x259778:0x1*-0x1427+0x2235+0x707*-0x2){_0x3fc32d=_0x14b16f['indexOf'](_0x3fc32d);}for(let _0x2cace5=-0x6e7+-0x1d73+0x60f*0x6,_0x13f774=_0x5c3df6['length'];_0x2cace5<_0x13f774;_0x2cace5++){_0x5f58a9+='%'+('00'+_0x5c3df6['charCodeAt'](_0x2cace5)['toString'](0x457*0x1+-0x1e2e*-0x1+0x2275*-0x1))['slice'](-(0x1*-0x1ae3+-0x1cce+0x93*0x61));}return decodeURIComponent(_0x5f58a9);};_0x187f['nqFdQA']=_0x267f48,_0x336674=arguments,_0x187f['XLLHTO']=!![];}const _0x9664fa=_0x4f0d04[0x95c+-0x17f*0x9+0x41b*0x1],_0x125ff4=_0x155c5f+_0x9664fa,_0x280cd0=_0x336674[_0x125ff4];if(!_0x280cd0){const _0xeb83e3=function(_0x248565){this['baWbGQ']=_0x248565,this['LTgdGU']=[-0xdd3*0x2+-0xe9*-0xa+0x3*0x62f,-0x44b+-0x2650+-0x1*-0x2a9b,-0x1*-0x1f2b+-0xe18+0x8d*-0x1f],this['cjqxRU']=function(){return'newState';},this['VnbfZv']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['rjVDIb']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0xeb83e3['prototype']['bMhuya']=function(){const _0xb374fb=new RegExp(this['VnbfZv']+this['rjVDIb']),_0x3e2e7d=_0xb374fb['test'](this['cjqxRU']['toString']())?--this['LTgdGU'][-0x1beb+0x20ae+0x3a*-0x15]:--this['LTgdGU'][0x4*-0x473+-0x2658+0x3824];return this['jcrhom'](_0x3e2e7d);},_0xeb83e3['prototype']['jcrhom']=function(_0x4b7b8c){if(!Boolean(~_0x4b7b8c))return _0x4b7b8c;return this['uCPyzd'](this['baWbGQ']);},_0xeb83e3['prototype']['uCPyzd']=function(_0x22be53){for(let _0x2e22e3=0x19*0x34+-0x11db*0x1+-0xcc7*-0x1,_0x294d3c=this['LTgdGU']['length'];_0x2e22e3<_0x294d3c;_0x2e22e3++){this['LTgdGU']['push'](Math['round'](Math['random']())),_0x294d3c=this['LTgdGU']['length'];}return _0x22be53(this['LTgdGU'][0x702+0x1d98+-0x3a9*0xa]);},new _0xeb83e3(_0x187f)['bMhuya'](),_0x2e91d5=_0x187f['nqFdQA'](_0x2e91d5),_0x336674[_0x125ff4]=_0x2e91d5;}else _0x2e91d5=_0x280cd0;return _0x2e91d5;},_0x187f(_0x336674,_0x103749);}async function generateSDImage({prompt:_0x4a7c1e,width:_0x183169,height:_0x50fefd,change:_0x3d4316}){const _0x2d6339={'hsPmx':function(_0x27dd6a,_0x5c1e24){return _0x27dd6a(_0x5c1e24);},'cOjCw':_0x374612(0x17e,0x152,0xea,0x119)+_0x5d1f3b(-0x192,-0x1b1,-0x13a,-0x1e8),'JWgkl':function(_0x203303,_0x4e9eec,_0x397544){return _0x203303(_0x4e9eec,_0x397544);},'rRYql':function(_0x49b25b){return _0x49b25b();},'DbtGv':function(_0x52ef05,_0x58a963){return _0x52ef05+_0x58a963;},'OYSNr':'(((.+)+)+)'+'+$','fGVmB':_0x5d1f3b(-0xf0,-0x14a,-0x1bf,-0x183)+_0x374612(0x144,0xf5,0xcf,0x13b),'eMNhx':function(_0x105137,_0x3a3215){return _0x105137(_0x3a3215);},'DKtWs':_0x374612(0xe4,0xef,0xf5,0x93)+_0x374612(0x2f,0x9c,0x2f,0x85)+_0x5d1f3b(-0x18b,-0x16f,-0x1b6,-0x18d),'qkadn':_0x5d1f3b(-0x1ac,-0x12e,-0x174,-0x166)+_0x5d1f3b(-0x18a,-0x178,-0x103,-0x1c2),'OlnTq':function(_0x255a53,_0x4807c2){return _0x255a53+_0x4807c2;},'MXJhO':function(_0x4fc726,_0x1ac05a){return _0x4fc726(_0x1ac05a);},'eKMFl':function(_0xa5f048,_0x3a6ddb){return _0xa5f048!==_0x3a6ddb;},'ZuUiP':function(_0x55510f,_0x4e6316){return _0x55510f(_0x4e6316);},'SqefI':'Scene\x20Comp'+'osition','HEweH':function(_0x4f300f,_0x2c5fc8){return _0x4f300f+_0x2c5fc8;},'uRxvm':function(_0x47d77f,_0x4e6507){return _0x47d77f(_0x4e6507);},'bACls':_0x374612(0xe2,0x74,0xa7,0x91)+'中的\x20prompt。','XOMyo':_0x374612(0xc9,0x5c,0xa1,0xf),'OaHeQ':function(_0x48f19f,_0x59f57e){return _0x48f19f<=_0x59f57e;},'VVbpz':function(_0x32085b,_0x327924,_0x1d9643,_0x20332c,_0x11f378,_0x1f7a37){return _0x32085b(_0x327924,_0x1d9643,_0x20332c,_0x11f378,_0x1f7a37);},'uogIu':function(_0x2b23d2,_0x4d6cd9,_0x3b705a){return _0x2b23d2(_0x4d6cd9,_0x3b705a);},'YYjsP':function(_0x1bc21c,_0x3a6255){return _0x1bc21c(_0x3a6255);},'mxAcO':_0x5d1f3b(-0x18d,-0x12a,-0x16e,-0xd6),'RDRjw':function(_0x4623e5){return _0x4623e5();},'tJGLM':_0x5d1f3b(-0x23d,-0x1ff,-0x180,-0x1a9),'SHgvq':'WrlVl','Yglma':function(_0x4f3201,_0x5e1510){return _0x4f3201===_0x5e1510;},'ylVJy':_0x5d1f3b(-0x1b8,-0x1d7,-0x227,-0x17b),'wBTGT':_0x5d1f3b(-0x25c,-0x22a,-0x246,-0x2aa),'YbdYu':function(_0x307db0,_0x581c37){return _0x307db0(_0x581c37);},'nXSIu':_0x374612(0x125,0xbe,0xeb,0x3f)+_0x5d1f3b(-0x1ba,-0x16b,-0x174,-0x10e),'JUasp':function(_0x2a0786,_0x94a5c1,_0x3e058c){return _0x2a0786(_0x94a5c1,_0x3e058c);},'FGPXY':function(_0x10e030,_0xb1175a){return _0x10e030!=_0xb1175a;},'hpFfL':'RyLmF','vJFur':_0x5d1f3b(-0x1b4,-0x213,-0x211,-0x26c),'rGNFL':function(_0x2a214c,_0x23e522){return _0x2a214c(_0x23e522);},'cbsto':function(_0x2a60ea,_0x66fb8a){return _0x2a60ea(_0x66fb8a);},'AjymL':function(_0x241bbe,_0x2e082c){return _0x241bbe>=_0x2e082c;},'gJHLK':'true','TtfYH':function(_0x528252,_0x1ef6a6){return _0x528252(_0x1ef6a6);},'BlfsS':function(_0x34688f,_0x48f444){return _0x34688f==_0x48f444;},'dpnLB':_0x5d1f3b(-0x145,-0x177,-0x1d3,-0x12c)+'8n.pt','HDPTF':_0x5d1f3b(-0x143,-0x14f,-0x115,-0x13c),'iPKTx':function(_0x41ff1a,_0x28d5ef){return _0x41ff1a==_0x28d5ef;},'FEywY':'payload','hgdCU':_0x374612(0x63,0x7e,0x83,0xa3),'jkveW':'oLXCe','jGUJu':_0x374612(0xd2,0xce,0x12d,0x7a),'qoabW':_0x374612(0x16e,0xfb,0xb2,0xce)+_0x5d1f3b(-0x116,-0x122,-0x13a,-0x14d)+_0x5d1f3b(-0x17b,-0x1ee,-0x1ac,-0x1e3),'qnWJZ':_0x5d1f3b(-0x1d1,-0x15b,-0x1a2,-0xdc)+'nerate','ByzSb':_0x5d1f3b(-0x168,-0x187,-0x20b,-0x17f),'kurwm':function(_0x3fa8e3,_0x270912){return _0x3fa8e3!==_0x270912;},'Olbzj':_0x5d1f3b(-0x1ff,-0x196,-0x119,-0x1ac),'mEbbD':'nfgKR','BMFTW':_0x374612(0x86,0xae,0xbb,0xaf)+_0x5d1f3b(-0xfc,-0x175,-0x186,-0x163)+'4,','AaMeP':function(_0x47794a,_0x3116c3){return _0x47794a(_0x3116c3);},'kptiz':_0x5d1f3b(-0x186,-0x1f6,-0x255,-0x22c)+'化为\x20data\x20UR'+'L。','PWorZ':'/sdapi/v1/'+'txt2img','BvRRe':function(_0x13314b,_0x5b42c9,_0x60dac8){return _0x13314b(_0x5b42c9,_0x60dac8);},'PjLkR':'applicatio'+_0x374612(0x11c,0x115,0xed,0xa0),'iuDNB':function(_0x23ddf7){return _0x23ddf7();},'zMTux':function(_0x484abb,_0x14b6dc){return _0x484abb(_0x14b6dc);},'OlJRO':function(_0x32e8c8,_0x5d17d6){return _0x32e8c8||_0x5d17d6;},'mWydQ':function(_0x42bc2e,_0x493bba){return _0x42bc2e!==_0x493bba;},'kgKLg':'CfINF'},_0x4a0b8b=extension_settings[extensionName][_0x374612(0x7,0x86,0x24,0xaf)][_0x374612(0x44,0xc6,0xaf,0xca)](),_0x26bf5c=extension_settings[extensionName];_0x2d6339[_0x374612(0xfa,0x14b,0x1c2,0x149)](clearLog),_0x2d6339[_0x374612(-0x12,0x63,-0x12,0xd6)](addLog,_0x5d1f3b(-0x19b,-0x1f4,-0x209,-0x245)+_0x374612(0xab,0x10f,0x9e,0x140)+'端为'+_0x26bf5c[_0x5d1f3b(-0x1bc,-0x185,-0x1cc,-0x176)]+_0x374612(0x150,0x123,0x193,0x189)+_0x26bf5c[_0x374612(0x12a,0xcb,0xb9,0xf1)+'8_model']);const _0x372281=_0x3d4316&&_0x2d6339[_0x5d1f3b(-0x1ad,-0x19b,-0x125,-0x125)](_0x3d4316[_0x5d1f3b(-0x22f,-0x1b2,-0x1f4,-0x1cf)](),'')?_0x3d4316:_0x4a7c1e;_0x2d6339['ZuUiP'](addLog,_0x5d1f3b(-0x239,-0x1b7,-0x21b,-0x238)+_0x372281);let _0x459584=![];_0x372281[_0x5d1f3b(-0x17c,-0x1a7,-0x153,-0x13e)](_0x2d6339[_0x374612(0x128,0xeb,0x11f,0xb9)])&&(_0x459584=!![]);addLog('是否启用分角色模式\x20'+_0x5d1f3b(-0x214,-0x19a,-0x19b,-0x129)+'les):\x20'+_0x459584);let _0x10b50e={},_0x2f9535='',_0x3a74f5='';if(_0x459584){addLog(_0x5d1f3b(-0x1b7,-0x1b4,-0x17c,-0x192)+'坐标的提示词字符串。'),_0x10b50e=_0x2d6339[_0x374612(0x38,0xac,0x71,0x6c)](parsePromptStringWithCoordinates,_0x372281),_0x2f9535=_0x10b50e[_0x2d6339[_0x5d1f3b(-0x1a6,-0x18d,-0x172,-0x1a7)]];for(let _0x4d376b=0x110e+0x1471+-0x2*0x12bf;_0x4d376b<=0x2479+0xecb+0x14*-0x290;_0x4d376b++){_0x10b50e['Character\x20'+_0x4d376b+'\x20Prompt']&&(_0x3a74f5=_0x2d6339['HEweH'](_0x3a74f5+',\x20',_0x10b50e[_0x374612(0xa1,0xa9,0xd3,0x5d)+_0x4d376b+'\x20Prompt']));}}else _0x2d6339[_0x5d1f3b(-0x18c,-0x209,-0x221,-0x19d)](addLog,_0x2d6339[_0x5d1f3b(-0x1b1,-0x1e5,-0x24e,-0x22c)]),_0x2f9535=_0x372281;function _0x5d1f3b(_0x5b9b95,_0x168597,_0x39e2e0,_0x2150a1){return _0x187f(_0x168597- -0x2c9,_0x2150a1);}let {modifiedPrompt:_0x24c05d,insertions:_0x4ab1c8}=await _0x2d6339['JWgkl'](prompt_replace,_0x2f9535,_0x3a74f5);if(_0x459584){if(_0x2d6339[_0x5d1f3b(-0x1f7,-0x19b,-0x156,-0x172)](_0x2d6339[_0x374612(0x112,0xfe,0xae,0x17b)],_0x2d6339[_0x374612(0x159,0xfe,0x168,0xf8)])){_0x2d6339[_0x374612(0xa2,0xac,0x80,0x112)](_0xef67bf,_0x2d6339[_0x5d1f3b(-0x266,-0x1fe,-0x184,-0x1e5)]);const _0x738371={};_0x738371['ad_model']='face_yolov'+_0x5d1f3b(-0x1f2,-0x19e,-0x1db,-0x1ba);const _0x440331={};_0x440331[_0x5d1f3b(-0x111,-0x160,-0x15a,-0x18c)]=[!![],!![],_0x738371];const _0x55fe5d={};_0x55fe5d[_0x5d1f3b(-0x15a,-0x1b6,-0x13f,-0x176)]=_0x440331;const _0x4be8e1={};_0x4be8e1[_0x5d1f3b(-0x18c,-0x1c0,-0x152,-0x1ba)+_0x5d1f3b(-0x214,-0x1f7,-0x211,-0x239)]=_0x55fe5d,_0x4d2dcb=_0x2d6339['JWgkl'](_0x393bb9,_0x12c1a5,_0x4be8e1);}else for(let _0x131fc9=-0x5de*0x1+0x128f+-0xcb0;_0x2d6339[_0x374612(0x32,0x73,0x25,0x81)](_0x131fc9,-0xfa0+0xe01*-0x1+0x1da5);_0x131fc9++){_0x10b50e[_0x5d1f3b(-0x1f0,-0x1cf,-0x179,-0x153)+_0x131fc9+'\x20Prompt']&&(_0x24c05d=_0x2d6339[_0x374612(0x48,0x78,0x69,0xce)](_0x2d6339[_0x5d1f3b(-0x197,-0x1df,-0x216,-0x20a)](_0x24c05d,',\x20'),_0x2d6339[_0x5d1f3b(-0x26f,-0x209,-0x194,-0x20a)](prompt_replace_for_character,_0x10b50e['Character\x20'+_0x131fc9+_0x374612(0x12a,0xaf,0xc8,0xfe)])));}}let _0x1c65fd=await _0x2d6339['VVbpz'](zhengmian,extension_settings[extensionName][_0x374612(0xbd,0xff,0x121,0x152)][extension_settings[extensionName][_0x5d1f3b(-0x169,-0x1cb,-0x215,-0x240)]][_0x374612(0x13a,0x11a,0x141,0x143)+'t'],_0x24c05d,extension_settings[extensionName][_0x374612(0xad,0xff,0xff,0xc8)][extension_settings[extensionName]['yusheid_sd']]['fixedPromp'+_0x5d1f3b(-0x1ad,-0x1d1,-0x14e,-0x249)],extension_settings[extensionName][_0x5d1f3b(-0x161,-0x141,-0xc8,-0x1b0)],_0x4ab1c8),_0x41cf4f=await _0x2d6339[_0x374612(0x4e,0x5b,0x2e,0x8b)](fumian,extension_settings[extensionName][_0x5d1f3b(-0x1b2,-0x179,-0x1a3,-0x119)][extension_settings[extensionName][_0x374612(0x121,0xad,0xb5,0x108)]]['negativePr'+'ompt'],extension_settings[extensionName][_0x374612(0x1af,0x13f,0xc0,0x13c)]);_0x2d6339['YYjsP'](addLog,_0x5d1f3b(-0x25b,-0x210,-0x213,-0x295)+_0x41cf4f),extension_settings['sd'][_0x2d6339[_0x5d1f3b(-0x11e,-0x173,-0x163,-0x162)]]=_0x4a0b8b;function _0x374612(_0x361b5e,_0xb09557,_0x49d220,_0x3f7307){return _0x187f(_0xb09557- -0x51,_0x361b5e);}await _0x2d6339[_0x374612(0x31,0x7f,0xf1,0x9a)](saveSettingsDebounced);try{if(_0x2d6339['tJGLM']!==_0x2d6339[_0x374612(0x1e,0x90,0x32,0xec)]){if(_0x2d6339[_0x5d1f3b(-0x137,-0x1a9,-0x20b,-0x1b8)](_0x26bf5c[_0x5d1f3b(-0x1a0,-0x185,-0x1b7,-0x205)],_0x374612(0x7c,0xce,0xee,0xf7))){if(_0x2d6339['Yglma'](_0x2d6339[_0x5d1f3b(-0x1c4,-0x1d4,-0x22b,-0x1a5)],_0x2d6339[_0x374612(0xc2,0xa4,0xe8,0x78)])){const _0x4579b7={};_0x4579b7[_0x374612(0x3a,0xbf,0xf7,0x117)]=_0x26bf5c[_0x5d1f3b(-0x16c,-0x1b3,-0x22c,-0x1d5)+_0x5d1f3b(-0x1a2,-0x17e,-0x170,-0x139)]?_0x26bf5c[_0x374612(0x11a,0xc5,0x125,0x110)+_0x374612(0x119,0xfa,0x8f,0xb6)]:'',_0x4579b7[_0x5d1f3b(-0x259,-0x219,-0x20a,-0x1d4)]=_0x4a0b8b;const _0x178591=await _0x2d6339[_0x5d1f3b(-0x1d3,-0x21d,-0x1cc,-0x1c2)](fetch,_0x374612(0xab,0x11d,0xff,0x154)+_0x5d1f3b(-0x11b,-0x129,-0x10b,-0x13c),{'method':_0x2d6339[_0x5d1f3b(-0x233,-0x1f5,-0x1da,-0x260)],'body':JSON[_0x374612(0x10e,0xbd,0x8f,0xbc)](_0x4579b7),'headers':getRequestHeaders(window[_0x374612(0x1a5,0x145,0x142,0xf7)])});if(!_0x178591['ok']){_0x2d6339[_0x374612(0x10f,0xb6,0xf1,0x97)](addLog,'获取模型失败:\x20'+_0x178591[_0x5d1f3b(-0xee,-0x130,-0x11f,-0x17a)]+'\x20'+_0x178591[_0x5d1f3b(-0x140,-0x137,-0x101,-0xdd)]);throw new Error(_0x5d1f3b(-0x206,-0x1a3,-0x200,-0x196)+_0x178591[_0x374612(0x140,0x148,0xee,0x17f)]+'\x20'+_0x178591['statusText']);}let _0x1f4f37=await _0x178591[_0x374612(0x147,0x13c,0x108,0x1bb)]();console['log'](_0x2d6339['nXSIu'],_0x1f4f37),console[_0x374612(0x10e,0xe3,0x113,0x106)](_0x5d1f3b(-0x114,-0x170,-0x193,-0x137)+'settingss.'+'sd_cchatu_'+_0x5d1f3b(-0x17f,-0x1a0,-0x1e3,-0x1ac),_0x26bf5c[_0x374612(0xd2,0xcb,0x119,0x96)+_0x374612(0xbe,0xd8,0x8f,0x135)]);if(_0x1f4f37!=_0x26bf5c[_0x5d1f3b(-0x179,-0x1ad,-0x1f2,-0x213)+_0x374612(0x14a,0xd8,0x93,0x89)]){_0x2d6339['YYjsP'](addLog,'正在设置模型为'+_0x26bf5c[_0x374612(0x128,0xcb,0x46,0x80)+_0x5d1f3b(-0x1d1,-0x1a0,-0x17b,-0x20c)]+'...'),toastr[_0x5d1f3b(-0x140,-0x16c,-0x190,-0x1b9)](_0x374612(0x137,0x124,0x10d,0xef)+_0x26bf5c[_0x5d1f3b(-0x163,-0x1ad,-0x193,-0x14b)+_0x5d1f3b(-0x212,-0x1a0,-0x17b,-0x18e)]);const _0x1d8f84={};_0x1d8f84[_0x5d1f3b(-0x144,-0x1b9,-0x189,-0x137)]=_0x26bf5c[_0x5d1f3b(-0x199,-0x1b3,-0x1d6,-0x19c)+_0x5d1f3b(-0x114,-0x17e,-0x171,-0x102)]?_0x26bf5c[_0x5d1f3b(-0x1dc,-0x1b3,-0x20c,-0x13f)+_0x5d1f3b(-0x1d9,-0x17e,-0x16c,-0x1d8)]:'',_0x1d8f84[_0x374612(-0x12,0x5f,0xb9,0x7f)]=_0x4a0b8b,_0x1d8f84[_0x5d1f3b(-0x186,-0x181,-0x191,-0x15a)]=_0x26bf5c[_0x374612(0x7b,0xcb,0xbf,0x58)+_0x374612(0x10d,0xd8,0x72,0x104)];const _0x59306b=await _0x2d6339[_0x374612(0x2c,0x57,0x58,0x25)](fetch,'/api/sd/se'+_0x374612(0xda,0x14f,0x13d,0x1aa),{'method':_0x2d6339['wBTGT'],'body':JSON[_0x374612(0x13d,0xbd,0x82,0x75)](_0x1d8f84),'headers':_0x2d6339[_0x374612(0x157,0xdc,0x83,0x73)](getRequestHeaders,window[_0x374612(0x1c8,0x145,0x139,0x1b5)])});if(!_0x59306b['ok']){if(_0x2d6339[_0x5d1f3b(-0x122,-0x19b,-0x168,-0x1a7)](_0x374612(0x9d,0x8e,0x52,0xf7),_0x5d1f3b(-0x1e6,-0x1ab,-0x1c3,-0x21f))){addLog(_0x5d1f3b(-0x1a7,-0x180,-0xfc,-0x135)+_0x59306b['status']+'\x20'+_0x59306b[_0x5d1f3b(-0x16d,-0x137,-0xbc,-0x17d)]);throw new Error(_0x374612(0x14f,0xf8,0x14a,0x152)+_0x59306b[_0x374612(0xe3,0x148,0x190,0x100)]+'\x20'+_0x59306b['statusText']);}else _0x4f60c4[_0x5d1f3b(-0x188,-0x188,-0x121,-0x1fd)+_0x374612(0x147,0x10e,0xb2,0xb9)]=!![],_0x2d6339[_0x374612(0x15d,0x14b,0x1c6,0x166)](_0x30f0eb);}toastr['info'](_0x5d1f3b(-0x264,-0x1ec,-0x1b8,-0x240)+_0x26bf5c[_0x374612(0x145,0xcb,0xb8,0xe1)+_0x374612(0x11c,0xd8,0x13b,0x102)]+'成功');}}else _0x513e2a=_0x2d6339[_0x5d1f3b(-0x240,-0x200,-0x196,-0x1a4)](_0x14b16f+',\x20',_0x5c3df6(_0x5f58a9[_0x374612(0x10f,0xa9,0xb4,0x110)+_0x235bb1+_0x374612(0x115,0xaf,0x82,0x113)]));}else{let _0x467437=await _0x2d6339[_0x5d1f3b(-0x12f,-0x19c,-0x165,-0x125)](getSDMode,_0x4a0b8b);if(_0x2d6339[_0x5d1f3b(-0x1c7,-0x18e,-0x12f,-0x181)](_0x467437,_0x26bf5c[_0x5d1f3b(-0x1f8,-0x1ad,-0x203,-0x1ee)+_0x374612(0x142,0xd8,0x141,0xcd)])){if(_0x2d6339[_0x374612(0x14e,0xcf,0x86,0xc3)](_0x2d6339[_0x5d1f3b(-0x215,-0x1e6,-0x1d9,-0x1d2)],_0x2d6339[_0x374612(0x7c,0x8d,0x5b,0x6e)]))return _0x1497b7[_0x374612(0x77,0xd7,0xf1,0x80)]()[_0x374612(0x18a,0x135,0xee,0xdf)](dKUIfT[_0x374612(-0x1,0x7b,0x58,0xa3)])[_0x5d1f3b(-0x121,-0x1a1,-0x19d,-0x1f4)]()[_0x374612(0xaf,0x76,0x6,0xf0)+'r'](_0xb45fa3)[_0x374612(0x194,0x135,0xe5,0xce)](_0x374612(0xe2,0x67,0x59,-0x1d)+'+$');else _0x2d6339[_0x5d1f3b(-0x1ac,-0x1c2,-0x23c,-0x189)](addLog,_0x374612(0x115,0xf2,0x10f,0xe8)+_0x26bf5c[_0x374612(0xe1,0xcb,0x14d,0xed)+_0x374612(0x81,0xd8,0x156,0x11c)]+'...'),await _0x2d6339[_0x374612(0x12b,0x149,0x101,0x1ad)](setSDMode,_0x4a0b8b,_0x26bf5c['sd_cchatu_'+_0x374612(0x5e,0xd8,0x9c,0xff)]);}}}else throw new _0x61829d(_0x2d6339['fGVmB']);}catch(_0x36fc72){_0x2d6339['hsPmx'](addLog,_0x374612(0xf6,0xbb,0x128,0x39)+':\x20'+_0x36fc72[_0x5d1f3b(-0x16b,-0x1d6,-0x173,-0x19f)]+('。请检查sdwebu'+_0x5d1f3b(-0x281,-0x226,-0x201,-0x24f)+'查模型是否正确。'));throw new Error(_0x374612(0x119,0xbb,0x11b,0x13c)+'，请检查sdwebu'+_0x5d1f3b(-0x237,-0x226,-0x299,-0x206)+'查模型是否正确。');}let _0x1f0cd2=-(-0x6fd*-0x2+0x22f3+-0x30ec);const _0x165274=_0x26bf5c['sd_cseed'];_0x2d6339['eKMFl'](_0x165274,'')&&_0x165274!==null&&!_0x2d6339['rGNFL'](isNaN,_0x2d6339[_0x374612(0xae,0x59,0x3b,-0x11)](Number,_0x165274))&&_0x2d6339[_0x5d1f3b(-0x25d,-0x1db,-0x226,-0x220)](_0x2d6339[_0x374612(0xfe,0x150,0x149,0x122)](Number,_0x165274),0x1246+-0x1265+0x1f)&&(_0x1f0cd2=_0x2d6339['MXJhO'](Number,_0x165274));let _0x34c598={'prompt':_0x1c65fd,'negative_prompt':_0x41cf4f,'sampler_name':_0x26bf5c[_0x374612(0xe5,0xcb,0x75,0x125)+_0x374612(0x73,0xe6,0x65,0x7c)+_0x374612(0x138,0xec,0xef,0x68)],'scheduler':_0x26bf5c[_0x5d1f3b(-0x182,-0x1ad,-0x159,-0x18b)+_0x5d1f3b(-0x18b,-0x1e2,-0x186,-0x1c3)+'r'],'steps':_0x26bf5c['sd_csteps'],'cfg_scale':_0x26bf5c[_0x5d1f3b(-0x20f,-0x1ef,-0x210,-0x181)],'width':_0x183169?_0x183169:_0x26bf5c[_0x374612(0x57,0x5e,0x30,0x2)],'height':_0x50fefd?_0x50fefd:_0x26bf5c['sd_cheight'],'restore_faces':_0x26bf5c[_0x5d1f3b(-0xfa,-0x127,-0x151,-0xfe)+'es']==_0x2d6339[_0x374612(0xb7,0x12d,0x18d,0x190)],'enable_hr':_0x26bf5c['sd_chires_'+_0x374612(0x8d,0xa5,0xf3,0x6f)]==_0x374612(0x113,0x10b,0xe7,0x176),'hr_upscaler':_0x26bf5c['sd_cchatu_'+_0x5d1f3b(-0x277,-0x206,-0x21f,-0x263)],'hr_scale':_0x26bf5c[_0x374612(0x3b,0xbc,0x125,0x102)+'e_factor'],'hr_additional_modules':[],'denoising_strength':_0x26bf5c[_0x5d1f3b(-0x1ae,-0x17c,-0x1b8,-0x181)+'ing_streng'+'th'],'hr_second_pass_steps':_0x26bf5c[_0x374612(0xd6,0x104,0xe3,0x139)+'steps'],'seed':_0x1f0cd2,'override_settings':{'CLIP_stop_at_last_layers':_0x2d6339[_0x374612(0x53,0x6f,0xb7,0x15)](Number,_0x26bf5c[_0x5d1f3b(-0x15a,-0x1be,-0x1a8,-0x19e)+_0x5d1f3b(-0xf7,-0x13b,-0x185,-0xf4)]),'sd_vae':_0x26bf5c[_0x374612(0x138,0xcb,0xa0,0x138)+_0x5d1f3b(-0x2ac,-0x227,-0x1ab,-0x2a2)]},'override_settings_restore_afterwards':!![],'save_images':!![],'send_images':!![],'do_not_save_grid':![],'do_not_save_samples':![]};addLog(_0x374612(0x131,0x144,0x112,0x153)+_0x5d1f3b(-0x16a,-0x168,-0x112,-0x19d)+_0x34c598['restore_fa'+'ces']),_0x2d6339['TtfYH'](addLog,_0x5d1f3b(-0x172,-0x1ce,-0x1dd,-0x15f)+'高清修复\x20为'+_0x34c598[_0x374612(0xc3,0x98,0xa6,0x2b)]);if(_0x2d6339[_0x5d1f3b(-0x25d,-0x214,-0x245,-0x1fe)](_0x26bf5c[_0x374612(0x93,0xb3,0x82,0xdc)+_0x374612(0x1ac,0x14d,0x1a1,0xf7)],_0x2d6339['gJHLK'])){_0x2d6339[_0x374612(0x1f,0x63,0xd6,0x82)](addLog,_0x2d6339[_0x5d1f3b(-0x1ed,-0x1fe,-0x191,-0x1ce)]);const _0x1ccffb={};_0x1ccffb[_0x5d1f3b(-0x14c,-0x1b5,-0x22b,-0x1f2)]=_0x2d6339[_0x374612(0x119,0xe8,0x104,0x89)];const _0x38c29d={};_0x38c29d[_0x374612(0xf0,0x118,0xc4,0x9d)]=[!![],!![],_0x1ccffb];const _0x3f3a32={};_0x3f3a32[_0x5d1f3b(-0x227,-0x1b6,-0x1b8,-0x1d9)]=_0x38c29d;const _0x24d45f={};_0x24d45f['alwayson_s'+_0x374612(0x3a,0x81,0x8d,0x8c)]=_0x3f3a32,_0x34c598=deepMerge(_0x34c598,_0x24d45f);}const _0x3b7106='\x0a---\x0a###\x20生'+_0x374612(0x96,0x97,0xeb,0x9f)+_0x374612(0x4d,0x69,0x10,-0x1b)+_0x374612(0x16e,0x146,0x18f,0x10f)+_0x1c65fd+(_0x374612(0x27,0x77,0x4b,0x63)+_0x5d1f3b(-0x158,-0x1dd,-0x1f1,-0x238)+_0x374612(0xdc,0x12a,0xe7,0x137)+'\x20')+_0x41cf4f+(_0x5d1f3b(-0x23d,-0x224,-0x261,-0x1ac)+'(Sampler):'+_0x374612(0x8e,0x7c,0x5c,0xc5))+_0x34c598[_0x5d1f3b(-0x1b8,-0x142,-0x16d,-0x1c7)+'me']+(_0x5d1f3b(-0x1d4,-0x15c,-0x193,-0x118)+_0x5d1f3b(-0xfc,-0x13f,-0x159,-0x10b))+_0x34c598[_0x5d1f3b(-0x11f,-0x1a4,-0x1c5,-0x225)]+(_0x374612(0xc7,0x8f,0xb4,0x105)+'cale:**\x20')+_0x34c598[_0x5d1f3b(-0x1ac,-0x140,-0x17b,-0x18f)]+(_0x5d1f3b(-0x1f5,-0x216,-0x1c4,-0x199)+_0x374612(0x111,0xe7,0xc8,0x7c))+_0x34c598[_0x374612(0xa8,0xe1,0x84,0xd0)]+'x'+_0x34c598[_0x5d1f3b(-0x198,-0x13d,-0x1a2,-0x19b)]+('\x0a-\x20**种子\x20(S'+_0x5d1f3b(-0x16d,-0x14d,-0x185,-0x1ab))+(_0x34c598['seed']===-(-0x133*-0x14+-0x8c4+0x1*-0xf37)?_0x2d6339['HDPTF']:_0x34c598['seed'])+(_0x374612(0xf3,0x88,0x106,0x12)+_0x5d1f3b(-0x127,-0x198,-0x1e8,-0x11a))+_0x26bf5c[_0x5d1f3b(-0x1fc,-0x1ad,-0x164,-0x14c)+_0x374612(0x7b,0xd8,0x7f,0xec)]+(_0x374612(0x80,0x75,0x6d,0x2b)+'*\x20')+_0x34c598[_0x5d1f3b(-0xd0,-0x149,-0xea,-0x11c)+_0x374612(0x96,0xb2,0x69,0x12e)][_0x374612(0x8e,0xf6,0x13c,0x127)]+(_0x374612(0x166,0xf4,0x14b,0x109)+_0x374612(0xf8,0xc0,0xdf,0x126))+_0x34c598[_0x374612(0xc1,0x12f,0x198,0xef)+'ettings'][_0x5d1f3b(-0x213,-0x1e7,-0x19c,-0x229)+_0x5d1f3b(-0x1b7,-0x220,-0x1ba,-0x1a4)+'yers']+('\x0a-\x20**高清修复\x20'+_0x5d1f3b(-0x269,-0x20a,-0x22c,-0x255)+_0x374612(0x16,0x60,-0x1c,0xa0))+_0x34c598[_0x374612(0xb3,0x98,0x5c,0xb6)]+(_0x374612(0xf3,0x9e,0xde,0x3c)+'(Upscale\x20F'+'actor):**\x20')+_0x34c598[_0x374612(0x54,0xb4,0x104,0x55)]+('\x0a-\x20**重绘幅度\x20'+_0x5d1f3b(-0x147,-0x1a8,-0x193,-0x1d9)+_0x374612(0x188,0x133,0x130,0x10b)+_0x374612(0xb2,0x4d,-0x1f,0xc0))+_0x34c598[_0x374612(0xd1,0x6a,0x3c,0x32)+_0x5d1f3b(-0x1d1,-0x1ed,-0x1b8,-0x16a)]+('\x0a-\x20**脸部修复\x20'+_0x374612(0xf0,0x11b,0x112,0xcf)+'aces):**\x20')+_0x34c598['restore_fa'+_0x5d1f3b(-0x251,-0x208,-0x28b,-0x20c)]+(_0x5d1f3b(-0x1d5,-0x1b0,-0x16e,-0x1d1)+_0x374612(0xdd,0x12c,0xbf,0x10f))+_0x2d6339['iPKTx'](_0x26bf5c[_0x5d1f3b(-0x211,-0x1c5,-0x158,-0x1cf)+_0x5d1f3b(-0xd7,-0x12b,-0x11a,-0x157)],_0x2d6339['gJHLK'])+_0x374612(0xde,0x125,0xdc,0x123);addLog(_0x3b7106),addLog(_0x5d1f3b(-0x19e,-0x162,-0x14b,-0x13e)+'数为'+JSON[_0x374612(0x78,0xbd,0x12c,0xb1)](_0x34c598)),console['log'](_0x2d6339[_0x5d1f3b(-0x17f,-0x18a,-0x16a,-0x188)],_0x34c598);let _0x38c8ab=!![];while(_0x38c8ab){if(_0x2d6339[_0x374612(-0x1b,0x4f,-0x25,-0x1d)]!==_0x2d6339[_0x374612(0xca,0x4f,0x4d,0x65)]){const _0x1afe18=_0x374612(0xa3,0x5a,0xaf,-0xf)+'常\x20(ID:\x20'+_0xd2a744+_0x5d1f3b(-0xb4,-0x131,-0x120,-0x10a)+_0x49d149['message'];_0x2d6339[_0x5d1f3b(-0x148,-0x19c,-0x143,-0x12e)](_0x4d5bbe,_0x374612(0x16c,0x107,0x16a,0x108)+_0x1afe18),_0x191134[_0x5d1f3b(-0x16b,-0x1d2,-0x206,-0x1ce)](_0x2d6339[_0x374612(0x24,0x53,0x26,0x1)],_0x57396a);const _0x172830={};_0x172830['id']=_0xae1ee0,_0x172830[_0x374612(0x110,0xab,0x122,0x5c)]=![],_0x172830[_0x374612(0x61,0xa6,0xf3,0xfe)]=_0x181573['message'],_0x172830[_0x374612(0xba,0x13a,0x17f,0x15f)]=_0x2db2c9,_0x1e1212[_0x5d1f3b(-0x20d,-0x207,-0x1d4,-0x1e7)](_0x1d7cad[_0x5d1f3b(-0x11b,-0x18f,-0x143,-0x209)+_0x374612(0x61,0xd6,0xd0,0x57)+_0x5d1f3b(-0x1e7,-0x176,-0x120,-0x18e)],_0x172830),_0x136c0e(_0x5d1f3b(-0x229,-0x1d0,-0x225,-0x22a)+_0x374612(0xa2,0xd9,0xc2,0x150)+_0x53218a+')');}else window[_0x374612(0xa9,0xb7,0x67,0xf9)]?_0x2d6339[_0x5d1f3b(-0x177,-0x19b,-0x140,-0x1ce)](_0x374612(0xcc,0xca,0x112,0x56),_0x2d6339[_0x374612(0x7f,0xa0,0x39,0x80)])?_0x33d6db['initialize'+_0x374612(0x146,0x10e,0x173,0xcc)]&&(_0x2fe2bd[_0x5d1f3b(-0xd9,-0x148,-0xd2,-0x12f)+'ener'](_0x1a82a8[_0x5d1f3b(-0x1cc,-0x18f,-0x125,-0x167)+_0x5d1f3b(-0x1d4,-0x1a6,-0x167,-0x1e4)+'ST'],_0x1181ee),_0x7f086b[_0x5d1f3b(-0x1c4,-0x188,-0x1be,-0x1ee)+_0x5d1f3b(-0x1d1,-0x16a,-0x15e,-0x130)]=![],_0x2d6339[_0x374612(0x11e,0xdc,0x157,0x109)](_0x6352ab,_0x2d6339['qkadn'])):_0x38c8ab=![]:await sleep(0x2*0xabc+0x255*0x6+-0x2*0xfc7);};try{if(_0x2d6339[_0x5d1f3b(-0x206,-0x1a9,-0x1a1,-0x1f4)](_0x26bf5c['client'],_0x2d6339[_0x5d1f3b(-0x1a1,-0x135,-0x1b3,-0xfd)])){_0x34c598[_0x5d1f3b(-0x1c2,-0x219,-0x1a0,-0x1ec)]=_0x4a0b8b,console[_0x5d1f3b(-0x194,-0x195,-0x1e9,-0x1c7)](_0x2d6339[_0x5d1f3b(-0x1d0,-0x1a5,-0x20e,-0x219)],_0x26bf5c['st_chatu8_'+'sd_auth']),_0x34c598['auth']=_0x26bf5c['st_chatu8_'+'sd_auth']?_0x26bf5c[_0x5d1f3b(-0x224,-0x1b3,-0x1a2,-0x14c)+_0x5d1f3b(-0x155,-0x17e,-0x1c6,-0x19e)]:'';const _0x6626ce=await _0x2d6339['JWgkl'](fetch,_0x2d6339[_0x5d1f3b(-0x1b1,-0x193,-0x1e6,-0x133)],{'method':_0x2d6339['wBTGT'],'headers':getRequestHeaders(window[_0x5d1f3b(-0x10a,-0x133,-0x11b,-0x12d)]),'body':JSON[_0x5d1f3b(-0x1fb,-0x1bb,-0x136,-0x1a4)](_0x34c598)});if(!_0x6626ce['ok']){const _0x415b28=await _0x6626ce[_0x5d1f3b(-0xfd,-0x13c,-0x14f,-0x103)]();_0x2d6339[_0x5d1f3b(-0x148,-0x18b,-0x10f,-0x1db)](addLog,'酒馆\x20返回错误。状态'+_0x374612(0x3a,0xb1,0x79,0x5e)+_0x6626ce['status']+_0x5d1f3b(-0xcf,-0x138,-0x17a,-0xe6)+_0x415b28),console[_0x5d1f3b(-0x166,-0x195,-0x12b,-0x1a4)](_0x2d6339[_0x374612(0x11c,0xfd,0x9a,0xa7)],_0x415b28);throw new Error(_0x5d1f3b(-0xe1,-0x161,-0x15d,-0xde)+_0x6626ce[_0x374612(0xf1,0x148,0x149,0x16b)]+_0x374612(0x78,0x87,0x69,0xc3)+_0x415b28);}const _0x2389b9=await _0x6626ce[_0x374612(0x101,0x13c,0xbb,0x1b3)]();let _0x2d6998='';try{const _0x3f9780=JSON[_0x5d1f3b(-0x188,-0x166,-0x19c,-0x171)](_0x2389b9);_0x2d6998=_0x3f9780[_0x374612(0x95,0xb0,0x49,0xdb)][-0xc2b+0x1*-0x196f+-0x2*-0x12cd];}catch(_0x248b8a){_0x2d6339[_0x5d1f3b(-0x17d,-0x159,-0xe6,-0x176)](_0x2d6339[_0x5d1f3b(-0x190,-0x1e4,-0x1b7,-0x173)],_0x2d6339[_0x374612(0x4,0x7d,0xd4,0x10)])?(_0x2d6339[_0x374612(0x152,0x150,0x1ad,0x166)](addLog,'JSON\x20解析失败，'+_0x374612(0x2e,0x80,0x4f,0x87)+_0x5d1f3b(-0xfd,-0x16e,-0x1a5,-0x19f)),_0x2d6998=_0x2389b9):_0x42bd53=_0x2d6339['OlnTq'](_0x52d922,',\x20')+_0xdf1237[_0x5d1f3b(-0x21a,-0x1cf,-0x20b,-0x15e)+_0x3acc55+'\x20Prompt'];}const _0x329f88=_0x2d6339['BMFTW']+_0x2d6998;_0x2d6339[_0x374612(0x152,0xe4,0x81,0xf8)](addLog,_0x2d6339['kptiz']);const _0x1ef55b={};return _0x1ef55b[_0x374612(0x19e,0x127,0xe3,0x10b)]=_0x329f88,_0x1ef55b[_0x5d1f3b(-0x28d,-0x20c,-0x1c9,-0x194)]=_0x3d4316||'',_0x1ef55b;}else{const _0x168eeb=new URL(_0x2d6339[_0x5d1f3b(-0x19a,-0x217,-0x264,-0x1d7)](_0x4a0b8b,_0x2d6339[_0x5d1f3b(-0x198,-0x164,-0x168,-0x1d8)]));window['xiancheng']=![];const _0x2a7776=await _0x2d6339['BvRRe'](fetch,_0x168eeb,{'method':'POST','body':JSON[_0x374612(0xfa,0xbd,0xf4,0x50)](_0x34c598),'headers':{'Content-Type':_0x2d6339['PjLkR'],'Authorization':_0x2d6339['iuDNB'](getsdAuth)}});window[_0x5d1f3b(-0x177,-0x1c1,-0x1fe,-0x1e7)]=!![];if(!_0x2a7776['ok']){const _0x37b488=await _0x2a7776[_0x374612(0xfd,0x13c,0x12f,0x16e)]();_0x2d6339['YYjsP'](addLog,_0x5d1f3b(-0x20a,-0x1de,-0x217,-0x237)+'误。状态码:\x20'+_0x2a7776[_0x374612(0x137,0x148,0x150,0x125)]+_0x374612(0xd7,0x140,0x171,0xde)+_0x37b488),console[_0x374612(0x128,0xe3,0x70,0x114)](_0x374612(0xf6,0xf1,0x74,0x174),_0x37b488);throw new Error(_0x5d1f3b(-0x1be,-0x161,-0x1ab,-0x18b)+_0x2a7776['status']+_0x5d1f3b(-0x20f,-0x1f1,-0x227,-0x23d)+_0x37b488);}const _0x676844=await _0x2a7776[_0x374612(0x190,0x13e,0x129,0xee)]();if(!_0x676844[_0x374612(0x2f,0xb0,0x12d,0xcc)]||_0x676844[_0x374612(0xe3,0xb0,0x12d,0x72)][_0x5d1f3b(-0x1bf,-0x20b,-0x244,-0x271)]===-0x1cc6+0x13*-0xcf+0x2c23)throw new Error(_0x2d6339[_0x374612(0xa7,0xb9,0xb5,0xf0)]);const _0x300fe0=_0x676844['images'][-0x13*-0x108+-0x16*-0x10+-0x14f8],_0x457bdb=_0x2d6339[_0x374612(0x2c,0x85,0x98,0x86)]+_0x300fe0;return _0x2d6339[_0x5d1f3b(-0x12c,-0x125,-0xa5,-0xdd)](addLog,'图像已成功获取并格式'+'化为\x20data\x20UR'+'L。'),{'image':_0x457bdb,'change':_0x2d6339['OlJRO'](_0x3d4316,'')};}}catch(_0x5aef70){if(_0x2d6339['mWydQ'](_0x5d1f3b(-0xe2,-0x144,-0x153,-0x102),_0x2d6339[_0x374612(0x68,0x6b,0xc5,0xd1)])){const _0x2c9c13=_0x381e90['parse'](_0x9af2c9);_0xd9e213=_0x2c9c13[_0x5d1f3b(-0x1f0,-0x1c8,-0x1f2,-0x201)][-0x6*-0x28c+0x1*0x4a2+-0x13ea];}else{window[_0x374612(0x8e,0xb7,0xaa,0x8f)]=!![],addLog(_0x374612(0x164,0x106,0xe9,0x130)+_0x5aef70[_0x5d1f3b(-0x21d,-0x1d6,-0x22a,-0x190)]),console['error'](_0x5d1f3b(-0x10f,-0x189,-0x1c9,-0x14f)+_0x5d1f3b(-0x13d,-0x167,-0x14c,-0x1bb)+'ge:',_0x5aef70);throw _0x5aef70;}}}async function sdGenerate(_0x53cc15){const _0x25ed50={'jiBeL':function(_0x246784,_0xd6d40){return _0x246784(_0xd6d40);},'vJlAd':function(_0x4f7a5b,_0x37ccf4,_0xcabaf5,_0x3d0906){return _0x4f7a5b(_0x37ccf4,_0xcabaf5,_0x3d0906);},'KBEoH':function(_0x5393a1,_0x11a581){return _0x5393a1(_0x11a581);},'FqaXm':function(_0x19ea56,_0x312e0f){return _0x19ea56(_0x312e0f);},'yQqNE':'Error\x20gene'+_0x58a74a(-0x189,-0x137,-0x19f,-0x172)+_0x58a74a(-0x11c,-0x138,-0xe0,-0xa9),'UwtJI':function(_0x32ca66,_0x760291){return _0x32ca66(_0x760291);}},{id:_0x53b59d,prompt:_0xf09027,width:_0x3e9e7a,height:_0xbb7f86,change:_0x3812e6}=_0x53cc15;_0x25ed50[_0x55a17b(-0x3a,-0x47,-0x5e,0x1b)](addLog,_0x58a74a(-0x10c,-0x185,-0x16f,-0xa1)+_0x58a74a(-0x1bf,-0x1d0,-0x22f,-0x23c)+_0x53b59d+(_0x58a74a(-0x190,-0x117,-0x1b8,-0x1ca)+':\x20')+_0xf09027+(_0x3812e6?'\x20-\x20Change:'+'\x20'+_0x3812e6:''));function _0x55a17b(_0x4747c7,_0x4fe9e8,_0x4be2ea,_0x308d9f){return _0x187f(_0x4fe9e8- -0x14d,_0x308d9f);}function _0x58a74a(_0x1046d1,_0x4ccc0b,_0x2fff89,_0xdbd166){return _0x187f(_0x1046d1- -0x276,_0x4ccc0b);}try{const {image:_0x1c544d,change:_0x6a6886}=await _0x25ed50[_0x55a17b(-0x8f,-0x47,-0xab,-0xba)](generateSDImage,{'prompt':_0xf09027,'width':_0x3e9e7a,'height':_0xbb7f86,'change':_0x3812e6});await _0x25ed50['vJlAd'](setItemImg,_0xf09027,_0x1c544d,_0x6a6886),addLog(_0x55a17b(0xbc,0x50,0xbb,0xac)+_0x58a74a(-0x14a,-0x18c,-0x1ba,-0x17c)+'\x20'+_0xf09027);const _0x1c7171={};_0x1c7171['id']=_0x53b59d,_0x1c7171[_0x55a17b(0x11,-0x51,0xc,-0x70)]=!![],_0x1c7171[_0x55a17b(-0x7d,-0xa6,-0xb1,-0xcf)]=_0x1c544d,_0x1c7171[_0x58a74a(-0xeb,-0x7b,-0x102,-0xea)]=_0xf09027,_0x1c7171[_0x55a17b(-0xb3,-0x90,-0x2b,-0x5f)]=_0x6a6886,eventSource[_0x58a74a(-0x1b4,-0x1bd,-0x1f0,-0x147)](EventType[_0x55a17b(0x60,-0x13,0x65,-0x28)+_0x58a74a(-0x14f,-0xde,-0x192,-0xe7)+_0x55a17b(0x21,0x6,0x69,0x50)],_0x1c7171),_0x25ed50[_0x58a74a(-0xf3,-0x98,-0xce,-0x156)](addLog,'发送SD生图成功响应'+_0x55a17b(-0x9d,-0x23,-0x21,-0x2c)+_0x53b59d+')');}catch(_0x242fc4){const _0xd7bb3='SD生图流程捕获到异'+_0x55a17b(-0x10f,-0xac,-0xff,-0x98)+_0x53b59d+_0x55a17b(-0xa,0x4b,0x14,0xb3)+_0x242fc4['message'];_0x25ed50['FqaXm'](addLog,_0x55a17b(0x68,0xb,-0x16,-0x78)+_0xd7bb3),console['error'](_0x25ed50[_0x58a74a(-0xff,-0xd9,-0x17b,-0x83)],_0x242fc4);const _0xc59da3={};_0xc59da3['id']=_0x53b59d,_0xc59da3[_0x55a17b(-0x9,-0x51,-0xb1,-0xc9)]=![],_0xc59da3[_0x55a17b(-0x4,-0x56,0x12,-0xb1)]=_0x242fc4['message'],_0xc59da3['prompt']=_0xf09027,eventSource[_0x58a74a(-0x1b4,-0x1af,-0x20d,-0x1f1)](EventType['GENERATE_I'+_0x58a74a(-0x14f,-0x161,-0x178,-0x107)+_0x55a17b(-0x30,0x6,0x5,0x6d)],_0xc59da3),_0x25ed50[_0x55a17b(-0x43,0x2c,0x7e,0x3b)](addLog,_0x58a74a(-0x17d,-0x1b2,-0x12b,-0x14b)+_0x58a74a(-0x14c,-0x1b4,-0x14d,-0xc9)+_0x53b59d+')');}}function initializeSDListener(){function _0x3d5a17(_0x251aa2,_0x3c40fe,_0x24f6fd,_0x46256b){return _0x187f(_0x46256b- -0xd1,_0x24f6fd);}const _0x353ea9={'giOEG':function(_0x526800,_0x171af9){return _0x526800(_0x171af9);},'AbviF':_0x3d5a17(0x10a,0x7e,0x88,0xca)+_0x3d5a17(-0x18,0x20,0xa2,0x5f)};eventSource['on'](EventType[_0x3d5a17(0x94,0x89,0x1e,0x69)+_0x35473d(-0x164,-0x1ad,-0x1e8,-0x17f)+'ST'],sdGenerate);function _0x35473d(_0x52e2e8,_0x4f7d21,_0x1aabb7,_0x81f993){return _0x187f(_0x4f7d21- -0x2d0,_0x81f993);}_0x353ea9[_0x3d5a17(0x55,-0xb,-0x86,-0x2b)](addLog,_0x353ea9[_0x3d5a17(0x86,0xd8,0xce,0x9e)]);}export async function replaceWithSd(){function _0x48c024(_0x121148,_0x252e7e,_0x1328dd,_0x40a425){return _0x187f(_0x1328dd- -0x323,_0x40a425);}const _0x4a4082={'JqVtU':function(_0x1d02c1,_0x21d560){return _0x1d02c1==_0x21d560;},'kXFmR':function(_0x16e5f6){return _0x16e5f6();},'XwKJi':function(_0x5c6476,_0x24b984){return _0x5c6476(_0x24b984);}};function _0x3904ea(_0x465a25,_0x5bef7c,_0x39f95d,_0x4c497b){return _0x187f(_0x465a25- -0x2ce,_0x39f95d);}_0x4a4082[_0x3904ea(-0x128,-0xbb,-0xdf,-0xef)](extension_settings[extensionName]['mode'],'sd')?(!window[_0x3904ea(-0x18d,-0x1ce,-0x14b,-0x148)+'SDListener']&&(window[_0x3904ea(-0x18d,-0x118,-0x122,-0x1d1)+_0x48c024(-0x1f0,-0x165,-0x1c4,-0x189)]=!![],_0x4a4082[_0x48c024(-0x167,-0x131,-0x190,-0x1d9)](initializeSDListener)),_0x4a4082[_0x3904ea(-0x13b,-0x117,-0x1bb,-0x135)](initializeImageProcessing)):window[_0x48c024(-0x246,-0x1f3,-0x1e2,-0x1dd)+_0x48c024(-0x1f5,-0x1b6,-0x1c4,-0x1a5)]&&(eventSource[_0x48c024(-0x15b,-0x189,-0x1a2,-0x1c9)+_0x48c024(-0x242,-0x168,-0x1bf,-0x1ab)](EventType[_0x48c024(-0x252,-0x167,-0x1e9,-0x1c3)+_0x48c024(-0x270,-0x18b,-0x200,-0x1f4)+'ST'],sdGenerate),window[_0x48c024(-0x180,-0x250,-0x1e2,-0x232)+_0x3904ea(-0x16f,-0xef,-0x140,-0x158)]=![],_0x4a4082['XwKJi'](addLog,_0x48c024(-0x1b0,-0x1ce,-0x188,-0x1bc)+_0x3904ea(-0x17d,-0x17a,-0x1ae,-0x1cd)));}
//# sourceMappingURL=http://localhost:8000/sd.js.map