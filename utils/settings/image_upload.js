function _0x540dda(_0x4db98d,_0x975e9e,_0x4dc12e,_0x6df17a){return _0x52e4(_0x975e9e-0x3c4,_0x4db98d);}(function(_0x3382a9,_0x4955dc){const _0x5c3e59=_0x3382a9();function _0x395aeb(_0x4e4056,_0x41ba6c,_0x36069a,_0x2c6b65){return _0x52e4(_0x4e4056-0x28f,_0x41ba6c);}function _0x54e188(_0x1623fc,_0x859262,_0x14fe23,_0x2e881b){return _0x52e4(_0x14fe23-0x110,_0x1623fc);}while(!![]){try{const _0x40c9bb=-parseInt(_0x54e188(0x25f,0x1c9,0x1fb,0x1e6))/(0x147b+0x6fb+-0x1b75)+parseInt(_0x395aeb(0x3aa,0x3bd,0x373,0x3ee))/(-0x1815+-0x1b0e*-0x1+-0x2f7)*(parseInt(_0x54e188(0x200,0x1b0,0x205,0x24a))/(0x2663+0x1bed+-0xb*0x607))+parseInt(_0x54e188(0x264,0x24f,0x26b,0x255))/(0x1*-0xa41+0x35*-0x50+0x1ad5)+parseInt(_0x395aeb(0x39f,0x373,0x3b7,0x3e0))/(-0x5b3*0x1+-0x5*0x4f9+-0x1e95*-0x1)+-parseInt(_0x54e188(0x26b,0x23d,0x20e,0x207))/(0x1*0x13bb+-0x1ee1+0x16*0x82)*(parseInt(_0x54e188(0x1f1,0x15d,0x1c5,0x161))/(-0x1d02+-0x7b5*-0x2+0xd9f))+parseInt(_0x54e188(0x210,0x19c,0x1ff,0x1fa))/(0x1161+-0x1b0e+0x47*0x23)+-parseInt(_0x395aeb(0x3bb,0x3e7,0x374,0x3aa))/(0x14*0x4a+-0xccd*-0x1+-0x128c);if(_0x40c9bb===_0x4955dc)break;else _0x5c3e59['push'](_0x5c3e59['shift']());}catch(_0xfa126b){_0x5c3e59['push'](_0x5c3e59['shift']());}}}(_0x1076,0x19*0x2753+-0x5f535+0x59b25));const _0x4c1b46=(function(){const _0x540e55={};function _0x1ee864(_0x50e747,_0x3dc6db,_0x516aed,_0x544609){return _0x52e4(_0x516aed-0x360,_0x50e747);}_0x540e55[_0x45caf9(0x3ce,0x3a0,0x3b7,0x38e)]=_0x45caf9(0x44c,0x44a,0x4af,0x471)+_0x45caf9(0x423,0x40d,0x474,0x3d5),_0x540e55[_0x1ee864(0x493,0x4d5,0x49d,0x4ab)]=function(_0x3bb0a0,_0x3b33d6){return _0x3bb0a0===_0x3b33d6;},_0x540e55[_0x45caf9(0x436,0x41e,0x406,0x45d)]=_0x45caf9(0x3e2,0x419,0x3a7,0x419);const _0x3fdf16=_0x540e55;let _0x20c25c=!![];function _0x45caf9(_0x4033b1,_0x3d82f5,_0x3b0035,_0x224b81){return _0x52e4(_0x4033b1-0x2d4,_0x224b81);}return function(_0x17dc6a,_0x55d7e9){function _0x2ad2b8(_0x316f19,_0x37fcd2,_0x3e4aa8,_0x41e3c0){return _0x1ee864(_0x316f19,_0x37fcd2-0x76,_0x3e4aa8-0x5,_0x41e3c0-0x31);}function _0x5113b3(_0x2471b8,_0xb6a56c,_0x97949e,_0x3a62e3){return _0x1ee864(_0x97949e,_0xb6a56c-0x15e,_0xb6a56c- -0x223,_0x3a62e3-0x1da);}if(_0x3fdf16[_0x5113b3(0x21b,0x27a,0x25b,0x2b5)](_0x3fdf16['Ffcjt'],_0x3fdf16[_0x5113b3(0x269,0x29f,0x2f2,0x241)])){const _0x81dc8d=_0x20c25c?function(){function _0x3f2d50(_0x26e30d,_0x39dae7,_0x2d275d,_0x1deda1){return _0x2ad2b8(_0x26e30d,_0x39dae7-0x1df,_0x1deda1- -0x73b,_0x1deda1-0x17);}if(_0x55d7e9){const _0x441cd1=_0x55d7e9[_0x3f2d50(-0x2e7,-0x2f9,-0x373,-0x319)](_0x17dc6a,arguments);return _0x55d7e9=null,_0x441cd1;}}:function(){};return _0x20c25c=![],_0x81dc8d;}else _0x31d42e[_0x2ad2b8(0x4c6,0x4ca,0x4be,0x4f4)+_0x5113b3(0x227,0x1f8,0x259,0x20b)](_0x3fdf16['euErj'])[_0x5113b3(0x27e,0x268,0x255,0x280)]();};}()),_0x560c5c=_0x4c1b46(this,function(){function _0x3554d7(_0x59cb03,_0x4413e4,_0x234ced,_0x492cef){return _0x52e4(_0x4413e4-0x3e1,_0x234ced);}const _0x48fedc={};_0x48fedc[_0x3554d7(0x4ec,0x495,0x4a3,0x4e0)]=_0x3554d7(0x577,0x51f,0x4e0,0x4fe)+'+$';function _0x3d2972(_0x4fa5cf,_0x3b77f5,_0x572cf0,_0x24eaad){return _0x52e4(_0x572cf0-0x8b,_0x3b77f5);}const _0x28a565=_0x48fedc;return _0x560c5c[_0x3554d7(0x489,0x4a9,0x4b0,0x4ae)]()[_0x3d2972(0x23d,0x229,0x1e5,0x19d)](_0x28a565[_0x3d2972(0x153,0x130,0x13f,0xfb)])[_0x3d2972(0x17c,0x195,0x153,0xf6)]()['constructo'+'r'](_0x560c5c)[_0x3554d7(0x4d3,0x53b,0x538,0x56e)](_0x28a565[_0x3d2972(0x142,0x188,0x13f,0x1a4)]);});function _0x1076(){const _0x3c15e8=['t2jjyu8','ndGWmZLMtNLYrK8','zxnZAw5Nie5VDG','s0nVvvC','wuLuDuq','mJu3mtG3mMjZCgvKDW','BM9Uzq','z2HOA1e','yxrRANC','Df9UB3zLBgfP','tMPVBvO','ndyYmtHgC0Huuw4','wvrYyui','zKLTywDL','t3nTuLu','i2LTywDLsw5WDq','zxvfCMO','sLr6Cfm','DxzdsgO','C2vor2W','nK1nzLvsDG','zwXbssbJAgfYia','yxbWzw5K','BgfJzwHVBgrLCG','5zUE5PwW5O2UoG','BLr3tLi','BuHnwuS','rxjYB3iGChjVyW','qwPzq2G','DgfYz2v0','rNrprMW','v2Tgyxa','z2vFBMfPx2nOyq','BwvZC2fNzq','5zU+54Mh5lIk5lYG5AsX6lsLlcdPLjNOR68','BM92zwXHAs1Yzq','A3vdtuS','AK9QBK4','ndu4ote1y1vQyKfj','C3jJ','q3jzu0K','yNrU','yM9KEq','rKPHz1a','rhH0r3O','6k+35ywi6k6+572Uq29TzNLv','Afv5wfq','sNLzAwq','wKntDxy','ndHdAenWv1C','sLfQvg8','DvzKq1e','yMXVyJO','5lIk5lYG5OIq5yQFlcdMNi3LIQhLMAJOV5q','AgPsuwW','y3jLyxrLt2jQzq','yuTpzwK','wxbvv3O','suPTr0C','DLrswMW','y29TzNL1AvvYBa','C3rHCNrZv2L0Aa','i25VDMvSywKTAq','5zMO6l+u5zUE5PwW5O2UoIa','zLzjBhu','y2XPy2S','ndiYodaYmfH6ve9uAW','zw1VDMuTy2HHCG','Dg9Y','A0nNAKu','zgf0ytPPBwfNzq','z2vFBM92zwXHAq','i2nVBwz5DwKTAq','yLn0ENu','te15zwq','AgfYlxjLzI1PBq','y1nPseK','C3r5Bgu','uxvby3q','i25VDMvSywKTyW','y29TzNL1AwnHBG','v3nQv2m','Bfv3A0u','sKzVrMq','kcGOlISPkYKRkq','vKfytum','BKPvzKq','CMvMlwLTywDLlq','zxCTy29UDgfPBG','A2fVDhvWAwfU','lwj0BG','zw1VDMuTAw1HzW','y3rvuKW','vuDSCgO','CIaUC3qTy2HHDa','vgHsuhC','qxnyzM4','uu1PsuW','ChjLDMLLD0LTyq','zLHrBeK','D2TiBe8','x25VDMvSywK','DKLpvfu','EwX4uw4','BMfTzq','6k+M5OofoIa','Bw92zs1PBwfNzq','ANnVBG','Bwv0Ag9K','Aw1Hz2uVCg5N','seHwr1e','z2v0rwXLBwvUDa','C2vHCMnO','mtiXmJGWnhfjEw9Prq','rK5ttNi','BMfPm0nOyxjszq','5zU+54Mh5Ase55cg5OIw5lIk5lYG5PE25yE66zsz','yw5ZzMvYsw1HzW','rwTKveq','qMvWtLu','rMzJANq','mxWYFdn8nxWWFa','BNPjwu0','zs1IDg4','CvHesey','z2uY','ALDxzKi','ywDLlxbYzxzPzq','yMXVy2S','u3f1EMm','Aezfq2K','zgLZCgXHEq','q09Wy3m','BwHlvNK','C3bSAxq','rfHmuK0','D3nttKy','Dhu4lwLTywDLlq','Dgv4Da','zwXLy3qTy2HHCG','DKz3t3K','s3LhyLe','Aw1Hz2vjBNb1Da','u1ruwuu','5zU+54Mh5Ase55cg5AsX6lsLoIa','y0HWA0m','quj0rhy','wMLMsxK','AMLcqKi','ug1fz3a','C3rYAw5NAwz5','vwXKwge','mxWWFdn8nhWY','tNvQBKi','uuz4uxG','mJm3odqXoezUsKPdrq','AxDyqwy','r3ziDNO','zwHszeK','CL9Yzwy','yuL5A28','qNLjza','Dej6wgO','yxbWBhK','vxPtvMC','sMfkuei','Bg9N','zxiGlNn0lwnOyq','CMvM','tgjsu0G','CMv2B2TLt2jQzq','EePlsuu','5lIk5lYG5AsX6lsLoIa','BMnzr20','Dg9tDhjPBMC','ssbbueNLNldLNydJGii','y0jowhu','CMvMigLTywDLoG','i25VDMvSywKTCG','CgnZvKe','Bw92zs1JAgfYlq','CuvPvgi','CuHry3m','DhjPBq','CxvLCNLtzwXLyW','BwfNzs1WCMv2Aq','Aw1Hz2u','zMLSzxm','zxjYB3i','zwXLy3qTAw1HzW','l3vWBg9Hzc9PBq','zMXLEa','ue9tva','zMLUza','CgXHy2vOB2XKzq','yKzyDeS','s2rMue8','Aw5SAw5LlwzSzq','zhHlsvq','y1HSswq','6zsz6k+V6k+M5OofoG','lxjLzI1PBwfNzq','qxHHvuG','v21cCKW','i25VDMvSywKTCW','BMfPm1zPyMvuCG','ve1Nrve','D3HtAMW'];_0x1076=function(){return _0x3c15e8;};return _0x1076();}_0x560c5c();import{extension_settings}from'../../../../../extensions.js';import{saveSettingsDebounced}from'../../../../../../script.js';import{extensionName}from'../config.js';import{processUploadedImage,processUploadedImageToBlob,addLog}from'../utils.js';let nai3VibeTransferImageMimeType='image/png',nai3CharRefImageMimeType=_0x540dda(0x533,0x51b,0x4cd,0x52c),comfyuiImageObjectURL=null;function _0x52e4(_0x5be36a,_0x234a31){const _0x3f23dc=_0x1076();return _0x52e4=function(_0x5e404a,_0x33e06a){_0x5e404a=_0x5e404a-(0x2465+0x86*-0x12+-0x1a4f);let _0x4c035a=_0x3f23dc[_0x5e404a];if(_0x52e4['hPreHn']===undefined){var _0x2c2811=function(_0x32ba63){const _0x49c249='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x354f3d='',_0x8d4879='',_0x302724=_0x354f3d+_0x2c2811;for(let _0x166f01=0x1cd8+-0x57d+0x175b*-0x1,_0x4977f1,_0x5b872e,_0x46bb4f=-0x3c8+0x1a92+-0x16ca;_0x5b872e=_0x32ba63['charAt'](_0x46bb4f++);~_0x5b872e&&(_0x4977f1=_0x166f01%(-0x3*-0xc99+0x482+-0x5*0x875)?_0x4977f1*(-0x7da*-0x1+-0x241b+-0x1c81*-0x1)+_0x5b872e:_0x5b872e,_0x166f01++%(-0x1*0x83b+-0x4*-0x89b+0x1*-0x1a2d))?_0x354f3d+=_0x302724['charCodeAt'](_0x46bb4f+(-0xb33+0x83*0x31+-0xdd6))-(0xfc8+0xafd*0x2+-0x25b8)!==0x30d*-0xa+-0x71b+0x1*0x259d?String['fromCharCode'](-0x3d2*0xa+-0x1*0x20fb+0x2417*0x2&_0x4977f1>>(-(0x14*0x149+0x1572+-0x2f24)*_0x166f01&0x197a+-0x1227+0x1*-0x74d)):_0x166f01:-0x3*0x21d+-0xef7+-0x1b*-0xca){_0x5b872e=_0x49c249['indexOf'](_0x5b872e);}for(let _0x37a2c2=0x2*0x1281+-0x78f+0x7*-0x435,_0x48c6c1=_0x354f3d['length'];_0x37a2c2<_0x48c6c1;_0x37a2c2++){_0x8d4879+='%'+('00'+_0x354f3d['charCodeAt'](_0x37a2c2)['toString'](-0x1603+0x2448+0xe35*-0x1))['slice'](-(-0x2*-0x1e8+0x25e+0x2*-0x316));}return decodeURIComponent(_0x8d4879);};_0x52e4['ZbKYNQ']=_0x2c2811,_0x5be36a=arguments,_0x52e4['hPreHn']=!![];}const _0x1cdc82=_0x3f23dc[-0x514*0x6+0x25c7+0x1*-0x74f],_0x53baed=_0x5e404a+_0x1cdc82,_0x4c1c15=_0x5be36a[_0x53baed];if(!_0x4c1c15){const _0x27c32c=function(_0x1e3975){this['IHrmju']=_0x1e3975,this['qeiCFn']=[0x109f+-0xa9e+0x10*-0x60,0x4b*-0x5+0x1*0xb0d+-0x996,-0x1*-0xd55+0x1*-0x1f17+0x8e1*0x2],this['ALTyYo']=function(){return'newState';},this['iXUdAm']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['lrtzDp']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x27c32c['prototype']['vVPNgE']=function(){const _0x266839=new RegExp(this['iXUdAm']+this['lrtzDp']),_0x1e9809=_0x266839['test'](this['ALTyYo']['toString']())?--this['qeiCFn'][0x1a3*0x1+-0x18b2+0x1710]:--this['qeiCFn'][-0xbc0+0x22a0+-0x5b8*0x4];return this['CRqbyc'](_0x1e9809);},_0x27c32c['prototype']['CRqbyc']=function(_0x1ad01f){if(!Boolean(~_0x1ad01f))return _0x1ad01f;return this['VOVeJn'](this['IHrmju']);},_0x27c32c['prototype']['VOVeJn']=function(_0x144dab){for(let _0x2d2482=-0xcb3*0x1+-0x1483+0x2136,_0x401c73=this['qeiCFn']['length'];_0x2d2482<_0x401c73;_0x2d2482++){this['qeiCFn']['push'](Math['round'](Math['random']())),_0x401c73=this['qeiCFn']['length'];}return _0x144dab(this['qeiCFn'][-0x2669*-0x1+-0x2aa+0x1*-0x23bf]);},new _0x27c32c(_0x52e4)['vVPNgE'](),_0x4c035a=_0x52e4['ZbKYNQ'](_0x4c035a),_0x5be36a[_0x53baed]=_0x4c035a;}else _0x4c035a=_0x4c1c15;return _0x4c035a;},_0x52e4(_0x5be36a,_0x234a31);}function updateNovelaiImagePreview(_0x34f423){const _0x295c7a={};function _0x3da7b0(_0x560042,_0x4bdc9e,_0x42a733,_0x5d7239){return _0x540dda(_0x560042,_0x42a733- -0x3cb,_0x42a733-0x55,_0x5d7239-0x1bd);}_0x295c7a[_0x556808(0x61,0x85,0xc2,0x2b)]=_0x3da7b0(0x178,0xf2,0x121,0xc5)+_0x556808(0x28,0x8,0x5e,0x3a)+_0x3da7b0(0x13e,0x149,0x13b,0x14f)+'er\x20.st-cha'+_0x556808(0x10e,0xa8,0xeb,0xc4)+'placeholde'+'r';function _0x556808(_0x26f778,_0x13ae34,_0x427ea9,_0xe70d26){return _0x540dda(_0x26f778,_0x13ae34- -0x48f,_0x427ea9-0x122,_0xe70d26-0xd8);}_0x295c7a[_0x3da7b0(0x11e,0x100,0xc8,0x124)]=_0x556808(0xaa,0x65,0x5f,0x4a),_0x295c7a[_0x556808(-0x17,-0x4,0x46,-0x12)]=_0x556808(0xe2,0x9f,0xc3,0xd9),_0x295c7a[_0x3da7b0(0xdd,0x81,0xe3,0xd8)]=_0x3da7b0(0xa4,0x10f,0xe9,0xe9),_0x295c7a['kCgjE']=_0x556808(-0x13,0x14,-0x26,0x3b)+'x',_0x295c7a[_0x3da7b0(0xad,0xfc,0x10b,0x133)]=_0x3da7b0(0x12c,0xf0,0xd2,0xfd);const _0x5366d6=_0x295c7a,_0x5a9b66=document['getElement'+_0x556808(-0x9,-0x10,-0x9,0x35)]('previewIma'+_0x3da7b0(0xcb,0x146,0x12a,0x18c)),_0x487d1a=document[_0x556808(-0x3c,0x7,0x6f,0x62)+_0x556808(0x85,0x63,0x29,0xb7)](_0x5366d6[_0x3da7b0(0x181,0x1a4,0x149,0xed)]),_0x4c3131=document[_0x556808(0x2e,0x8e,0x73,0xef)+_0x556808(0x3b,-0x10,-0x76,-0x10)]('novelai-re'+_0x556808(0x2a,0x89,0x6d,0x36)+_0x556808(0x7e,0x79,0x9f,0x70));if(_0x34f423&&_0x34f423[_0x556808(0x32,0x5c,0x5a,-0x5)](_0x5366d6[_0x3da7b0(0xf3,0xb8,0xc8,0x107)])){_0x5a9b66[_0x3da7b0(0x12c,0xdd,0x10a,0x116)]=_0x34f423,_0x5a9b66[_0x3da7b0(0xe6,0x115,0x130,0x180)][_0x3da7b0(0x19d,0x105,0x166,0x15c)]=_0x5366d6[_0x556808(0x32,-0x4,-0x42,0x41)],_0x487d1a[_0x556808(0x93,0x6c,0x72,0xc8)]['display']=_0x5366d6[_0x3da7b0(0xd2,0xa4,0xe3,0x10b)],_0x4c3131[_0x3da7b0(0x143,0xd1,0x130,0x193)][_0x556808(0x8b,0xa2,0x74,0xc7)]=_0x5366d6[_0x556808(0x94,0x64,0x80,0x65)];const _0x1cc215=_0x34f423[_0x556808(0x106,0xa5,0xe0,0xce)](','),_0x240b2a=_0x1cc215[0x15df*-0x1+0x11a8*-0x1+-0x1*-0x2787][_0x3da7b0(0x192,0x1c2,0x169,0x1c3)](':')[-0xf85+-0x1275+0x21fb]['split'](';')[-0x19*0x9f+-0x1851+0x27d8];nai3VibeTransferImageMimeType=_0x240b2a,window[_0x556808(0x82,0x1c,0x23,0x22)+_0x556808(0xd4,0x94,0x53,0xf7)+'e']=_0x1cc215[-0x1*0xa16+0x17d1+-0xdba];}else _0x5a9b66['src']='',_0x5a9b66[_0x3da7b0(0x195,0x10c,0x130,0x14d)][_0x556808(0xf0,0xa2,0xf9,0x73)]=_0x5366d6[_0x3da7b0(0xe4,0x9f,0xe3,0x10a)],_0x487d1a['style'][_0x556808(0x8e,0xa2,0x7e,0xab)]=_0x5366d6['CrYSI'],_0x4c3131[_0x3da7b0(0x156,0x125,0x130,0x16d)]['display']=_0x5366d6[_0x3da7b0(0xcf,0x81,0xe3,0x104)],window[_0x3da7b0(0xba,0xfb,0xe0,0xf7)+_0x3da7b0(0x177,0x166,0x158,0x13e)+'e']=null;}async function handleNovelaiImageUpload(_0x3c1f5f){const _0x4ccb51={'uxoDP':'block','UGlpj':_0x260438(0x13,0x86,0x49,0x71),'ThRPw':function(_0xe4f79f,_0x41121c){return _0xe4f79f!==_0x41121c;},'LbRSH':_0x260438(0xc5,0xb9,0xec,0xb7),'PmEgp':_0x260438(0x131,0xaa,0x7b,0xe1),'seNGl':_0x260438(0x32,0x76,0x97,0x86)+_0x41436c(-0x22,0xa,-0x39,-0x17)+'elAI\x20image'+':','jOjnN':function(_0x57a203,_0x52df8f){return _0x57a203(_0x52df8f);},'AsXfn':function(_0x515e99,_0x44ef67){return _0x515e99+_0x44ef67;},'QMiIL':_0x41436c(-0x45,-0x38,-0x71,-0x74)},_0xc38601=_0x3c1f5f[_0x41436c(-0x1e,0x25,-0x31,0x56)][_0x41436c(0x18,-0xd,0x4e,-0xe)][0x1d23*0x1+0xe43*0x1+-0x2b66];function _0x260438(_0x5c9343,_0xf3314d,_0x4f1859,_0x772a20){return _0x540dda(_0x4f1859,_0x772a20- -0x443,_0x4f1859-0x13d,_0x772a20-0x33);}if(!_0xc38601)return;function _0x41436c(_0x5280eb,_0x23fc0c,_0x158428,_0x3e2ae7){return _0x540dda(_0x5280eb,_0x23fc0c- -0x4a6,_0x158428-0x140,_0x3e2ae7-0x172);}try{if(_0x4ccb51[_0x260438(0x12a,0x8d,0xa4,0xca)](_0x4ccb51[_0x41436c(-0x6f,-0x1f,-0x20,-0x2d)],_0x4ccb51[_0x41436c(-0x63,-0x33,0x21,-0x96)])){const _0x1e9237=await processUploadedImage(_0xc38601,!![]);updateNovelaiImagePreview(_0x1e9237);}else{_0x5e404a[_0x41436c(-0x38,0x2f,0x4e,0x0)]=_0x33e06a,_0x4c035a[_0x260438(0xe5,0xb5,0x115,0xb8)]['display']=_0x4ccb51['uxoDP'],_0x2c2811[_0x260438(0xb2,0x9a,0x8f,0xb8)][_0x260438(0xb1,0x10c,0x119,0xee)]=_0x4ccb51[_0x41436c(0x81,0x65,0xad,0x5b)],_0x1cdc82[_0x260438(0x11d,0xa0,0x9d,0xb8)][_0x41436c(0x34,0x8b,0xa7,0x67)]='inline-fle'+'x';const _0x44ccf4=_0x53baed[_0x41436c(0xb1,0x8e,0x69,0x94)](','),_0x760299=_0x44ccf4[-0xc91+0x1bf7*-0x1+-0x1*-0x2888][_0x41436c(0xd3,0x8e,0xb1,0x41)](':')[0x1212*0x2+0x1*-0x383+0x20a0*-0x1][_0x41436c(0x9f,0x8e,0x39,0x28)](';')[0x35*0x94+0x1516+-0x33ba];_0x4c1c15=_0x760299,_0x32ba63[_0x41436c(0x51,0x7b,0x15,0xda)+_0x260438(0x3f,0x45,0xa3,0x78)]=_0x44ccf4[0xc*-0x104+0x9*0x412+0x1871*-0x1];}}catch(_0x31c5d1){console[_0x41436c(0x19,-0xc,0x15,-0x55)](_0x4ccb51[_0x41436c(0x7c,0x1b,-0x2c,-0x12)],_0x31c5d1),_0x4ccb51[_0x41436c(0x1e,0x2d,0x76,0x6f)](alert,_0x4ccb51[_0x260438(0x106,0xe8,0x8a,0xcb)](_0x4ccb51[_0x41436c(0xcf,0x69,0x74,0xcd)],_0x31c5d1['message']));}}function updateNovelaiCharRefImagePreview(_0x4835f9){function _0x38dd0b(_0x4674b9,_0x54ca92,_0x5476ea,_0x3e588c){return _0x540dda(_0x4674b9,_0x5476ea- -0x3ee,_0x5476ea-0x88,_0x3e588c-0x1d7);}const _0x1a68f0={};_0x1a68f0[_0x38dd0b(0xea,0xcc,0xd9,0x118)]='previewIma'+_0x38dd0b(0x92,0xbf,0xe0,0xb5)+_0x355659(0x11d,0x154,0x101,0xfb),_0x1a68f0[_0x38dd0b(0xb3,0x98,0xf6,0xe6)]=_0x355659(0x15e,0x1b0,0x112,0x14f)+_0x38dd0b(0x96,0x7c,0xa4,0xba)+_0x355659(0x1a5,0x153,0x15a,0x183)+_0x355659(0x11f,0x114,0x19e,0x155),_0x1a68f0[_0x38dd0b(0x5a,0x64,0xa0,0x4e)]=_0x355659(0x128,0x1a7,0x163,0x172),_0x1a68f0['ZifIy']=_0x355659(0x155,0x16d,0x165,0x132),_0x1a68f0[_0x355659(0x11a,0x127,0x144,0x16c)]=_0x38dd0b(0x75,0xc6,0xb5,0x8e)+'x',_0x1a68f0['COpcs']='flex';const _0x140a45=_0x1a68f0,_0x513544=document['getElement'+_0x355659(0x157,0x114,0xf2,0xfd)](_0x140a45['nTwNR']),_0x57afae=document[_0x355659(0xea,0xda,0x154,0x114)+_0x38dd0b(0xc8,0xd4,0x104,0x14c)](_0x355659(0x144,0x15c,0x129,0x17b)+_0x38dd0b(0xef,0x172,0x10b,0xdf)+'age-previe'+'w-containe'+_0x355659(0x154,0x1ea,0x1b7,0x18a)+'u8-image-p'+_0x38dd0b(0xdc,0xb5,0xd7,0x135)),_0x1b41c0=document[_0x38dd0b(0xc9,0xed,0x12f,0x16d)+_0x355659(0x12c,0xf7,0xa1,0xfd)](_0x140a45[_0x38dd0b(0x13b,0x97,0xf6,0xb3)]);function _0x355659(_0xeb9ead,_0xe17580,_0xd391c7,_0x2b0448){return _0x540dda(_0xd391c7,_0x2b0448- -0x382,_0xd391c7-0x184,_0x2b0448-0xf2);}if(_0x4835f9&&_0x4835f9[_0x38dd0b(0x14f,0xc1,0xfd,0xc9)](_0x140a45[_0x355659(0x15b,0x16c,0x10e,0x10c)])){_0x513544[_0x38dd0b(0x125,0xab,0xe7,0x81)]=_0x4835f9,_0x513544[_0x355659(0x12d,0x149,0x1b3,0x179)]['display']=_0x355659(0x1b5,0x202,0x1a3,0x1ac),_0x57afae[_0x355659(0x129,0x19a,0x13f,0x179)]['display']=_0x140a45[_0x38dd0b(0x9c,0x8f,0x83,0x42)],_0x1b41c0[_0x38dd0b(0x163,0x136,0x10d,0x14b)]['display']=_0x140a45[_0x355659(0x150,0x1cb,0x177,0x16c)];const _0x551603=_0x4835f9[_0x355659(0x1d2,0x172,0x171,0x1b2)](','),_0x3bac9e=_0x551603[0x1*0xd01+-0x137d+0xa*0xa6][_0x38dd0b(0x10a,0x127,0x146,0x164)](':')[-0x18*0x43+0x2*0x107a+-0x1aab][_0x355659(0x14a,0x1f3,0x1e2,0x1b2)](';')[-0x1984+-0x26ad*-0x1+-0xd29];nai3CharRefImageMimeType=_0x3bac9e,window[_0x38dd0b(0x191,0x180,0x133,0x170)+'fImage']=_0x551603[-0x234+-0x133a*0x1+-0x156f*-0x1];}else _0x513544[_0x355659(0x19f,0x12d,0x10b,0x153)]='',_0x513544['style'][_0x355659(0x1b6,0x14e,0x186,0x1af)]=_0x140a45['ZifIy'],_0x57afae[_0x38dd0b(0xa8,0x107,0x10d,0x173)][_0x38dd0b(0x159,0x131,0x143,0x106)]=_0x140a45[_0x38dd0b(0x13e,0x1ab,0x144,0x15a)],_0x1b41c0[_0x355659(0x188,0x1b0,0x1b5,0x179)]['display']=_0x38dd0b(0xcc,0x119,0xc6,0x117),window[_0x38dd0b(0x154,0x123,0x133,0x18b)+'fImage']=null;}async function handleNovelaiCharRefImageUpload(_0x5a80dd){function _0x3e824f(_0x5822be,_0x557d3b,_0x3e2085,_0x1fe980){return _0x540dda(_0x3e2085,_0x557d3b- -0x187,_0x3e2085-0x184,_0x1fe980-0xa2);}const _0x42e663={'wRWue':function(_0x1bc856,_0x1e08c8){return _0x1bc856!==_0x1e08c8;},'EKjsU':'FUVEv','qHQcs':_0x3e824f(0x3b0,0x38b,0x339,0x353),'AxaUH':_0x3e824f(0x380,0x342,0x332,0x38d)+'essing\x20Nov'+_0x3e824f(0x302,0x33c,0x353,0x33c)+_0x27ba2d(0x44d,0x4a2,0x44e,0x4a3),'GONEE':function(_0x77b078,_0xe553e){return _0x77b078(_0xe553e);},'xJKIE':function(_0x53f17b,_0x46b4a5){return _0x53f17b+_0x46b4a5;},'ghhkQ':_0x27ba2d(0x493,0x481,0x4d2,0x4bf)},_0x4d56c7=_0x5a80dd[_0x27ba2d(0x50c,0x4de,0x532,0x486)][_0x27ba2d(0x47e,0x4ac,0x4e4,0x4ee)][-0x18a9+0x1fdd+0x2*-0x39a];if(!_0x4d56c7)return;function _0x27ba2d(_0x20205c,_0x5f5035,_0x2313cc,_0x2288a5){return _0x540dda(_0x2288a5,_0x5f5035-0x13,_0x2313cc-0x1b5,_0x2288a5-0x129);}try{if(_0x42e663['wRWue'](_0x42e663['EKjsU'],_0x42e663[_0x3e824f(0x305,0x30d,0x2e7,0x2e4)])){const _0x116cb3=await processUploadedImage(_0x4d56c7);updateNovelaiCharRefImagePreview(_0x116cb3);}else _0xac5e3[_0x3e824f(0x34b,0x396,0x3fe,0x359)+_0x27ba2d(0x49b,0x492,0x47a,0x4ca)](_0x27ba2d(0x5af,0x54f,0x54d,0x521)+'2')['click']();}catch(_0x2eb985){console[_0x3e824f(0x354,0x313,0x371,0x30c)](_0x42e663[_0x27ba2d(0x465,0x4bb,0x50f,0x4a3)],_0x2eb985),_0x42e663['GONEE'](alert,_0x42e663[_0x3e824f(0x32b,0x302,0x363,0x345)](_0x42e663[_0x3e824f(0x391,0x32e,0x33c,0x36d)],_0x2eb985[_0x27ba2d(0x538,0x4e2,0x52c,0x539)]));}}function updateComfyUIImagePreview(_0x3dec1a){function _0x38dd12(_0x12af52,_0x1ca836,_0x5e6c57,_0x2eb171){return _0x540dda(_0x12af52,_0x1ca836- -0x45e,_0x5e6c57-0x1a8,_0x2eb171-0x143);}const _0x4ada18={'UldXa':'Error\x20proc'+_0x318c76(-0x231,-0x20f,-0x23b,-0x25f)+_0x318c76(-0x1af,-0x1fc,-0x19a,-0x1c1)+_0x38dd12(0x8e,0x31,-0x5,-0x1c),'STTYE':function(_0x4e80b1,_0x20e980){return _0x4e80b1(_0x20e980);},'aKOei':'图片处理失败:\x20','BepNU':_0x318c76(-0x173,-0x1c9,-0x1ea,-0x1e8)+'mage-previ'+_0x318c76(-0x212,-0x1b9,-0x216,-0x155)+_0x318c76(-0x221,-0x23a,-0x290,-0x29d)+'tu8-image-'+_0x38dd12(0x48,0x42,0x2,0xa7)+'r','qXDHF':'comfyui-re'+_0x318c76(-0x178,-0x1a7,-0x1b7,-0x1b3)+_0x38dd12(0xaa,0xaa,0xc8,0x75),'DXLRM':_0x38dd12(0xa1,0x84,0xdc,0x89),'vTRZl':function(_0x3871e8,_0x270636){return _0x3871e8!==_0x270636;},'EsdfR':function(_0x13ec6e,_0x3aaf02){return _0x13ec6e===_0x3aaf02;},'NCoFi':_0x318c76(-0x1ce,-0x1ae,-0x148,-0x1dc),'ehRdI':_0x318c76(-0x1ce,-0x1e6,-0x22c,-0x1e0),'cHpkC':_0x318c76(-0x17b,-0x191,-0x17a,-0x1ca),'FtOFl':_0x38dd12(-0x23,0x45,-0x9,0x3c)+'x','Squzc':function(_0x41ff46,_0x4ffc68){return _0x41ff46!==_0x4ffc68;},'JyYid':_0x38dd12(0x31,0x19,-0x41,-0x28),'LMyed':_0x318c76(-0x1ae,-0x20b,-0x267,-0x1e6)},_0x5d96b3=document['getElement'+_0x38dd12(0xf,0x21,0x20,0x79)](_0x318c76(-0x1f7,-0x1af,-0x1a6,-0x20c)+_0x318c76(-0x15c,-0x194,-0x174,-0x183));function _0x318c76(_0x2b245c,_0x39905c,_0x516b3b,_0x5bfaba){return _0x540dda(_0x516b3b,_0x39905c- -0x6bf,_0x516b3b-0x163,_0x5bfaba-0x12f);}const _0xd091af=document[_0x318c76(-0x1dd,-0x229,-0x24a,-0x279)+'tor'](_0x4ada18[_0x38dd12(0xe9,0xc7,0xac,0x6c)]),_0x3d9bac=document['getElement'+_0x38dd12(-0x1a,0x21,0x83,0x12)](_0x4ada18[_0x38dd12(0x100,0xcc,0xa0,0x105)]);_0x5d96b3['src']&&_0x5d96b3['src'][_0x38dd12(0x2c,0x8d,0x5a,0x73)](_0x4ada18[_0x318c76(-0x1e6,-0x18a,-0x18f,-0x1e1)])&&_0x4ada18[_0x318c76(-0x1d3,-0x1d6,-0x17f,-0x1c0)](_0x5d96b3[_0x38dd12(0x85,0x77,0x6a,0xdc)],_0x3dec1a)&&URL[_0x318c76(-0x264,-0x237,-0x290,-0x1d6)+_0x38dd12(0xfe,0xac,0x75,0xd9)](_0x5d96b3[_0x38dd12(0x45,0x77,0xd2,0x88)]);if(_0x3dec1a)_0x4ada18['EsdfR'](_0x4ada18['NCoFi'],_0x4ada18[_0x38dd12(0xc,0x1e,0x6,0x6c)])?(_0x2d2482['error'](_0x4ada18[_0x38dd12(-0x27,0x17,0x32,0x64)],_0x401c73),_0x4ada18[_0x318c76(-0x134,-0x182,-0x155,-0x180)](_0x18a702,_0x4ada18[_0x38dd12(0x27,0x88,0xda,0xbc)]+_0x5b4896[_0x38dd12(0x72,0x71,0x6d,0xa)])):(_0x5d96b3[_0x38dd12(0x29,0x77,0xcf,0xbd)]=_0x3dec1a,_0x5d96b3[_0x38dd12(0x38,0x9d,0xfb,0x56)]['display']=_0x4ada18[_0x38dd12(0x77,0x11,-0x40,0x30)],_0xd091af['style'][_0x318c76(-0x1a9,-0x18e,-0x164,-0x1f1)]=_0x318c76(-0x1c9,-0x20b,-0x267,-0x1d8),_0x3d9bac[_0x38dd12(0xe7,0x9d,0x64,0x7c)][_0x38dd12(0x10b,0xd3,0xe0,0xd4)]=_0x4ada18[_0x38dd12(0x2e,0x6e,0xc9,0x17)]);else{if(_0x4ada18[_0x38dd12(0xf5,0xd1,0xf0,0x76)](_0x4ada18[_0x38dd12(0xb1,0x7f,0x88,0xe4)],_0x4ada18[_0x38dd12(0x1a,0x7f,0x80,0x99)])){const _0xd791=_0x5367b8?function(){if(_0x39f3df){const _0x259d24=_0x5bc2e0['apply'](_0xa487a6,arguments);return _0x25a43d=null,_0x259d24;}}:function(){};return _0x3945ec=![],_0xd791;}else _0x5d96b3[_0x318c76(-0x183,-0x1ea,-0x24f,-0x1f8)]='',_0x5d96b3[_0x38dd12(0xfe,0x9d,0xf1,0xe7)]['display']=_0x4ada18[_0x318c76(-0x1d7,-0x1c7,-0x21a,-0x1c7)],_0xd091af[_0x38dd12(0x95,0x9d,0xbf,0xf4)][_0x38dd12(0xaf,0xd3,0xad,0x12b)]=_0x38dd12(0x23,0x3f,0x81,0xa2),_0x3d9bac[_0x38dd12(0xef,0x9d,0x35,0x97)][_0x38dd12(0xbf,0xd3,0xe8,0x90)]=_0x4ada18[_0x38dd12(0xe7,0x9a,0xf9,0xe5)],window[_0x318c76(-0x202,-0x1c1,-0x1f5,-0x1aa)+_0x318c76(-0x204,-0x1b8,-0x1a1,-0x165)]=null,comfyuiImageObjectURL=null;}}async function handleImageUpload2(_0x488649){function _0x24c016(_0x1b25ba,_0x443989,_0x3f9bf5,_0x50f0a2){return _0x540dda(_0x443989,_0x1b25ba- -0x6c8,_0x3f9bf5-0x2f,_0x50f0a2-0x139);}const _0x43868e={'KyGbQ':_0x24c016(-0x1a1,-0x19d,-0x151,-0x1cd)+'4','KdfPO':_0xf121c5(0x184,0x1f4,0x19f,0x151),'YITuD':function(_0x42ebca,_0x3185a0){return _0x42ebca(_0x3185a0);},'nJUfD':function(_0x135037,_0x1581b7){return _0x135037(_0x1581b7);},'cXlId':function(_0x2771d2,_0x649e2f){return _0x2771d2!==_0x649e2f;},'jiBBB':_0xf121c5(0x166,0x1dc,0x1b8,0x172),'IJmGG':_0x24c016(-0x1b3,-0x1c7,-0x174,-0x15a),'tOlnC':'YgaLf','lUwkE':_0x24c016(-0x1e5,-0x1d5,-0x1f6,-0x19f)+_0x24c016(-0x202,-0x24b,-0x1a2,-0x241),'HHVGQ':function(_0x5c5525,_0x3e01fe){return _0x5c5525+_0x3e01fe;},'WsjWc':_0x24c016(-0x23e,-0x21c,-0x202,-0x260),'XeFJP':_0xf121c5(0x188,0x17c,0x191,0x168),'ZCSuv':function(_0x4b6b6e,_0x699317){return _0x4b6b6e(_0x699317);},'FNSNr':function(_0x8cec99,_0x22b7af){return _0x8cec99(_0x22b7af);},'UzSVg':function(_0x3d39f1,_0x5a3755){return _0x3d39f1+_0x5a3755;},'GvHvz':_0xf121c5(0x248,0x26b,0x20d,0x274)+':'},_0x43d67b=extension_settings[extensionName],_0x2f5212=_0x488649[_0xf121c5(0x1da,0x19a,0x1b6,0x21d)][_0xf121c5(0x151,0x1c3,0x184,0x191)][0x2*-0xb99+-0x1c46+0x3d*0xd8];if(!_0x2f5212)return;function _0xf121c5(_0x10c336,_0x1ab7ce,_0x56cd5a,_0x915676){return _0x540dda(_0x10c336,_0x56cd5a- -0x315,_0x56cd5a-0xf7,_0x915676-0x144);}try{const _0x5dbad1=await processUploadedImageToBlob(_0x2f5212),_0x4c2908=URL[_0xf121c5(0x228,0x16c,0x1d0,0x220)+'ctURL'](_0x5dbad1);comfyuiImageObjectURL=_0x4c2908,_0x43868e[_0xf121c5(0x1b4,0x243,0x1ef,0x1fa)](updateComfyUIImagePreview,_0x4c2908);const _0x441fac=new FormData();_0x441fac[_0x24c016(-0x204,-0x1d7,-0x1ae,-0x1eb)](_0x24c016(-0x230,-0x22d,-0x226,-0x243),_0x5dbad1,_0x2f5212[_0xf121c5(0x1ec,0x21e,0x201,0x1e4)]);let _0x1c886e=_0x43d67b[_0x24c016(-0x1de,-0x199,-0x1a9,-0x195)][_0x24c016(-0x233,-0x28f,-0x249,-0x28a)]();if(!_0x1c886e){if(_0x43868e[_0x24c016(-0x223,-0x249,-0x208,-0x22a)](_0x43868e[_0xf121c5(0x174,0x1a6,0x15d,0x1b3)],_0x43868e[_0x24c016(-0x1e0,-0x1b4,-0x1e4,-0x21c)])){alert(_0xf121c5(0x1af,0x192,0x1c6,0x16e)+_0xf121c5(0x1cf,0x187,0x178,0x195)),_0x43868e['YITuD'](updateComfyUIImagePreview,null);return;}else{const _0x190436=_0x43868e[_0x24c016(-0x18d,-0x135,-0x12d,-0x13e)][_0xf121c5(0x21f,0x1f6,0x21f,0x234)]('|');let _0x2e2b79=0x1*-0x102b+0x23ac+0x1*-0x1381;while(!![]){switch(_0x190436[_0x2e2b79++]){case'0':_0x431a01[_0x24c016(-0x1ca,-0x1ff,-0x17d,-0x221)+_0xf121c5(0x1f2,0x1df,0x1f2,0x257)]=null;continue;case'1':_0x427d03[_0xf121c5(0x1ed,0x1d1,0x1c0,0x225)]='';continue;case'2':_0x4dbaa6[_0xf121c5(0x19c,0x230,0x1e6,0x18f)][_0xf121c5(0x263,0x1f2,0x21c,0x209)]=_0x43868e[_0xf121c5(0x126,0x1d9,0x18d,0x1f3)];continue;case'3':_0x131a9c['style'][_0x24c016(-0x197,-0x13a,-0x17e,-0x1be)]=_0xf121c5(0x166,0x1d9,0x188,0x1b5);continue;case'4':_0x3ecd04=null;continue;case'5':_0xa2a303[_0xf121c5(0x1ea,0x233,0x1e6,0x23f)][_0x24c016(-0x197,-0x1dd,-0x182,-0x170)]='none';continue;}break;}}}const _0x253f6a={};_0x253f6a[_0xf121c5(0x1bd,0x201,0x205,0x237)]=_0x24c016(-0x22a,-0x1da,-0x237,-0x255),_0x253f6a[_0x24c016(-0x1f0,-0x1bc,-0x1c6,-0x19d)]=_0x441fac;const _0x977d62=await fetch(_0x1c886e+(_0xf121c5(0x1a0,0x163,0x187,0x1cb)+'age'),_0x253f6a);if(_0x977d62['ok']){if(_0x43868e['tOlnC']!==_0x43868e['tOlnC']){_0x47209a(_0x24c016(-0x1ed,-0x1b9,-0x193,-0x246)+'I\x20API地址。'),_0x43868e['YITuD'](_0x5658d7,null);return;}else{const _0x143921=await _0x977d62[_0x24c016(-0x1af,-0x200,-0x18e,-0x1d7)]();window['comfyuican'+'kaotupian']=_0x143921[_0xf121c5(0x232,0x20f,0x201,0x253)],_0x43868e[_0x24c016(-0x1c4,-0x219,-0x1d8,-0x18f)](addLog,'图片上传成功,\x20服务'+_0x24c016(-0x1db,-0x219,-0x1c2,-0x1aa)+JSON[_0x24c016(-0x254,-0x2b8,-0x2ae,-0x22c)](_0x143921)),console[_0x24c016(-0x244,-0x27b,-0x230,-0x1f7)](_0x43868e[_0xf121c5(0x239,0x226,0x1eb,0x1ee)],_0x143921);}}else{const _0x22244a=await _0x977d62[_0x24c016(-0x190,-0x1d4,-0x1d1,-0x17e)]();alert(_0x43868e[_0xf121c5(0x1b2,0x1c1,0x207,0x21b)](_0x43868e[_0x24c016(-0x1c9,-0x21e,-0x206,-0x174)],_0x22244a)),_0x43868e[_0xf121c5(0x1c8,0x1da,0x1ef,0x18a)](addLog,_0x24c016(-0x1f8,-0x234,-0x1ec,-0x214)+_0x24c016(-0x1b1,-0x156,-0x1fd,-0x1ce)+_0x22244a),console[_0xf121c5(0x186,0x11e,0x185,0x194)](_0x43868e['XeFJP'],_0x22244a),_0x43868e[_0x24c016(-0x1ea,-0x1bd,-0x18c,-0x185)](updateComfyUIImagePreview,null);}}catch(_0x34f029){_0x43868e[_0x24c016(-0x1a8,-0x200,-0x1c6,-0x16c)](alert,_0x43868e[_0x24c016(-0x246,-0x274,-0x205,-0x2ab)](_0x24c016(-0x1a6,-0x1e1,-0x1c5,-0x1cb)+':\x20',_0x34f029[_0xf121c5(0x183,0x159,0x1ba,0x180)])),console[_0xf121c5(0x138,0x187,0x185,0x1b8)](_0x43868e[_0x24c016(-0x24d,-0x21b,-0x273,-0x221)],_0x34f029),_0x43868e[_0xf121c5(0x1b4,0x15d,0x19d,0x18e)](addLog,_0x24c016(-0x1f8,-0x1af,-0x1f5,-0x20c)+_0x24c016(-0x1b1,-0x16b,-0x20d,-0x1d3)+JSON[_0x24c016(-0x254,-0x256,-0x2ae,-0x1f7)](_0x34f029)),updateComfyUIImagePreview(null);}}export function initImageUpload(_0xbb5f9e){function _0x5e8b10(_0x1c080a,_0x1f03d1,_0x1ce676,_0x4ffcc9){return _0x540dda(_0x1ce676,_0x4ffcc9- -0x5a8,_0x1ce676-0xa7,_0x4ffcc9-0x1bb);}const _0x26cb3d={'AjYCh':_0x15d69e(-0x1a7,-0x204,-0x1e9,-0x166)+_0x15d69e(-0x1d0,-0x1f4,-0x1f1,-0x208),'hFECi':function(_0x1cee35,_0x57d1d9){return _0x1cee35(_0x57d1d9);},'uVdCQ':_0x15d69e(-0x1a7,-0x15d,-0x1be,-0x164)+'_nai_char_'+_0x15d69e(-0x25d,-0x24e,-0x234,-0x2bb),'vFwOy':function(_0x346de5,_0x1407e3){return _0x346de5!==_0x1407e3;},'wAfMD':_0x15d69e(-0x229,-0x253,-0x274,-0x1ea),'OsmRU':function(_0x50dc65,_0x44796f){return _0x50dc65(_0x44796f);},'mHMYK':function(_0x1ddff5,_0x104497){return _0x1ddff5+_0x104497;},'aIyko':_0x5e8b10(-0x22,-0x26,-0xdf,-0x86)+':','iwXAf':function(_0x238972,_0x5e44e6){return _0x238972(_0x5e44e6);},'bFXtK':function(_0x157db7,_0x4d55d7){return _0x157db7===_0x4d55d7;},'wxSjl':_0x15d69e(-0x1e7,-0x1bd,-0x1b2,-0x215),'DwUmr':function(_0x3f6e32,_0x5554ee){return _0x3f6e32(_0x5554ee);},'WmBrL':_0x5e8b10(-0x2c,-0xb7,-0x7b,-0x6c)+'2','dxKIT':'#novelai-c'+_0x15d69e(-0x1ea,-0x1a6,-0x22d,-0x1d1)+_0x5e8b10(-0x4a,-0x97,-0x17,-0x7b)+'w-containe'+_0x5e8b10(-0xf6,-0x6a,-0xa4,-0x9c)+'u8-image-p'+_0x15d69e(-0x21e,-0x216,-0x273,-0x1c0),'atkjw':'novelai-re'+_0x5e8b10(-0x163,-0xef,-0x11b,-0x116)+_0x5e8b10(-0xf6,-0x5a,-0xd1,-0xa3)+_0x15d69e(-0x20c,-0x1ed,-0x1ec,-0x24a),'JaJPB':_0x15d69e(-0x1b5,-0x215,-0x15b,-0x15e),'ABtDv':'flex','uvCHj':_0x5e8b10(-0x11d,-0x8e,-0xb8,-0xc8),'pcsVA':'#novelai-s'+'elect-imag'+'e-btn','hUyXT':_0x15d69e(-0x1f4,-0x1ff,-0x1ff,-0x1e9),'mhKVy':_0x5e8b10(-0x92,-0x139,-0x90,-0xeb)+_0x5e8b10(-0x13a,-0x118,-0xcd,-0xf1),'DxtGz':'change','tBzXj':_0x5e8b10(-0xee,-0xc7,-0x127,-0xfe)+_0x5e8b10(-0xd3,-0x50,-0x9d,-0x6f)+'-ref-image'+_0x5e8b10(-0x65,-0xd3,-0x4c,-0xa0),'YpUWz':'#novelai-r'+_0x5e8b10(-0x115,-0x101,-0xdf,-0xb7)+_0x5e8b10(-0xe5,-0x107,-0x150,-0x101)+_0x5e8b10(-0x51,-0x91,-0x79,-0xa0),'bIWwb':'#comfyui-s'+_0x15d69e(-0x248,-0x27e,-0x26c,-0x20d)+_0x5e8b10(-0xab,-0x93,-0x5d,-0x7f),'VAXMC':'#comfyui-r'+_0x5e8b10(-0xa8,-0xb7,-0x96,-0x9f)+_0x5e8b10(-0x99,-0x35,-0x2b,-0x7f)};_0xbb5f9e[_0x5e8b10(-0x164,-0x162,-0x104,-0x109)](_0x26cb3d[_0x15d69e(-0x252,-0x211,-0x202,-0x214)])['on'](_0x26cb3d[_0x5e8b10(-0x8f,-0x115,-0xe9,-0xcc)],()=>{function _0x37f2f1(_0x51dd25,_0x4a1ad6,_0x4bed5a,_0x389de4){return _0x5e8b10(_0x51dd25-0x8,_0x4a1ad6-0x1d0,_0x4a1ad6,_0x51dd25-0x3de);}function _0x342438(_0x40fc33,_0x24a1a9,_0xea10ff,_0x22cb3f){return _0x15d69e(_0x40fc33-0x651,_0x24a1a9-0x72,_0x24a1a9,_0x22cb3f-0x1c0);}document[_0x37f2f1(0x353,0x391,0x2fe,0x3a4)+_0x37f2f1(0x2b5,0x30a,0x289,0x2ed)](_0x26cb3d[_0x342438(0x438,0x49c,0x492,0x3f9)])[_0x342438(0x45d,0x47c,0x416,0x48b)]();}),_0xbb5f9e[_0x15d69e(-0x244,-0x1e5,-0x297,-0x2a8)](_0x26cb3d[_0x15d69e(-0x1b0,-0x161,-0x15f,-0x174)])['on'](_0x26cb3d['DxtGz'],handleNovelaiImageUpload);function _0x15d69e(_0x115743,_0x1e6783,_0x4a9b37,_0x1e5bb7){return _0x540dda(_0x4a9b37,_0x115743- -0x6e3,_0x4a9b37-0x1ac,_0x1e5bb7-0x2e);}_0xbb5f9e[_0x15d69e(-0x244,-0x21d,-0x280,-0x251)](_0x5e8b10(-0x13a,-0x106,-0xfe,-0x118)+_0x5e8b10(-0x4b,-0xcc,-0x95,-0x9f)+_0x5e8b10(-0x7c,-0x95,-0x3d,-0x7f))['on'](_0x26cb3d[_0x5e8b10(-0xe7,-0x129,-0xb2,-0xcc)],()=>{function _0x3a1758(_0x44ad83,_0x1bd95c,_0x24523d,_0x3116e7){return _0x5e8b10(_0x44ad83-0x38,_0x1bd95c-0x90,_0x24523d,_0x1bd95c- -0x1ab);}_0x26cb3d[_0x3a1758(-0x1f5,-0x223,-0x262,-0x20e)](updateNovelaiImagePreview,null);}),_0xbb5f9e[_0x15d69e(-0x244,-0x288,-0x220,-0x24d)](_0x26cb3d[_0x5e8b10(-0x127,-0xe8,-0x106,-0x128)])['on'](_0x26cb3d['hUyXT'],()=>{const _0x3dd67c={};_0x3dd67c[_0x20aad0(0x2af,0x273,0x2b2,0x2a6)]=_0x26cb3d[_0x10ed6e(-0x232,-0x1a7,-0x200,-0x1e1)];function _0x20aad0(_0x4608a8,_0x4aa028,_0x60c154,_0x3dea8e){return _0x15d69e(_0x4aa028-0x45f,_0x4aa028-0x66,_0x3dea8e,_0x3dea8e-0xea);}const _0x2087c5=_0x3dd67c;function _0x10ed6e(_0x34640a,_0x53a139,_0x4c8e2d,_0x580e4e){return _0x5e8b10(_0x34640a-0x8,_0x53a139-0x100,_0x34640a,_0x4c8e2d- -0x139);}_0x26cb3d['vFwOy'](_0x10ed6e(-0x24b,-0x1c0,-0x227,-0x24e),_0x26cb3d['wAfMD'])?_0x30ca0e['getElement'+_0x10ed6e(-0x250,-0x216,-0x262,-0x253)](_0x2087c5['bStzu'])[_0x10ed6e(-0x1b4,-0x1b6,-0x1f2,-0x1c0)]():document['getElement'+'ById'](_0x26cb3d[_0x20aad0(0x261,0x25d,0x23c,0x2a9)])['click']();}),_0xbb5f9e[_0x5e8b10(-0xd0,-0x15c,-0xe2,-0x109)]('#imageInpu'+'t_nai_char'+'_ref')['on'](_0x26cb3d[_0x5e8b10(-0xde,-0x118,-0x122,-0xce)],handleNovelaiCharRefImageUpload),_0xbb5f9e[_0x5e8b10(-0x160,-0x117,-0x11e,-0x109)](_0x26cb3d[_0x5e8b10(-0xd3,-0xca,-0x7d,-0xc1)])['on'](_0x26cb3d['hUyXT'],()=>{function _0x4c762a(_0x62ae4c,_0x4b576c,_0x33e0b9,_0xfe6452){return _0x5e8b10(_0x62ae4c-0x188,_0x4b576c-0xef,_0x62ae4c,_0x4b576c-0x4e6);}function _0x4c90a5(_0x5a0246,_0x3e766c,_0x401c94,_0x3bae6c){return _0x15d69e(_0x401c94-0x4a2,_0x3e766c-0x71,_0x3bae6c,_0x3bae6c-0x97);}_0x26cb3d[_0x4c762a(0x387,0x3df,0x416,0x3e2)](_0x26cb3d[_0x4c762a(0x3e5,0x3eb,0x402,0x3ac)],_0x26cb3d['wxSjl'])?_0x26cb3d['DwUmr'](updateNovelaiCharRefImagePreview,null):(_0x26cb3d[_0x4c90a5(0x257,0x269,0x27b,0x22d)](_0xaed313,_0x26cb3d[_0x4c762a(0x431,0x406,0x3e4,0x3d0)](_0x4c762a(0x485,0x460,0x4b1,0x4a5)+':\x20',_0x5c3d2b[_0x4c90a5(0x2b6,0x2c1,0x28e,0x289)])),_0x2d9fd0[_0x4c90a5(0x247,0x200,0x259,0x279)](_0x26cb3d[_0x4c90a5(0x23f,0x20b,0x23d,0x202)],_0x207255),_0x26cb3d[_0x4c90a5(0x201,0x27d,0x239,0x272)](_0x747c6c,_0x4c90a5(0x25e,0x260,0x28f,0x28a)+_0x4c762a(0x48e,0x455,0x4a8,0x42e)+_0x889296[_0x4c90a5(0x283,0x253,0x233,0x20f)](_0x2f61d0)),_0x26cb3d[_0x4c762a(0x3c0,0x3fa,0x452,0x3d8)](_0x54aa64,null));}),_0xbb5f9e[_0x5e8b10(-0x102,-0xcf,-0xff,-0x109)](_0x26cb3d['bIWwb'])['on'](_0x26cb3d['hUyXT'],()=>{function _0x1d14d2(_0x18499e,_0x253df1,_0x271d13,_0x3c5624){return _0x5e8b10(_0x18499e-0x55,_0x253df1-0x11e,_0x18499e,_0x3c5624-0x1c0);}function _0x96235e(_0x5d65d8,_0x278f6f,_0xc68456,_0x4df32b){return _0x5e8b10(_0x5d65d8-0x1b7,_0x278f6f-0xb9,_0x4df32b,_0x278f6f-0x36);}document[_0x1d14d2(0x134,0x12c,0xce,0x135)+_0x96235e(-0x9c,-0xf3,-0xe9,-0x14c)](_0x26cb3d[_0x96235e(-0x11c,-0xc9,-0x129,-0x111)])[_0x96235e(-0x6d,-0x83,-0xbf,-0xbb)]();}),_0xbb5f9e[_0x5e8b10(-0x122,-0xc0,-0x15d,-0x109)](_0x5e8b10(-0xbb,-0x87,-0x111,-0xeb)+'t2')['on'](_0x26cb3d[_0x5e8b10(-0x88,-0x91,-0x12f,-0xce)],handleImageUpload2),_0xbb5f9e[_0x15d69e(-0x244,-0x24e,-0x1eb,-0x1eb)](_0x26cb3d[_0x15d69e(-0x1e0,-0x1b1,-0x20d,-0x21e)])['on'](_0x15d69e(-0x1f4,-0x23c,-0x1bf,-0x222),()=>{const _0x122a38={};_0x122a38[_0x557df0(0x15a,0x15c,0x165,0x17d)]=_0x26cb3d[_0x557df0(0x18b,0x109,0x17a,0x170)],_0x122a38['jWWfB']=_0x26cb3d[_0x558478(0x31,0x54,0x23,0x83)],_0x122a38[_0x558478(0x27,0x87,-0x34,-0x2d)]=_0x557df0(0x174,0x158,0x1ab,0x1c0),_0x122a38['JTzpS']=_0x26cb3d[_0x557df0(0xf1,0x18a,0xf9,0x14f)];function _0x557df0(_0x1898b6,_0x1f7281,_0x4cc624,_0x965b8b){return _0x15d69e(_0x965b8b-0x3af,_0x1f7281-0x145,_0x4cc624,_0x965b8b-0x125);}_0x122a38['wsSNF']=_0x26cb3d[_0x558478(-0x15,0x34,0x20,-0x1a)],_0x122a38[_0x557df0(0x20f,0x1aa,0x223,0x1f4)]=_0x557df0(0x1c6,0x144,0x1a6,0x180);function _0x558478(_0x331c12,_0xd45a36,_0xc749ae,_0x2a0d7e){return _0x5e8b10(_0x331c12-0x154,_0xd45a36-0xa5,_0xc749ae,_0x331c12-0x123);}const _0x310191=_0x122a38;if(_0x26cb3d[_0x557df0(0x1db,0x1e7,0x258,0x206)](_0x26cb3d[_0x558478(0x3b,0x1e,0x72,0x5a)],_0x557df0(0x136,0x18b,0x169,0x184)))_0x26cb3d[_0x558478(0xab,0x8a,0x6c,0x87)](updateComfyUIImagePreview,null);else{const _0x479cd5=_0x31b011[_0x558478(0x98,0xc7,0x9c,0xea)+'ById']('previewIma'+_0x557df0(0x1d6,0x1f6,0x1ed,0x19a)+_0x557df0(0xf8,0x100,0x147,0x149)),_0x3f9d32=_0x118c31['querySelec'+_0x558478(0x6d,0x6,0x8f,0x45)](_0x310191[_0x557df0(0x1b6,0x1d8,0x15a,0x17d)]),_0x478207=_0x51135b['getElement'+'ById'](_0x310191[_0x558478(0xa7,0x8d,0x66,0x7c)]);if(_0x5beab0&&_0x1e714f[_0x558478(0x66,0x8c,0x4c,0xb1)](_0x310191[_0x558478(0x27,0x5b,0x6,0x3e)])){_0x479cd5[_0x557df0(0x1da,0x1fa,0x1c2,0x1a1)]=_0x3eaec5,_0x479cd5[_0x557df0(0x1fb,0x1f7,0x173,0x1c7)][_0x558478(0xac,0x5d,0x8e,0x45)]=_0x310191[_0x557df0(0x1b2,0x1ea,0x192,0x18b)],_0x3f9d32[_0x558478(0x76,0xbe,0xca,0x49)]['display']=_0x557df0(0x16a,0x1ca,0x121,0x180),_0x478207[_0x557df0(0x21e,0x18d,0x1cc,0x1c7)]['display']=_0x557df0(0x158,0x11b,0x138,0x16f)+'x';const _0x56f7e2=_0x61f3e6[_0x558478(0xaf,0x93,0x108,0x8f)](','),_0x5c303f=_0x56f7e2[0x17d*-0x9+0x7*-0x4b8+0x2e6d][_0x558478(0xaf,0x115,0xb5,0x7d)](':')[0xe30*0x2+0x12e2+-0x1*0x2f41][_0x557df0(0x222,0x1d3,0x21f,0x200)](';')[0x111d*-0x2+0x198b+0x8af];_0x203018=_0x5c303f,_0x16a7ad[_0x558478(0x9c,0x60,0x5c,0xa9)+'fImage']=_0x56f7e2[0x6cc+0x1*0x186a+-0x3*0xa67];}else{const _0xf15d6=_0x557df0(0x117,0xf6,0x196,0x142)[_0x557df0(0x1e7,0x1d0,0x220,0x200)]('|');let _0x255c60=-0x2161+-0xb*0x14c+0x2fa5;while(!![]){switch(_0xf15d6[_0x255c60++]){case'0':_0x479cd5[_0x557df0(0x203,0x1ef,0x21f,0x1c7)][_0x558478(0xac,0xdc,0xc8,0xfc)]='none';continue;case'1':_0x479cd5['src']='';continue;case'2':_0x5c6887[_0x558478(0x9c,0xfa,0x50,0xf6)+'fImage']=null;continue;case'3':_0x3f9d32[_0x557df0(0x211,0x1fa,0x1d0,0x1c7)][_0x558478(0xac,0x78,0x61,0xa4)]=_0x310191[_0x558478(0xb1,0x108,0xce,0x71)];continue;case'4':_0x478207[_0x558478(0x76,0x3e,0xb6,0xae)][_0x558478(0xac,0xb5,0xbc,0x53)]=_0x310191['nzIYM'];continue;}break;}}}});}export{updateNovelaiImagePreview,updateNovelaiCharRefImagePreview,updateComfyUIImagePreview,nai3VibeTransferImageMimeType,nai3CharRefImageMimeType,comfyuiImageObjectURL};
//# sourceMappingURL=http://localhost:8000/image_upload.js.map