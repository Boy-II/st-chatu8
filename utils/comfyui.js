(function(_0x244121,_0x4ed588){const _0x1d00c2=_0x244121();function _0x120549(_0x1e83bb,_0x41f81d,_0x2af315,_0x1384ec){return _0x16a1(_0x1384ec-0x2cf,_0x1e83bb);}function _0x34ef27(_0x2ce602,_0xd6ad7f,_0x55e5e8,_0x2733ca){return _0x16a1(_0x2733ca- -0x3a1,_0xd6ad7f);}while(!![]){try{const _0x41e362=parseInt(_0x120549(0x452,0x559,0x4cd,0x4d2))/(-0x1a57+0x1864+-0xa*-0x32)+-parseInt(_0x34ef27(-0x13b,-0x13d,-0x1a0,-0x1d6))/(-0x5e*0x14+0x10*-0x24a+0x15fd*0x2)*(-parseInt(_0x34ef27(-0xc9,-0x105,-0xc4,-0x14c))/(0xef5*-0x1+-0x194+0x2c2*0x6))+-parseInt(_0x34ef27(-0x1e7,-0x287,-0x21d,-0x1f0))/(-0x2131+0x2e5+0x1e50)*(parseInt(_0x34ef27(-0x115,-0xea,-0x101,-0xfb))/(0x2*0xbe3+0x79*0x21+0x3*-0xd1e))+-parseInt(_0x120549(0x59e,0x56d,0x5a4,0x579))/(0x9ac+-0x4*0x558+0x5dd*0x2)+-parseInt(_0x120549(0x496,0x4a7,0x599,0x51e))/(0x2*0xdc9+-0x1*0x1d9f+0x214)*(parseInt(_0x120549(0x54d,0x537,0x578,0x536))/(-0x11e4+-0x1c6f+0x2e5b))+parseInt(_0x34ef27(-0x1ae,-0x241,-0x1b2,-0x1f5))/(-0x427*0x7+-0x186c+0x11*0x326)+parseInt(_0x34ef27(-0x168,-0x91,-0x79,-0x118))/(-0x2552+0x2606+0x55*-0x2)*(parseInt(_0x34ef27(-0x224,-0x176,-0x14f,-0x1b8))/(-0x4*-0x2f+0x4cb*-0x1+0x41a));if(_0x41e362===_0x4ed588)break;else _0x1d00c2['push'](_0x1d00c2['shift']());}catch(_0x223e6e){_0x1d00c2['push'](_0x1d00c2['shift']());}}}(_0x4b7d,-0x1c5c5+-0x38ba8+0x7ffbb));const _0x566f17=(function(){let _0x4edb5b=!![];return function(_0x323e0d,_0x3daf15){const _0x52ed66=_0x4edb5b?function(){if(_0x3daf15){const _0x189539=_0x3daf15['apply'](_0x323e0d,arguments);return _0x3daf15=null,_0x189539;}}:function(){};return _0x4edb5b=![],_0x52ed66;};}()),_0x136d86=_0x566f17(this,function(){const _0x2a6d45={};_0x2a6d45[_0x51832c(0x5b3,0x5aa,0x50e,0x61f)]=_0x51832c(0x560,0x573,0x541,0x5e9)+'+$';function _0x51832c(_0x380412,_0x4425ac,_0x35d686,_0x143b2f){return _0x16a1(_0x4425ac-0x312,_0x143b2f);}const _0x1d9b51=_0x2a6d45;function _0x343238(_0x541dfc,_0x5da464,_0x28be04,_0x2da2dc){return _0x16a1(_0x28be04-0x1c7,_0x2da2dc);}return _0x136d86[_0x51832c(0x5b6,0x5d7,0x606,0x58d)]()[_0x343238(0x3fd,0x38b,0x37e,0x369)](_0x1d9b51['MDCqo'])[_0x51832c(0x61b,0x5d7,0x5a2,0x5a1)]()['constructo'+'r'](_0x136d86)[_0x51832c(0x51a,0x4c9,0x443,0x475)](_0x1d9b51[_0x343238(0x4c6,0x4e8,0x45f,0x4e1)]);});_0x136d86();import{sleep,generateRandomSeed,zhengmian,fumian,getRequestHeaders,prompt_replace,addLog,clearLog,parsePromptStringWithCoordinates,prompt_replace_for_character}from'./utils.js';import{extension_settings}from'../../../../extensions.js';import{extensionName,EventType}from'./config.js';import{setItemImg}from'./database.js';import{saveChatDebounced,saveSettingsDebounced,eventSource}from'../../../../../script.js';import{initializeImageProcessing}from'./iframe.js';async function replacepro(_0x391751,_0x55a72f){const _0x53e8b4={'yeQBm':_0x5a8a31(0x3c,0xbb,0x10f,0xd2)+_0x5a8a31(0x1c7,0x15e,0x1b6,0x1b4)+_0x5a8a31(0xce,0x9c,0x11a,0xf3)+_0x3c9066(0x630,0x5f8,0x6b7,0x6c6)+_0x3c9066(0x63d,0x5ff,0x5bc,0x697),'PhEwy':_0x5a8a31(0x19d,0x11d,0x18d,0x1a3),'vUBPg':function(_0x672303,_0x14028a){return _0x672303(_0x14028a);},'HRKYi':_0x5a8a31(0x131,0x162,0x205,0x155),'ylAOQ':_0x5a8a31(0xaa,0x113,0x113,0xed)+'ankaotupia'+'n%\x22','vLKVS':function(_0x93c9b7,_0x510ac8){return _0x93c9b7+_0x510ac8;},'YNeVn':'\x22%prompt%\x22','TCXLp':'\x22%c_xijie%'+'\x22','uZkOB':'\x22%schedule'+_0x5a8a31(0xe3,0x101,0x14a,0xbf),'uLZnw':function(_0x507899,_0x41db18){return _0x507899+_0x41db18;},'dPagi':_0x5a8a31(0xe4,0x58,0x9c,-0x31),'YyeDN':_0x5a8a31(0x91,0x100,0x67,0xb0)+'%\x22','NSlSJ':'\x22%vae%\x22','ysyDC':function(_0x576a1c,_0x15fa0c){return _0x576a1c+_0x15fa0c;},'gRWeW':_0x3c9066(0x5b7,0x587,0x5f9,0x655)+_0x5a8a31(0x16b,0x13d,0x155,0xca),'BlyCO':function(_0x548bfb,_0xc0985e){return _0x548bfb+_0xc0985e;},'nLWya':_0x5a8a31(0x12f,0x190,0x1e2,0x1a7)+_0x5a8a31(0x15f,0xc0,0x150,0xd1),'hYgOM':_0x5a8a31(0xf1,0x92,0xa6,0x4)+_0x5a8a31(0x227,0x18a,0x19f,0x144),'MXckz':_0x5a8a31(0x113,0x171,0xe4,0x128),'UvjWk':function(_0x1bdce6,_0x11b96a){return _0x1bdce6(_0x11b96a);},'PKkHK':_0x5a8a31(0x48,0xca,0xfe,0x166)+_0x3c9066(0x5dc,0x55a,0x5d2,0x5e5),'Vfeou':_0x3c9066(0x5de,0x652,0x5bb,0x58d)};function _0x5a8a31(_0x1e0a7e,_0x76bcd6,_0x5650ae,_0x5ad713){return _0x16a1(_0x76bcd6- -0x140,_0x1e0a7e);}function _0x3c9066(_0xb85e68,_0xeab989,_0x400ad3,_0x143066){return _0x16a1(_0xb85e68-0x3af,_0xeab989);}const _0x4e2aa6=_0x53e8b4['yeQBm'][_0x5a8a31(0x101,0x122,0x18b,0x159)]('|');let _0x2d4d13=-0xf*-0x40+-0x10+-0x3b0;while(!![]){switch(_0x4e2aa6[_0x2d4d13++]){case'0':_0x55a72f=_0x55a72f[_0x3c9066(0x667,0x6dc,0x6f0,0x6c3)](_0x53e8b4['PhEwy'],_0x53e8b4[_0x3c9066(0x580,0x5c5,0x58d,0x5e3)](Number,_0x391751[_0x3c9066(0x63a,0x658,0x6bc,0x65a)]));continue;case'1':_0x55a72f=_0x55a72f[_0x5a8a31(0x176,0x178,0xd6,0x1ad)](_0x53e8b4['HRKYi'],_0x53e8b4[_0x3c9066(0x580,0x5a8,0x5da,0x5f3)](Number,_0x391751[_0x3c9066(0x55d,0x540,0x5f7,0x5ce)]));continue;case'2':_0x55a72f=_0x55a72f['replaceAll'](_0x53e8b4[_0x3c9066(0x5a3,0x595,0x527,0x502)],''+_0x53e8b4['vLKVS']('\x22'+_0x391751[_0x5a8a31(0xf3,0x81,-0x1b,0xed)+_0x3c9066(0x597,0x61f,0x578,0x597)],'\x22'));continue;case'3':_0x55a72f=_0x55a72f['replaceAll'](_0x53e8b4[_0x5a8a31(0x200,0x17e,0x1aa,0x1ca)],''+(_0x53e8b4[_0x5a8a31(0xbe,0x14f,0x13e,0x12b)]('\x22',_0x391751[_0x5a8a31(0x210,0x182,0x171,0x207)])+'\x22'));continue;case'4':_0x55a72f=_0x55a72f[_0x3c9066(0x667,0x5f0,0x5f2,0x5e7)](_0x53e8b4[_0x3c9066(0x670,0x5d7,0x5fa,0x663)],_0x53e8b4[_0x3c9066(0x580,0x5a5,0x590,0x567)](Number,_0x391751[_0x3c9066(0x5f3,0x5fa,0x5f0,0x678)]));continue;case'5':_0x55a72f=_0x55a72f[_0x3c9066(0x667,0x6e0,0x6b6,0x63b)](_0x53e8b4[_0x3c9066(0x625,0x590,0x5b4,0x5ca)],''+(_0x53e8b4[_0x3c9066(0x5e7,0x59e,0x603,0x599)]('\x22',_0x391751[_0x3c9066(0x5d8,0x545,0x563,0x5ef)])+'\x22'));continue;case'6':_0x55a72f=_0x55a72f[_0x3c9066(0x667,0x6f6,0x609,0x687)](_0x53e8b4[_0x3c9066(0x54a,0x5eb,0x5de,0x511)],_0x53e8b4[_0x5a8a31(0x107,0x91,0x59,0xce)](Number,_0x391751[_0x5a8a31(0x180,0xe3,0xe5,0xa2)]));continue;case'7':_0x55a72f=_0x55a72f[_0x5a8a31(0x20d,0x178,0x17e,0x18f)](_0x53e8b4['YyeDN'],_0x53e8b4[_0x3c9066(0x580,0x60a,0x4e4,0x560)](Number,_0x391751[_0x3c9066(0x56b,0x4fd,0x60d,0x526)]));continue;case'8':_0x55a72f=_0x55a72f[_0x3c9066(0x667,0x683,0x609,0x6e8)](_0x53e8b4[_0x3c9066(0x668,0x5da,0x63c,0x62e)],''+_0x53e8b4[_0x3c9066(0x5e7,0x650,0x577,0x67a)](_0x53e8b4[_0x5a8a31(0x158,0xd5,0x117,0xc7)]('\x22',_0x391751[_0x3c9066(0x64e,0x624,0x691,0x6e4)]),'\x22'));continue;case'9':return _0x55a72f;case'10':_0x55a72f=_0x55a72f['replaceAll'](_0x53e8b4[_0x3c9066(0x60e,0x5d1,0x58b,0x5ea)],''+_0x53e8b4[_0x5a8a31(0x13d,0x124,0x141,0x109)](_0x53e8b4['ysyDC']('\x22',_0x391751[_0x5a8a31(0xd6,0xb2,0x18,0x10e)+_0x5a8a31(0xd3,0x110,0x9d,0x190)]),'\x22'));continue;case'11':_0x55a72f=_0x55a72f[_0x5a8a31(0x1c0,0x178,0x13d,0x1e2)]('\x22%sampler_'+_0x3c9066(0x553,0x4e7,0x4fa,0x547),''+(_0x53e8b4[_0x5a8a31(0x58,0xd5,0xd7,0x114)]('\x22',_0x391751['sampler_na'+'me'])+'\x22'));continue;case'12':_0x55a72f=_0x55a72f[_0x5a8a31(0x18a,0x178,0x1d6,0x105)](_0x5a8a31(0x98,0x135,0x197,0xdb)+_0x3c9066(0x573,0x5d1,0x4e1,0x4e0),Number(_0x391751[_0x3c9066(0x645,0x609,0x5c1,0x6c9)]));continue;case'13':console[_0x5a8a31(0x42,0x76,0x0,0x10)]('payload222',_0x391751);continue;case'14':console[_0x5a8a31(0x110,0x76,0x10e,0x93)](_0x55a72f);continue;case'15':_0x55a72f=_0x55a72f[_0x3c9066(0x667,0x698,0x5f5,0x706)](_0x53e8b4[_0x5a8a31(0x122,0x11c,0xa5,0x122)],Number(_0x391751[_0x3c9066(0x63c,0x5fc,0x66d,0x6c6)+'g']));continue;case'16':_0x55a72f=_0x55a72f[_0x3c9066(0x667,0x65b,0x5e4,0x683)](_0x53e8b4['hYgOM'],'\x22'+_0x391751[_0x5a8a31(-0x27,0x4c,0x9c,-0x12)]+'\x22');continue;case'17':_0x55a72f=_0x55a72f[_0x3c9066(0x667,0x5cd,0x680,0x5d5)](_0x53e8b4[_0x3c9066(0x543,0x588,0x5b7,0x4d1)],_0x53e8b4[_0x3c9066(0x589,0x52f,0x601,0x614)](Number,_0x391751['width']));continue;case'18':_0x55a72f=_0x55a72f['replaceAll'](_0x53e8b4[_0x5a8a31(0x1ae,0x153,0x152,0x10a)],_0x53e8b4['vUBPg'](Number,_0x391751[_0x3c9066(0x661,0x63b,0x6b1,0x6c2)+_0x3c9066(0x5bf,0x627,0x52f,0x54c)]));continue;case'19':_0x55a72f=_0x55a72f[_0x3c9066(0x667,0x64a,0x694,0x64c)](_0x53e8b4[_0x3c9066(0x5cf,0x61f,0x548,0x57f)],''+_0x53e8b4[_0x5a8a31(0x15e,0x14f,0x170,0xfb)]('\x22'+_0x391751[_0x5a8a31(0x9b,0x7d,0xf4,0x17)],'\x22'));continue;}break;}}function _0x4b7d(){const _0x1613ff=['ifbYB21WDa','vunqx2nVBwz5Dq','BMfTzsuI','y29TzNL1Aq','B3iGChjVBxb0oG','l3bYB21WDa','qvbjioIVT+AXGUwKSEI0PsaO','zxj0Eq','rw5xtfq','phDSCJO','mJiZotm0neLerM9YuG','wvnbEhG','C3rLChm','vePAA0y','BuH2wxC','nZG0z0LbEgnb','BgvUz3rO','A3rOyKS','5Ps25yIW55sF5zU+6k+35RgcicHjra','55sF5zU+5Rwb56Il5O2v6i635yIW5BYc5BI4ia','Bg9N','C2vHCMnO','vgrQrvu','Bwz5l2DLBMvYyq','suLSreK','wNDqCw8','y19Mzw53zwK','AxbH','zci6iG','cUENJEwTKdOG','rw5KCg9PBNqGza','y29TzNL1AwnHBG','tKzeqwW','ANnVBG','zsuI','AwLnyxu','r01hzLu','ssdNMOtMNidNU4GGCgf5Ba','EgLHBMnOzw5N','lNnHzMv0zw5ZBW','DxjUigLTywDLia','mtyZodz6ruTdrxm','5Q2J6z2I5O+q56s66k+noIa','BwvZC2fNzq','EgHUwe8','CMf0Aw5NigLTyq','DNvNDui','DLvcugC','iIvnt0rftf9oqq','CxvLC3qGzMfPBa','u09ptuO','CMvTB3zLtgLZDa','ww5jzgm','thLewe8','zw1PDa','AfDdvue','vxzQv2S','ANbYvNO','Fdn8mtz8mtv8mq','y29TzNL1Av9Zzq','Cgzjtg0','ksaTifbYB21WDa','5lQl5lU255Ur5zcS5zMO5BEY5yID5AEl5yYw44cc','y29TzNL1AxnHBq','v1f5uNC','BMfTzt0','rMrIA1O','6k+noIa','yxbWBgLJyxrPBW','ntmZzwyZytmTmW','A2fVDhvWAwfU','mZqXtgvdANLQ','5zU+5yop5BEY5A2y5ywL5PwW5O2U5BQtigy','s0nUre8','cUATPEAvSdOG','Ee1UrfO','vhPNBgK','tLnf','ExvZAgu','tKDzzxe','BMvNyxrPDMvFCa','uKvvzhu','EwXbt1e','C1bvD00','CMvWBgfJzq','Aw1Hz2veyxrH','zwq6ia','v2HeD20','tMvhvMO','mtn8mhWXFdeYFa','C2fTCgXLCL9Uyq','rxjYB3iGz2vUzq','wMjstue','ufjJuMG','B25Njsi','54Mh5PwW5O2UicHQAxvNDq','z2ndvvK','mte0otKYDvbju0L4','6k+35Rgc5Bc65A+4oIdLRR3LUQyGlq','cUwWUUwVUdOG','5lIT55QeihbYB21WDooaGG','kerPDMLKzv9YBW','iIvUzwDHDgL2zq','r0vorvjbvevFsq','iIvJx2LKCxvHBG','5lQl5lU255Ur5zcS5zMO5BEY5ywZ6zET44cc','rwLSz20','suq6ia','sgLZDg9YEsbYzq','Dg9Rzw4','B25N','Cg5N','vu1jANG','ELfhzxy','y29TzNL1Av9ZDa','Exn5rem','zMLSzw5HBwu','ue9tva','6lsF6z2I5O+q56s66k+noIa','5PIV5zcM5zcV55sO5yIg6kEs6iMY5QIH5BYpia','5y+r6ycb55sF5zU+5AsX6lsL5zon5BQuicG','y2HHBMDL','q29TzNL1AuXPCW','yvHOEKe','DhjPBq','BgvZktOG','vMzLB3u','6l2U6k+I6lAf5PE277Ym5PYn5yQH5zMO5y+V6io9','uwvQzwW','AgvPz2H0','zgf0ys4','yxbWBhK','vMXIzeG','AML1z3vHBG','CLjjC2i','C2nOzwr1BgvY','wNDhquC','y2vKltm3zdi5ma','Chbru00','EMHVBMCLiG','EeTcDKi','iIvPCgeLiG','vNLAqxG','B25LCNjVCG','B21WDa','uNPws0y','AeP2u2y','yNDVuxO','B3nPDgLVBG','zgf0ytPPBwfNzq','DuXABNC','ktOG','DwH0shu','l3zPzxC/zMLSzq','pgXVCMe6','z2u6','wgvICxC','wKDqz0S','iIvJx2zLBNDLAq','CIuI','Derzv3q','y29TzNL1Av92yq','y194AwPPzq','5zU+5yop5BEY5OIq5yQF6i635y+w5BM25Qc85BYp','5PYQ6io95lUoqvbj5zon5BQu5lIT5OM+','DwKP44cc','jNr5Cgu9B3v0Ca','q29TzNLvssdMNi3LIQe','D0Hdy2i','y2XPzw50','r3LAwNu','AgvKDwXLCG','tKDvtge','mJmWodqZoxnJruDWtW','CM9TChq','lcdOR6BMG4u6ia','vhrIu3K','iIvJB21MExvPyW','CMvJDcbJB21MEq','nKnSBxfIrq','B25SB2fKzw5K','C3rHDhvZ','vu5ry2q','tvPXqxm','BNqP44cc','z2XPBu8','BKXxEwe','iIvZzwvKjsi','6k+35Rgc5AsX6lsLloEkTUAaGEEGGtOG','z1jxzvC','55sO5lQo55sF5OIq55QevgfNoIa','kcGOlISPkYKRkq','C3bSAxq','6zsz6k+VoIa','qMX5q08','cI0Tls0Tls0Tlq','Aw5PDgLHBgL6zq','oeDoBgrKtG','z2f0tw0','AgfZt3DUuhjVCa','AvLNqNO','BMvNyxrPDMvqCG','5zMO6lAf5PE244cc','v1P2sM0','owmWltrLmZKToq','ExvZAgvPzf9JBW','CNm6','6l2U6k+I5PE25y+r55sF5BYc5BI4oIa','zhjNzgq','B3jdDNC','oJe+','iIvJzMDFC2nHBa','DvPRt0i','5zgkic0TlqRMRApPNAlMJ5dNPlO','uxHdDNq','57Yt5A2y6k6+572U5lI65lIn5A2y5ywL5PwW5O2U','tufhrv9srvnqtW','wxnXDue','o2jHC2u2ncW','x3bYB21WDcuI','6l2U6k+I5y6g5y+Y6k6W5B2v5PE25yE66zszoG','vfPsy0u','cUMhH+AGT+wzQdOG','ohW0FdD8mNWXoq','5BYa5AElienVBwz5vuK','6k+VoIa','q0nbsu0','sMPfrvy','y2fJAgu','ufrKvKq','zgf0yq','mtqWmdiWrxzVCvbc','Bhfgte4','C2vLza','CgfYC2u','y19XDwfUEMHVBG','Fdv8ohWXnhW5','DKXlvLm','qvfux2nVBwz5Dq','AwvUDcK6ia','q29UDgvUDc1uEq','ueTRseS','tufhrv9srvfvrq','5z2q5Qch55Qe5O+q56s66k+n5A2x56YM5lIY44cc','y2zNx3nJywXL','Dw5PqwO','turdCw8','AMrIzge','cLzbrtOG','ChjVBxb0x2LK','rvvnEgG','AwqGBM90ihjLDa','mtf8mtD8nNWXma','DMfL','vwTws3a','BvrYCwq','iIvZDgvWCYuI','5zU+54Mh55sF5OIq6l+h56Il5lIT5y+r55sF6zsz','vuTbB0m','zty0ioAvSoAnRUwKHoEqHUoaGG','nJm4nu1Pu0zmAq','DgvUzxi','q0nXqwm','ls0Tls0Tls0Tlq','mZuWotu4rM1eALDx','DxjS','C3vJy2vZCW','zw5LCG','zxbZ','5yYw5lI6igrHDgeGvvi','CLnLv2C','iIv3Awr0AcuI','y19Pzhf1yw56Aa','DuTMEha','5zU+54Mh55sF5OIq5OIq5yQFicHKAq','CgXLCK5HBwu','BhHqwM4','zhLmq0u','CMvWBgfJzufSBa','tLnSu0O','y29TzNL1Av93Aq','EuTcrwK','q2HHCMfJDgvYia','5y+r6ycb55sF5zU+5OIq5yQF5zon5BQuicG','wu5LvM4','we1tq04','yNjyCNu','venytha','ChjVBxb0','vMrTsKm','CMvZDwX0','Dg9tDhjPBMC','C0rMCum','u2PWtM0','r0X2D20','Aw1Hz2vZ','tuuLiG','Aw5JBhvKzxm','l2HPC3rVCNKV','5BEY5PAT5BYa6l+E5O6L44cc','zM9YBwf0','DfjiAMm','iIvJx3f1yw56Aa','Dgv4Da','tu9eruXFtKfnrq','5QIH5z6l44cc','Dej5C20','surjyvO','y29TzNL1AvvYBa','AejZyMO','D29YA2vY','6l+E5O6L5zco6ycj5OUP','tvHJA3O','Df9LBMq','rNfes2i','zgLYzwn0ignVBq','iIvOzwLNAhqLiG','cI0TlsdNLj/LM77LJ4lMLBdMIQu','zxjYB3i','zfbHz2K','vvjm','z1b3y0i','cUI0N+MDOUApKoEKUUIVJtOG','r25WD1m','keLeoIa','Bwz5DwK'];_0x4b7d=function(){return _0x1613ff;};return _0x4b7d();}function _0x16a1(_0x5199c3,_0x26056e){const _0x4a137b=_0x4b7d();return _0x16a1=function(_0x4748c9,_0x3050ad){_0x4748c9=_0x4748c9-(-0x38f*0x2+0x7a*-0x2d+0x1e1c);let _0x364575=_0x4a137b[_0x4748c9];if(_0x16a1['IzHLtc']===undefined){var _0x43a70a=function(_0x1e34de){const _0x37e216='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x42637d='',_0x594c2c='',_0x2d1ab5=_0x42637d+_0x43a70a;for(let _0x212371=0x1*-0x158f+-0x1dcf*0x1+0x335e*0x1,_0x385f04,_0x505ec6,_0x9142c6=0x6*0x380+-0x5*0x419+-0x83;_0x505ec6=_0x1e34de['charAt'](_0x9142c6++);~_0x505ec6&&(_0x385f04=_0x212371%(0x2080+0x905+-0x1a9*0x19)?_0x385f04*(0xb3e+-0x263c+0x2*0xd9f)+_0x505ec6:_0x505ec6,_0x212371++%(-0x80e*0x2+-0x21bd+0x6f*0x73))?_0x42637d+=_0x2d1ab5['charCodeAt'](_0x9142c6+(-0x55d*0x6+-0x215e*0x1+0x4196))-(-0x657*0x2+0x13b+0xb7d)!==-0x33c+0x257*0x9+-0x11d3?String['fromCharCode'](0x32d*-0x7+0xc55*-0x1+0x1*0x238f&_0x385f04>>(-(-0x11b3+-0x213b+0x32f0)*_0x212371&0x7df*-0x2+-0x1*0xb17+0x5*0x55f)):_0x212371:-0x12f6+0xb9e+0x758){_0x505ec6=_0x37e216['indexOf'](_0x505ec6);}for(let _0x3d6924=-0x1fcf+0x135d+0xc72,_0x176dcb=_0x42637d['length'];_0x3d6924<_0x176dcb;_0x3d6924++){_0x594c2c+='%'+('00'+_0x42637d['charCodeAt'](_0x3d6924)['toString'](0x104e+0x1*-0x17ef+0x7b1))['slice'](-(-0x7e8+0x1c61+0xd*-0x193));}return decodeURIComponent(_0x594c2c);};_0x16a1['PGjIzv']=_0x43a70a,_0x5199c3=arguments,_0x16a1['IzHLtc']=!![];}const _0x1f55e3=_0x4a137b[0x6cf+0x4*-0x4dc+0xca1],_0x41d5fe=_0x4748c9+_0x1f55e3,_0x227ecc=_0x5199c3[_0x41d5fe];if(!_0x227ecc){const _0xd8e4af=function(_0x2f9648){this['LPBFzg']=_0x2f9648,this['FzrYaG']=[0x155e+0x107b+-0x25d8,0x17ed+-0x257*0x7+-0x78c,-0x1650+-0xd31+0x2381],this['yPnoHn']=function(){return'newState';},this['TSYvXl']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['BoZtDt']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0xd8e4af['prototype']['NLBRnS']=function(){const _0x333cf7=new RegExp(this['TSYvXl']+this['BoZtDt']),_0x402b33=_0x333cf7['test'](this['yPnoHn']['toString']())?--this['FzrYaG'][0xc3*-0x17+-0x1d62+0x1*0x2ee8]:--this['FzrYaG'][0x1*0x539+0x476+-0x9af];return this['IQlVMV'](_0x402b33);},_0xd8e4af['prototype']['IQlVMV']=function(_0x2f9c26){if(!Boolean(~_0x2f9c26))return _0x2f9c26;return this['bVGIYG'](this['LPBFzg']);},_0xd8e4af['prototype']['bVGIYG']=function(_0x3e7bee){for(let _0x21e4b1=0x1*0x182+-0x3cb*0x6+0x22*0xa0,_0x199b2c=this['FzrYaG']['length'];_0x21e4b1<_0x199b2c;_0x21e4b1++){this['FzrYaG']['push'](Math['round'](Math['random']())),_0x199b2c=this['FzrYaG']['length'];}return _0x3e7bee(this['FzrYaG'][-0x24f*-0x3+-0x158f+0xea2]);},new _0xd8e4af(_0x16a1)['NLBRnS'](),_0x364575=_0x16a1['PGjIzv'](_0x364575),_0x5199c3[_0x41d5fe]=_0x364575;}else _0x364575=_0x227ecc;return _0x364575;},_0x16a1(_0x5199c3,_0x26056e);}export async function generateComfyUIImage({prompt:_0xded1b0,width:_0x13e921,height:_0x23c353,change:_0x2ec846}){function _0x16c2e7(_0x3f4def,_0x98ed58,_0x524269,_0x154313){return _0x16a1(_0x524269- -0x39c,_0x3f4def);}const _0x4523e3={'GMGfU':function(_0x3846fc,_0x38b9a8){return _0x3846fc(_0x38b9a8);},'GLvwm':'分角色模式:\x20解析带'+_0x2d9ebd(0x6a5,0x6a0,0x671,0x66d),'VlbdH':function(_0x45c488,_0x57c0de){return _0x45c488(_0x57c0de);},'YSAxx':function(_0x5547fb,_0x340a85){return _0x5547fb<=_0x340a85;},'EnWLT':function(_0x11699e,_0x4ce785){return _0x11699e+_0x4ce785;},'gatMm':function(_0x5f25b6,_0x2b854f){return _0x5f25b6+_0x2b854f;},'tBysm':function(_0xc08651){return _0xc08651();},'uhtHu':function(_0x27a6e6){return _0x27a6e6();},'CCqAc':_0x2d9ebd(0x50a,0x56c,0x546,0x5a1)+'rs','Eilgm':function(_0x5f3f93,_0x386932){return _0x5f3f93!==_0x386932;},'XQNwc':'odRku','YnIdc':function(_0x224f90,_0x18e5bd){return _0x224f90>_0x18e5bd;},'NeGVj':function(_0x4a5813){return _0x4a5813();},'kthbK':_0x16c2e7(-0x1d3,-0x1c5,-0x160,-0x106),'iYgBz':'<wlr:','mISht':_0x2d9ebd(0x5d6,0x599,0x643,0x5d5)+_0x2d9ebd(0x552,0x54a,0x642,0x5a7)+_0x16c2e7(-0x106,-0x18e,-0x15f,-0x1d6),'ZwPqo':function(_0x16376d,_0x4b4cd8){return _0x16376d(_0x4b4cd8);},'hJvSf':function(_0x4ff031,_0x5d4cd9){return _0x4ff031>_0x5d4cd9;},'VdmJC':function(_0x3434cf,_0x368b8c){return _0x3434cf!==_0x368b8c;},'Xebqw':'ocLzP','GnpwS':function(_0x19c0ec,_0x337fb7){return _0x19c0ec+_0x337fb7;},'ZwGAG':function(_0x1aa18f,_0x57aaf9){return _0x1aa18f(_0x57aaf9);},'SjpNm':function(_0x17c33c,_0x5835f1){return _0x17c33c!==_0x5835f1;},'MZqAs':_0x16c2e7(-0x15f,-0x171,-0x1ab,-0x16c),'jprVz':_0x2d9ebd(0x587,0x68a,0x632,0x606),'ppQSM':function(_0x476dee,_0xee40ba){return _0x476dee(_0xee40ba);},'brXru':function(_0x5e9eca,_0x309cea){return _0x5e9eca||_0x309cea;},'rSeWg':_0x2d9ebd(0x512,0x53a,0x556,0x56b),'hWCUA':'gcCUY','yKBEi':'请填写ComfyUI'+'模型。','uniAj':'Scene\x20Comp'+_0x2d9ebd(0x61f,0x5e8,0x59e,0x60e),'TdjEU':function(_0x21d03e,_0x308c8c){return _0x21d03e(_0x308c8c);},'cSlyT':function(_0x261ca9,_0x381606){return _0x261ca9(_0x381606);},'PTdVD':function(_0x475afd,_0x43f00d){return _0x475afd(_0x43f00d);},'REUdu':'标准模式:\x20使用请求'+_0x2d9ebd(0x5d6,0x64b,0x658,0x5de),'wHCcb':function(_0x53ea5e,_0x1a068f){return _0x53ea5e<=_0x1a068f;},'mTrqd':function(_0xfdde4,_0x512c53){return _0xfdde4===_0x512c53;},'sRxcV':'hcCbw','QjCJV':function(_0x2ad922,_0x508a80){return _0x2ad922+_0x508a80;},'glimO':function(_0x150b14,_0x5039af){return _0x150b14(_0x5039af);},'JjEEV':function(_0x367226,_0x42e4b6,_0x29a84a,_0x1a9a64,_0x13d99b,_0x4fa5ee){return _0x367226(_0x42e4b6,_0x29a84a,_0x1a9a64,_0x13d99b,_0x4fa5ee);},'GyZZu':'全能提示词编辑器','NGULa':_0x2d9ebd(0x697,0x5fe,0x72c,0x69a),'JvXwe':function(_0x1f5419,_0x2886fd,_0x1a3181){return _0x1f5419(_0x2886fd,_0x1a3181);},'orCvw':function(_0x3dcaf2,_0x398417){return _0x3dcaf2===_0x398417;},'hBsbj':function(_0x8bb306,_0x524c10){return _0x8bb306(_0x524c10);},'zQGev':_0x2d9ebd(0x55e,0x52b,0x5f1,0x5bf)+_0x2d9ebd(0x698,0x5fa,0x5d1,0x646)+_0x2d9ebd(0x674,0x5d2,0x695,0x603)+'f371f8','SOOMJ':function(_0x5b7b44,_0x387cde,_0x1d7da1){return _0x5b7b44(_0x387cde,_0x1d7da1);},'bwoQz':function(_0x3608ed,_0x2ed4c9){return _0x3608ed(_0x2ed4c9);},'UKAoC':_0x16c2e7(-0x169,-0xef,-0x169,-0x10a),'lqFLN':'tXROQ','drgdd':function(_0x4d21b2,_0xb27012,_0x9c689f){return _0x4d21b2(_0xb27012,_0x9c689f);},'yyceK':'/api/sd/co'+_0x16c2e7(-0x176,-0x1f9,-0x1e3,-0x147)+'te','xMnDZ':_0x2d9ebd(0x689,0x582,0x572,0x5ef),'WZvJm':function(_0x50e781,_0x3e60e2){return _0x50e781(_0x3e60e2);},'dyLCE':'qJaeo','vJpFV':'API\x20响应中没有图'+_0x16c2e7(-0x167,-0xfb,-0x19b,-0x1a0)+'an\x20client)'+'。','YNRoU':_0x2d9ebd(0x5df,0x517,0x5ba,0x598)+_0x16c2e7(-0x118,-0xfc,-0xff,-0x17a)+_0x2d9ebd(0x588,0x5e2,0x5a5,0x5a2)+_0x2d9ebd(0x653,0x5f2,0x612,0x5fc),'rRIsb':function(_0x3b226c,_0x14fedb){return _0x3b226c(_0x14fedb);},'mHvYw':_0x2d9ebd(0x560,0x4e4,0x59a,0x57f),'tRHjc':function(_0x2563a7,_0xd3fe07){return _0x2563a7(_0xd3fe07);},'FdbkZ':_0x2d9ebd(0x64e,0x5cc,0x645,0x65c),'sPUwM':'response2','UkVKp':'yTbBT','oMaLF':_0x2d9ebd(0x63e,0x729,0x62c,0x68c)+_0x2d9ebd(0x633,0x674,0x609,0x62c)+_0x16c2e7(-0x1d5,-0x16e,-0x155,-0xdf),'FgHZk':_0x16c2e7(-0x141,-0x195,-0x156,-0xbd)+'到文件名。','iiMau':_0x2d9ebd(0x66d,0x63f,0x628,0x5f9)+_0x16c2e7(-0xf7,-0x122,-0xcf,-0x2d),'WhDwm':_0x2d9ebd(0x6a7,0x5c0,0x61a,0x621)+_0x16c2e7(-0xa4,-0xc0,-0x130,-0x16c),'jdbda':function(_0x460242,_0x46c845){return _0x460242!==_0x46c845;},'CIuVU':'IgFur','IDIaZ':'PLNuq','mLqWy':_0x2d9ebd(0x673,0x60d,0x672,0x61d)+_0x16c2e7(-0x181,-0x9f,-0xed,-0x60)+'L。','TtbSy':function(_0x29f40d,_0x60cc3e){return _0x29f40d||_0x60cc3e;},'ZbRMA':function(_0x573f36,_0x17d1a2){return _0x573f36(_0x17d1a2);}};_0x4523e3[_0x2d9ebd(0x698,0x609,0x618,0x612)](clearLog),_0x4523e3[_0x16c2e7(-0x187,-0x1b3,-0x170,-0x1e0)](addLog,_0x16c2e7(-0x19d,-0x12c,-0x11a,-0x14c)+'\x20生图流程。客户端为'+extension_settings[extensionName][_0x2d9ebd(0x6a9,0x5aa,0x582,0x623)]),_0x4523e3[_0x2d9ebd(0x61d,0x5c6,0x54c,0x593)](addLog,_0x2d9ebd(0x585,0x662,0x5d4,0x5dc)+'\x20'+_0x4523e3[_0x2d9ebd(0x61b,0x659,0x615,0x698)](_0x13e921,'默认')+',\x20高度\x20-\x20'+_0x4523e3['brXru'](_0x23c353,'默认'));if(extension_settings[extensionName][_0x16c2e7(-0x242,-0x1e9,-0x210,-0x231)][_0x16c2e7(-0x1a2,-0x123,-0x17e,-0xe2)]()===_0x4523e3[_0x16c2e7(-0xcc,-0xa0,-0xec,-0x94)]){if(_0x4523e3[_0x2d9ebd(0x713,0x6cb,0x614,0x69f)](_0x4523e3[_0x16c2e7(-0x185,-0x233,-0x1c3,-0x1ef)],_0x16c2e7(-0xfa,-0x152,-0x19a,-0x13a))){_0x4523e3[_0x2d9ebd(0x52e,0x5e7,0x51e,0x59e)](_0xca07c9,_0x4523e3[_0x2d9ebd(0x606,0x680,0x65b,0x6a0)]),_0x21b112=_0x4523e3['VlbdH'](_0x12fd66,_0xb9d9b2),_0x582864=_0x2f337a['Scene\x20Comp'+'osition'];for(let _0x5f0ec9=-0x3c8+0x231c+-0x1f53;_0x4523e3['YSAxx'](_0x5f0ec9,-0x25ec*0x1+0x233*0x7+0x168b);_0x5f0ec9++){_0x4c1e36['Character\x20'+_0x5f0ec9+_0x2d9ebd(0x5aa,0x4e6,0x587,0x57a)]&&(_0x49755a=_0x4523e3['EnWLT'](_0x4523e3[_0x16c2e7(-0x11b,-0xc3,-0x134,-0x99)](_0x96af2f,',\x20'),_0x453ded['Character\x20'+_0x5f0ec9+'\x20Prompt']));}}else{addLog('请填写ComfyUI'+_0x2d9ebd(0x4c7,0x4ec,0x59d,0x565)),toastr[_0x16c2e7(-0x1f5,-0x1cd,-0x202,-0x176)](_0x4523e3[_0x2d9ebd(0x6e2,0x65d,0x6e0,0x693)]);return;}}const _0x12573b=extension_settings[extensionName][_0x2d9ebd(0x58c,0x591,0x4d3,0x568)][_0x2d9ebd(0x620,0x614,0x573,0x5f6)](),_0x1a8ac7=_0x2ec846&&_0x2ec846[_0x16c2e7(-0x21c,-0x1e5,-0x17e,-0x199)]()!==''?_0x2ec846:_0xded1b0;_0x4523e3[_0x2d9ebd(0x663,0x666,0x65f,0x602)](addLog,_0x2d9ebd(0x6d6,0x668,0x697,0x638)+_0x1a8ac7);let _0xb0966b=![];_0x1a8ac7['includes'](_0x4523e3[_0x16c2e7(-0x138,-0x110,-0x105,-0x12b)])&&(_0xb0966b=!![]);_0x4523e3[_0x2d9ebd(0x536,0x5cb,0x621,0x590)](addLog,_0x16c2e7(-0x1b6,-0x17d,-0x183,-0x11d)+_0x2d9ebd(0x60e,0x647,0x665,0x5df)+_0x2d9ebd(0x564,0x60e,0x699,0x5f7)+_0xb0966b);let _0x7a84cb={},_0x53a78a='',_0x605a04='';if(_0xb0966b){_0x4523e3['cSlyT'](addLog,_0x4523e3[_0x2d9ebd(0x711,0x652,0x6cf,0x6a0)]),_0x7a84cb=_0x4523e3[_0x16c2e7(-0x198,-0xdb,-0x115,-0x80)](parsePromptStringWithCoordinates,_0x1a8ac7),_0x53a78a=_0x7a84cb[_0x4523e3[_0x2d9ebd(0x64e,0x5e1,0x63f,0x66f)]];for(let _0xfae388=0x9*-0x155+0x1537+-0x1*0x939;_0x4523e3[_0x2d9ebd(0x627,0x5dd,0x4e4,0x585)](_0xfae388,0x1d1a+-0x1*0x1594+0x1*-0x782);_0xfae388++){_0x7a84cb[_0x16c2e7(-0xf4,-0xe4,-0xe0,-0x175)+_0xfae388+'\x20Prompt']&&(_0x605a04=_0x4523e3[_0x2d9ebd(0x5d2,0x51e,0x610,0x582)](_0x4523e3[_0x16c2e7(-0x16a,-0x15a,-0x1fd,-0x1d3)](_0x605a04,',\x20'),_0x7a84cb['Character\x20'+_0xfae388+_0x2d9ebd(0x510,0x4fe,0x4ed,0x57a)]));}}else{if(_0x4523e3[_0x2d9ebd(0x61d,0x57a,0x551,0x5e4)](_0x16c2e7(-0x21f,-0xf5,-0x18a,-0x16c),_0x16c2e7(-0x1fc,-0x1ab,-0x19d,-0x20e)))addLog(_0x4523e3[_0x16c2e7(-0x1d9,-0x15a,-0x1a9,-0x13f)]),_0x53a78a=_0x1a8ac7;else return _0x2d9ebd(0x677,0x626,0x680,0x614)+_0x9809fd+(_0x2d9ebd(0x57e,0x537,0x634,0x5a1)+'rs:')+_0x409bf0+'>';}let {modifiedPrompt:_0x7951b,insertions:_0x183b5a}=await prompt_replace(_0x53a78a,_0x605a04);if(_0xb0966b)for(let _0x15a752=-0x4*-0x7bf+-0x1*0x14bc+-0xa3f;_0x4523e3[_0x16c2e7(-0x146,-0x1ca,-0x152,-0xd8)](_0x15a752,-0x1aca+0x156f+0x55f);_0x15a752++){_0x7a84cb[_0x16c2e7(-0x10f,-0x90,-0xe0,-0x47)+_0x15a752+_0x16c2e7(-0x184,-0x181,-0x1fa,-0x213)]&&(_0x4523e3[_0x2d9ebd(0x70c,0x671,0x6f6,0x679)](_0x4523e3['sRxcV'],_0x16c2e7(-0x145,-0x255,-0x1c5,-0x1f0))?(!_0x3f0ff9['initialize'+_0x2d9ebd(0x65b,0x63a,0x589,0x5f4)+_0x2d9ebd(0x6f6,0x715,0x60e,0x67f)]&&(_0x23b0bd[_0x16c2e7(-0x175,-0x99,-0x136,-0x9d)+_0x2d9ebd(0x5de,0x61d,0x5c5,0x5f4)+'tener']=!![],_0x4523e3[_0x2d9ebd(0x56b,0x5d9,0x5f7,0x566)](_0x20791c)),_0x4523e3[_0x16c2e7(-0x1df,-0x115,-0x162,-0x1f2)](_0x5cbf09)):_0x7951b=_0x4523e3[_0x2d9ebd(0x634,0x6cd,0x6c8,0x640)](_0x4523e3['QjCJV'](_0x7951b,',\x20'),_0x4523e3[_0x2d9ebd(0x69f,0x6c4,0x631,0x633)](prompt_replace_for_character,_0x7a84cb[_0x16c2e7(-0x145,-0x114,-0xe0,-0xa2)+_0x15a752+_0x2d9ebd(0x4d7,0x51c,0x5f3,0x57a)])));}let _0x54c09a=await _0x4523e3[_0x2d9ebd(0x67b,0x67d,0x6db,0x65d)](zhengmian,extension_settings[extensionName][_0x16c2e7(-0x1f0,-0x1fb,-0x1ac,-0x10f)][extension_settings[extensionName][_0x16c2e7(-0x10d,-0x110,-0x12d,-0x141)+_0x2d9ebd(0x53e,0x50d,0x5c6,0x579)]]['fixedPromp'+'t'],_0x7951b,extension_settings[extensionName][_0x2d9ebd(0x574,0x5a4,0x579,0x5c8)][extension_settings[extensionName][_0x16c2e7(-0x176,-0x131,-0x12d,-0x1b0)+_0x2d9ebd(0x4f3,0x606,0x4f9,0x579)]]['fixedPromp'+_0x2d9ebd(0x5a4,0x4db,0x57e,0x56d)],extension_settings[extensionName][_0x2d9ebd(0x5dd,0x6bf,0x65a,0x668)+'i'],_0x183b5a);_0x54c09a=_0x4523e3[_0x16c2e7(-0x182,-0x179,-0x170,-0x134)](_0x2aa81a,_0x54c09a);function _0x2aa81a(_0x223eac){const _0x1ba71a={'tDYWt':_0x4523e3[_0x2e87d(0x3f7,0x31b,0x387,0x416)],'YsquA':function(_0x32825f,_0x11825c){return _0x4523e3['Eilgm'](_0x32825f,_0x11825c);},'VyZAx':_0x4523e3['XQNwc']},_0x5ef85c=/<lora:([^:]+)(?:\.safetensors)?:([^>]+)(?::1)?>/g;function _0x2e87d(_0x297f3f,_0x560f11,_0x23c124,_0x3c9f2a){return _0x16c2e7(_0x297f3f,_0x560f11-0xcf,_0x23c124-0x47b,_0x3c9f2a-0x1ef);}return _0x223eac['replace'](_0x5ef85c,(_0x2f1ead,_0x5679b6,_0x280117)=>{if(_0x2f1ead[_0x36dcb2(0x424,0x4c0,0x418,0x466)](_0x1ba71a[_0x36dcb2(0x39b,0x394,0x3bd,0x303)])){if(_0x1ba71a[_0x36dcb2(0x3d4,0x390,0x413,0x468)](_0x1ba71a[_0x36dcb2(0x389,0x3b6,0x3c2,0x3eb)],_0x1ba71a[_0x3913c8(-0x127,-0x171,-0x1a1,-0x178)])){const _0x2feb7f=_0x956c58[_0x36dcb2(0x3e5,0x451,0x3a2,0x3e8)](_0xb44268);_0x47f5c6=_0x2feb7f[_0x3913c8(-0x92,-0x14f,-0x103,-0x11f)],_0x1dbc9d=_0x2feb7f['data'];}else return _0x2f1ead;}if(_0x280117['includes'](':'))return'<lora:'+_0x5679b6+(_0x3913c8(-0x168,-0x230,-0x208,-0x214)+_0x3913c8(-0x130,-0x14f,-0x161,-0x102))+_0x280117+'>';function _0x36dcb2(_0x1ad7e8,_0x2f5146,_0x5b0698,_0x13d54d){return _0x2e87d(_0x5b0698,_0x2f5146-0x93,_0x1ad7e8-0x7a,_0x13d54d-0xa4);}function _0x3913c8(_0x3950ef,_0x1f9732,_0x27e74c,_0x7db5d7){return _0x2e87d(_0x3950ef,_0x1f9732-0x5d,_0x27e74c- -0x4b0,_0x7db5d7-0xea);}return _0x36dcb2(0x395,0x416,0x40e,0x309)+_0x5679b6+(_0x36dcb2(0x322,0x318,0x372,0x2a1)+_0x3913c8(-0x1e5,-0xd7,-0x161,-0x12f))+_0x280117+_0x36dcb2(0x3cd,0x3a5,0x3b2,0x390);});}extension_settings[extensionName][_0x16c2e7(-0x23b,-0x1df,-0x20a,-0x182)][_0x2d9ebd(0x6ef,0x6d8,0x626,0x6a3)](_0x4523e3['GyZZu'])&&(_0x54c09a=_0x54c09a['replaceAll'](_0x4523e3[_0x16c2e7(-0x1ab,-0x17c,-0x1e9,-0x194)],_0x16c2e7(-0x16c,-0x154,-0x1f1,-0x1a3)),_0x54c09a=_0x54c09a['replaceAll'](_0x16c2e7(-0x13d,-0x1bf,-0x1d3,-0x1a9)+'rs',''));console[_0x16c2e7(-0x14c,-0x269,-0x1e6,-0x20e)](_0x4523e3[_0x16c2e7(-0x1bb,-0x181,-0x14e,-0x1e3)],_0x54c09a),addLog(_0x2d9ebd(0x57c,0x5dd,0x5b4,0x5a4)+_0x54c09a);let _0x525ef0=await _0x4523e3['JvXwe'](fumian,extension_settings[extensionName]['yushe'][extension_settings[extensionName][_0x16c2e7(-0x10d,-0xa4,-0x12d,-0x99)+_0x16c2e7(-0x1ae,-0x243,-0x1fb,-0x26f)]][_0x2d9ebd(0x62f,0x623,0x5f7,0x643)+_0x16c2e7(-0x1d9,-0x160,-0x16a,-0x1ef)],extension_settings[extensionName][_0x2d9ebd(0x607,0x5d1,0x53d,0x57b)+'i']);if(extension_settings[extensionName]['worker'][_0x2d9ebd(0x724,0x658,0x61e,0x6a3)](_0x4523e3[_0x16c2e7(-0x1e5,-0x155,-0x150,-0x10c)]))_0x525ef0=_0x525ef0[_0x2d9ebd(0x629,0x70f,0x630,0x690)](_0x4523e3[_0x16c2e7(-0x27d,-0x190,-0x1e9,-0x274)],_0x4523e3[_0x16c2e7(-0x109,-0x9d,-0x132,-0xfb)]);else{if(_0x4523e3[_0x2d9ebd(0x696,0x6b5,0x5e1,0x679)](_0x2d9ebd(0x597,0x51d,0x5fa,0x56e),'ZozFD')){const _0x46178b=_0x5f2ef6[_0x355eb0];if(_0x46178b[_0x16c2e7(-0x84,-0xcd,-0xd3,-0x151)]&&_0x4523e3[_0x16c2e7(-0x191,-0x1d2,-0x1c6,-0x258)](_0x46178b[_0x2d9ebd(0x6db,0x692,0x744,0x6a1)][_0x16c2e7(-0x1a8,-0x16a,-0x1ea,-0x19c)],0x23dd*0x1+-0x1*-0x167e+0x3a5b*-0x1))return _0x46178b[_0x2d9ebd(0x734,0x64f,0x6eb,0x6a1)][0xb*-0x116+0x13*-0x1f1+0x30d5][_0x2d9ebd(0x618,0x566,0x61f,0x5ee)];}else _0x525ef0=_0x4523e3['PTdVD'](_0x2aa81a,_0x525ef0);}_0x4523e3[_0x2d9ebd(0x58b,0x56b,0x56f,0x59e)](addLog,_0x2d9ebd(0x552,0x551,0x5f2,0x5f0)+_0x525ef0),_0x54c09a=_0x54c09a[_0x2d9ebd(0x6cd,0x679,0x62d,0x690)]('\x0a',',')['replaceAll']('\x5c\x5c','\x5c')[_0x16c2e7(-0x45,-0x111,-0xe4,-0xbd)]('\x5c','\x5c\x5c'),_0x525ef0=_0x525ef0['replaceAll']('\x0a',',')[_0x16c2e7(-0x127,-0xf1,-0xe4,-0x4a)]('\x5c\x5c','\x5c')[_0x2d9ebd(0x622,0x703,0x646,0x690)]('\x5c','\x5c\x5c');let _0x3272ac={'prompt':_0x54c09a,'negative_prompt':_0x525ef0,'steps':extension_settings[extensionName][_0x16c2e7(-0x1d1,-0x115,-0x188,-0x132)+_0x2d9ebd(0x651,0x68f,0x71d,0x686)],'sampler_name':extension_settings[extensionName][_0x2d9ebd(0x5d9,0x52d,0x657,0x5b9)+_0x2d9ebd(0x606,0x61f,0x5fd,0x68d)],'width':_0x13e921?_0x13e921:extension_settings[extensionName][_0x2d9ebd(0x62f,0x63f,0x6e3,0x692)+'dth'],'height':_0x23c353?_0x23c353:extension_settings[extensionName]['comfyui_he'+'ight'],'cfg_scale':extension_settings[extensionName]['cfg_comfyu'+'i'],'seed':_0x4523e3[_0x2d9ebd(0x671,0x638,0x6fe,0x679)](extension_settings[extensionName][_0x16c2e7(-0x197,-0x1b3,-0x1bf,-0x149)+'ed'],0x1*0x1b95+0x1426+-0x2fbb)||_0x4523e3[_0x2d9ebd(0x6c2,0x685,0x6b1,0x679)](extension_settings[extensionName][_0x2d9ebd(0x575,0x5aa,0x57c,0x5b5)+'ed'],'0')||extension_settings[extensionName][_0x16c2e7(-0x1ee,-0x210,-0x1bf,-0x217)+'ed']===''||_0x4523e3[_0x2d9ebd(0x5f1,0x65b,0x6da,0x679)](extension_settings[extensionName][_0x2d9ebd(0x592,0x520,0x5f2,0x5b5)+'ed'],-(-0xf4d+-0x97b*-0x1+-0xd5*-0x7))||_0x4523e3[_0x2d9ebd(0x6a9,0x6d2,0x5da,0x64b)](extension_settings[extensionName]['comfyui_se'+'ed'],'-1')?_0x4523e3[_0x16c2e7(-0x193,-0xc4,-0x162,-0x103)](generateRandomSeed):extension_settings[extensionName][_0x16c2e7(-0x1f2,-0x243,-0x1bf,-0x185)+'ed'],'MODEL_NAME':extension_settings[extensionName][_0x16c2e7(-0x245,-0x1bf,-0x210,-0x28a)],'c_quanzhong':extension_settings[extensionName]['c_quanzhon'+'g'],'c_idquanzhong':extension_settings[extensionName][_0x2d9ebd(0x6bf,0x652,0x680,0x68a)+_0x2d9ebd(0x5e7,0x59d,0x573,0x5e8)],'c_xijie':extension_settings[extensionName][_0x2d9ebd(0x66f,0x634,0x6b0,0x61c)],'c_fenwei':extension_settings[extensionName][_0x16c2e7(-0x1b4,-0x18c,-0x1e0,-0x233)],'comfyuicankaotupian':window['comfyuican'+'kaotupian'],'ipa':extension_settings[extensionName]['ipa'],'scheduler':extension_settings[extensionName]['comfyui_sc'+_0x2d9ebd(0x5e2,0x59d,0x63c,0x625)],'vae':extension_settings[extensionName][_0x2d9ebd(0x606,0x60a,0x6b9,0x61b)+'e']};const _0x360e89=_0x2d9ebd(0x55d,0x5d2,0x507,0x571)+_0x2d9ebd(0x62c,0x664,0x644,0x64f)+_0x16c2e7(-0x12d,-0x251,-0x1b7,-0x12b)+_0x3272ac[_0x16c2e7(-0x55,-0xd0,-0xda,-0x149)]+_0x2d9ebd(0x596,0x58e,0x619,0x576)+_0x3272ac[_0x16c2e7(-0x24b,-0x19c,-0x1aa,-0x1e7)+'rompt']+'\x0a模型:\x20'+_0x3272ac[_0x2d9ebd(0x5eb,0x5ea,0x54b,0x564)]+_0x16c2e7(-0x87,-0x16a,-0x11c,-0x18f)+_0x3272ac[_0x2d9ebd(0x608,0x5eb,0x5a5,0x5d4)+'me']+_0x2d9ebd(0x554,0x5b0,0x5cd,0x5c4)+_0x3272ac[_0x2d9ebd(0x554,0x580,0x613,0x586)]+('\x0aCFG\x20Scale'+':\x20')+_0x3272ac['cfg_scale']+_0x2d9ebd(0x5bf,0x54b,0x600,0x597)+_0x3272ac[_0x2d9ebd(0x670,0x6e3,0x62d,0x663)]+_0x16c2e7(-0x113,-0x1e0,-0x197,-0x227)+_0x3272ac['width']+'x'+_0x3272ac[_0x16c2e7(-0x10c,-0x170,-0x179,-0x1cc)]+_0x16c2e7(-0x17c,-0xd4,-0x102,-0xe1)+_0x3272ac[_0x16c2e7(-0x11c,-0x104,-0xfd,-0x5f)]+('\x0aScheduler'+':\x20')+_0x3272ac[_0x16c2e7(-0x177,-0x176,-0x173,-0x1a3)]+(_0x16c2e7(-0x127,-0x1b1,-0x137,-0x15d)+_0x16c2e7(-0x181,-0x51,-0xf3,-0xff)+'-\x0a');_0x4523e3[_0x2d9ebd(0x5da,0x5c7,0x52e,0x569)](addLog,_0x360e89);const _0xbf04d7=_0x4523e3[_0x2d9ebd(0x598,0x5eb,0x5ac,0x5eb)];_0x3272ac=await _0x4523e3[_0x2d9ebd(0x5ca,0x592,0x5aa,0x5ac)](replacepro,_0x3272ac,extension_settings[extensionName][_0x2d9ebd(0x5c0,0x4f2,0x549,0x56a)]),_0x3272ac='{\x22client_i'+_0x2d9ebd(0x612,0x53e,0x520,0x596)+_0xbf04d7+('\x22,\x20\x22prompt'+'\x22:')+_0x3272ac+'}';function _0x2d9ebd(_0x56ef2d,_0x37cba8,_0x215cb0,_0xc9658a){return _0x16a1(_0xc9658a-0x3d8,_0x215cb0);}_0x4523e3['bwoQz'](addLog,'发送到\x20ComfyU'+_0x16c2e7(-0x199,-0x186,-0x1d5,-0x1be)+'oad:\x20'+_0x3272ac);let _0x2e10cd=!![];while(_0x2e10cd){if(window[_0x2d9ebd(0x612,0x62c,0x572,0x5a0)]){if(_0x4523e3[_0x2d9ebd(0x698,0x628,0x6a8,0x67c)]!==_0x4523e3[_0x16c2e7(-0xfb,-0x94,-0xf8,-0x180)]){_0x505159[_0x2d9ebd(0x60b,0x5f7,0x528,0x5a0)]=!![],_0x4523e3[_0x16c2e7(-0x1cc,-0x192,-0x1d6,-0x153)](_0x1ffc57,_0x2d9ebd(0x657,0x673,0x605,0x67b)+_0x2d9ebd(0x66d,0x6cc,0x5ec,0x65b)+_0x2aa1f3[_0x2d9ebd(0x560,0x635,0x593,0x5a5)]),_0x5c862a[_0x2d9ebd(0x576,0x508,0x5a5,0x572)](_0x2d9ebd(0x61c,0x538,0x533,0x5d5)+_0x16c2e7(-0x1b7,-0x195,-0x1cd,-0x1d8)+'ge:',_0x187c83);throw _0x1b7eee;}else _0x2e10cd=![];}else await _0x4523e3[_0x16c2e7(-0x1b7,-0x9e,-0x115,-0xc1)](sleep,0x7f3+0x1f3a+-0x1*0x2345);};try{if(_0x4523e3[_0x16c2e7(-0xc6,-0x187,-0xfb,-0x8d)](_0x4523e3[_0x16c2e7(-0x16f,-0x131,-0x112,-0xf8)],_0x16c2e7(-0x1bb,-0x230,-0x1ae,-0x1a0)))_0x111785[_0x2d9ebd(0x6a0,0x5bf,0x680,0x63e)+_0x16c2e7(-0x206,-0xf8,-0x180,-0x1ad)+'tener']=!![],_0x4523e3[_0x2d9ebd(0x5fd,0x588,0x5c5,0x5d2)](_0x4bcb12);else{window['xiancheng']=![];let _0x22d4cf;if(extension_settings[extensionName][_0x2d9ebd(0x5f1,0x60f,0x6ab,0x623)]===_0x2d9ebd(0x589,0x586,0x60b,0x5ff)){const _0x3079bb={};_0x3079bb[_0x2d9ebd(0x682,0x663,0x5f5,0x683)]=_0x12573b,_0x3079bb[_0x16c2e7(-0xc1,-0x11e,-0xda,-0x78)]=_0x3272ac;const _0x2d09e2=await _0x4523e3[_0x16c2e7(-0x119,-0x170,-0x12a,-0x126)](fetch,_0x4523e3['yyceK'],{'method':_0x4523e3['xMnDZ'],'body':JSON['stringify'](_0x3079bb),'headers':_0x4523e3[_0x16c2e7(-0x1ab,-0x1bd,-0x12f,-0x115)](getRequestHeaders,window[_0x2d9ebd(0x573,0x5f0,0x614,0x5e7)])});if(!_0x2d09e2['ok']){if(_0x4523e3[_0x2d9ebd(0x5d3,0x5db,0x65a,0x64b)](_0x4523e3[_0x2d9ebd(0x691,0x674,0x6ad,0x68f)],_0x4523e3['dyLCE'])){const _0x448c96=await _0x2d09e2['text']();_0x4523e3['WZvJm'](addLog,_0x16c2e7(-0x182,-0x236,-0x1f4,-0x264)+'jiuguan\x20cl'+_0x2d9ebd(0x6fa,0x6b1,0x693,0x669)+_0x448c96);throw new Error(_0x16c2e7(-0xda,-0xce,-0x13e,-0x1b6)+_0x2d09e2[_0x16c2e7(-0x1b2,-0x13b,-0x145,-0x18f)]+_0x16c2e7(-0xc7,-0x13f,-0x14b,-0x1c2)+_0x448c96);}else _0xc89350=_0x21e160[_0x2d9ebd(0x61e,0x6a2,0x715,0x690)](_0x4523e3[_0x2d9ebd(0x4fe,0x54f,0x622,0x58b)],_0x4523e3['iYgBz']),_0x2d422d=_0x25b858[_0x16c2e7(-0x186,-0x74,-0xe4,-0x145)](_0x4523e3[_0x2d9ebd(0x6a8,0x684,0x5f5,0x680)],'');}const _0x3eaf0b=await _0x2d09e2[_0x2d9ebd(0x693,0x61d,0x6c8,0x6a9)]();let _0x291407,_0x172171;try{const _0x1bb648=JSON[_0x2d9ebd(0x5d5,0x6ef,0x675,0x664)](_0x3eaf0b);_0x291407=_0x1bb648['format'],_0x172171=_0x1bb648[_0x2d9ebd(0x5d3,0x5c6,0x667,0x660)];}catch(_0x39cd15){addLog('JSON\x20解析失败，'+'尝试作为原始\x20Bas'+_0x16c2e7(-0xa7,-0xde,-0xf7,-0x88)),_0x291407=_0x16c2e7(-0x13a,-0x1e6,-0x18b,-0x18a),_0x172171=_0x3eaf0b;}if(!_0x172171){_0x4523e3[_0x2d9ebd(0x5c3,0x4fb,0x557,0x590)](addLog,_0x4523e3['vJpFV']);throw new Error(_0x4523e3['YNRoU']);}_0x4523e3[_0x16c2e7(-0x140,-0x208,-0x174,-0x163)](addLog,'图片生成成功\x20(ji'+'uguan\x20clie'+_0x2d9ebd(0x69e,0x5c2,0x676,0x632)),_0x22d4cf=_0x2d9ebd(0x62c,0x5ff,0x658,0x60f)+'/'+_0x291407+_0x2d9ebd(0x6ab,0x685,0x610,0x654)+_0x172171;}else{const _0x38b622=new URL(_0x12573b+_0x4523e3[_0x2d9ebd(0x620,0x598,0x512,0x588)]),_0x4f99c9={};_0x4f99c9[_0x16c2e7(-0x11e,-0x169,-0x10a,-0x8c)+'pe']=_0x2d9ebd(0x563,0x5e7,0x5ee,0x5be)+'n/json';const _0x132875=await _0x4523e3[_0x2d9ebd(0x61f,0x5bc,0x526,0x5ac)](fetch,_0x38b622,{'method':_0x4523e3[_0x16c2e7(-0x1ba,-0x1ad,-0x1af,-0x1ca)],'body':_0x3272ac,'headers':_0x4f99c9});if(!_0x132875['ok']){const _0x518c62=await _0x132875[_0x2d9ebd(0x6e1,0x62b,0x65a,0x6a9)]();_0x4523e3[_0x16c2e7(-0xeb,-0x86,-0xcd,-0x2d)](addLog,_0x16c2e7(-0x244,-0x1db,-0x1f4,-0x1ad)+_0x2d9ebd(0x5c6,0x4ec,0x605,0x56f)+'fyui):\x20'+_0x518c62);throw new Error(_0x16c2e7(-0x16f,-0x10b,-0x13e,-0x18c)+_0x132875['status']+_0x16c2e7(-0x161,-0x139,-0x14b,-0x139)+_0x518c62);}const _0x47cf8a=await _0x132875['json']();let _0x2eaabf=_0x47cf8a[_0x2d9ebd(0x673,0x6b1,0x6d3,0x673)],_0x37fc11=0x5fb*0x1+-0x1797+0x119c;while(!![]){try{const _0x3c0602=await fetch(_0x12573b+_0x16c2e7(-0xfb,-0x146,-0xd0,-0x11c)+_0x2eaabf);if(!_0x3c0602['ok']){if(_0x4523e3[_0x16c2e7(-0x22a,-0x197,-0x1b8,-0x247)]===_0x4523e3['FdbkZ']){addLog(_0x16c2e7(-0x156,-0xae,-0x11e,-0xd9)+'\x20'+_0x3c0602[_0x16c2e7(-0x158,-0x16d,-0x145,-0x1d5)]);throw new Error(_0x16c2e7(-0x17b,-0x231,-0x18e,-0x17d)+_0x16c2e7(-0x1f6,-0x14a,-0x1c9,-0x1e8)+_0x16c2e7(-0x136,-0x1b4,-0x1a4,-0x12e)+_0x3c0602[_0x16c2e7(-0xd2,-0x142,-0x145,-0xc6)]);}else{const _0x523984=_0x31313f[_0x2d9ebd(0x597,0x621,0x5c5,0x5fd)](_0x4acd89,arguments);return _0x69a9d3=null,_0x523984;}}let _0x270b38=await _0x3c0602[_0x2d9ebd(0x623,0x58f,0x50d,0x59b)]();console['log'](_0x4523e3[_0x2d9ebd(0x5e9,0x636,0x544,0x5cd)],_0x270b38);if(_0x270b38[_0x2d9ebd(0x5ec,0x5ec,0x5a5,0x641)+_0x16c2e7(-0x1f9,-0x1fe,-0x1f3,-0x273)](_0x2eaabf)){if(_0x4523e3[_0x16c2e7(-0x168,-0x67,-0xd9,-0xbe)](_0x4523e3[_0x16c2e7(-0x15f,-0x155,-0xfc,-0xa2)],_0x4523e3[_0x2d9ebd(0x70f,0x635,0x6c4,0x678)])){const _0x3e4d2d=_0x2d9ebd(0x52d,0x510,0x4f8,0x58d)+'(ID:\x20'+_0x51cdd0+_0x16c2e7(-0x18f,-0x136,-0x163,-0x155)+_0x4e902b[_0x2d9ebd(0x509,0x585,0x539,0x5a5)];_0x4523e3[_0x2d9ebd(0x569,0x50d,0x606,0x59e)](_0x2ce583,'错误:\x20'+_0x3e4d2d),_0x2f8ab9[_0x2d9ebd(0x4ef,0x521,0x544,0x572)](_0x4523e3['mISht'],_0x38e4fb);const _0x411701={};_0x411701['id']=_0x58b5ee,_0x411701[_0x16c2e7(-0xa8,-0x81,-0xf0,-0x169)]=![],_0x411701[_0x2d9ebd(0x4d0,0x4df,0x54d,0x572)]=_0x1b8d6c[_0x2d9ebd(0x539,0x55c,0x53d,0x5a5)],_0x411701[_0x2d9ebd(0x729,0x623,0x718,0x69a)]=_0x1a1fc3,_0x253453[_0x16c2e7(-0x1c1,-0x264,-0x1c4,-0x188)](_0x349560[_0x16c2e7(-0x165,-0x13e,-0x193,-0x168)+_0x2d9ebd(0x679,0x6ce,0x5b7,0x652)+_0x16c2e7(-0x1fc,-0x22b,-0x1ad,-0x218)],_0x411701),_0x4523e3[_0x16c2e7(-0x166,-0x222,-0x1e1,-0x265)](_0x9b592e,_0x2d9ebd(0x567,0x616,0x68b,0x5f2)+_0x2d9ebd(0x64f,0x57f,0x675,0x5e5)+_0x58d1ed+')');}else{function _0x31fd14(_0x29a5ad){function _0x1b0c39(_0x2360fa,_0x57ecd2,_0x3294ac,_0x56435f){return _0x16c2e7(_0x3294ac,_0x57ecd2-0x15f,_0x2360fa-0x3ca,_0x56435f-0x1e9);}function _0x304438(_0x40a1b9,_0x267532,_0x127fd9,_0x3df88f){return _0x2d9ebd(_0x40a1b9-0x4f,_0x267532-0xef,_0x40a1b9,_0x3df88f- -0x4a2);}for(const _0x1e2eb8 in _0x29a5ad){const _0x2b2eeb=_0x29a5ad[_0x1e2eb8];if(_0x2b2eeb[_0x1b0c39(0x2f7,0x2e7,0x322,0x2a0)]&&_0x4523e3[_0x304438(0xcf,0x1cc,0x155,0x16a)](_0x2b2eeb[_0x1b0c39(0x2f7,0x36c,0x384,0x2cc)][_0x304438(0x4d,0xe3,0x160,0xe8)],-0x15*0xa+-0x827+0x8f9)){if(_0x4523e3[_0x304438(0x161,0x193,0x204,0x1f9)](_0x4523e3[_0x304438(0x124,0x216,0x143,0x174)],_0x4523e3[_0x1b0c39(0x26c,0x2ae,0x274,0x249)])){const _0x1b0d06=new _0x5ad116();_0x1b0d06['onloadend']=()=>_0x47b8e5(_0x1b0d06[_0x1b0c39(0x2f2,0x289,0x327,0x2b6)]),_0x1b0d06[_0x304438(0xe8,0x1a4,0x13a,0x167)]=_0x410242,_0x1b0d06['readAsData'+_0x1b0c39(0x1ca,0x1a3,0x165,0x15f)](_0x4f6b7c);}else return _0x2b2eeb[_0x1b0c39(0x2f7,0x33a,0x2b2,0x26e)][0x3af+-0x19ce+0x161f]['filename'];}}return null;}_0x4523e3[_0x16c2e7(-0x26c,-0x211,-0x20b,-0x208)](addLog,_0x4523e3['oMaLF']);let _0x229634=_0x4523e3['hBsbj'](_0x31fd14,_0x270b38[_0x2eaabf]['outputs']);if(!_0x229634)throw new Error(_0x4523e3['FgHZk']);let _0x4d2c05=_0x12573b+(_0x2d9ebd(0x647,0x630,0x65b,0x613)+_0x16c2e7(-0x17b,-0x1d0,-0x1b9,-0x128))+_0x229634+(_0x2d9ebd(0x654,0x5da,0x5cf,0x620)+'ut');const _0x179dd0=await _0x4523e3[_0x16c2e7(-0xce,-0x1dc,-0x170,-0x123)](fetch,_0x4d2c05);if(!_0x179dd0['ok'])throw new Error('获取图片失败,状态码'+':\x20'+_0x179dd0[_0x16c2e7(-0xcf,-0x17e,-0x145,-0xaa)]);const _0x2646d0=await _0x179dd0['blob']();_0x22d4cf=await new Promise((_0x3d26b2,_0x19a427)=>{function _0x467a24(_0x2c598c,_0x929322,_0x50cd7c,_0x118755){return _0x16c2e7(_0x118755,_0x929322-0x1b0,_0x50cd7c-0x43d,_0x118755-0x1d4);}function _0x19ccfd(_0x22466c,_0x1ef1b7,_0x4743a1,_0x132120){return _0x16c2e7(_0x4743a1,_0x1ef1b7-0xa9,_0x1ef1b7-0x704,_0x132120-0x1e7);}const _0x34e0ae={'EoMda':function(_0x24afff,_0x31dbd2){function _0x41ab48(_0x42cea6,_0x3e1190,_0x2c4c89,_0x5e2304){return _0x16a1(_0x42cea6- -0xcf,_0x3e1190);}return _0x4523e3[_0x41ab48(0xd0,0x13c,0xf4,0xac)](_0x24afff,_0x31dbd2);},'xhnXO':function(_0x208636,_0x1515f2){function _0x217f61(_0x3588a2,_0xe86116,_0x28337c,_0x54e522){return _0x16a1(_0xe86116- -0x3c9,_0x28337c);}return _0x4523e3[_0x217f61(-0x167,-0x19f,-0x179,-0x16a)](_0x208636,_0x1515f2);}};if(_0x4523e3[_0x467a24(0x303,0x367,0x368,0x372)](_0x4523e3[_0x467a24(0x2a0,0x2b5,0x2fa,0x2f9)],_0x4523e3[_0x467a24(0x22f,0x246,0x27c,0x292)])){const _0x2afc55=new FileReader();_0x2afc55[_0x19ccfd(0x578,0x5be,0x636,0x5c9)]=()=>_0x3d26b2(_0x2afc55['result']),_0x2afc55[_0x19ccfd(0x553,0x599,0x56f,0x602)]=_0x19a427,_0x2afc55['readAsData'+_0x19ccfd(0x4e0,0x504,0x4e3,0x58c)](_0x2646d0);}else _0x22894f=_0x34e0ae['EoMda'](_0x5e488e+',\x20',_0x34e0ae[_0x467a24(0x244,0x2a0,0x26f,0x2ed)](_0xa98460,_0x11a856[_0x19ccfd(0x5fd,0x624,0x6b6,0x675)+_0x51588b+'\x20Prompt']));});break;}}await sleep(-0x1c7a+-0xbb7*0x3+-0x3b*-0x125),_0x37fc11++;if(_0x37fc11>-0x1d*-0xfb+0x20*-0x6b+0x55*-0x2b){_0x4523e3[_0x2d9ebd(0x543,0x50b,0x55a,0x59e)](addLog,_0x4523e3[_0x16c2e7(-0x22c,-0x1c0,-0x1d7,-0x143)]);throw new Error(_0x4523e3[_0x2d9ebd(0x616,0x569,0x665,0x5d1)]);}}catch(_0x2d57f2){_0x4523e3[_0x16c2e7(-0x1a6,-0x169,-0x167,-0x190)](addLog,_0x16c2e7(-0x168,-0x104,-0x12b,-0x152)+_0x2d57f2);throw _0x2d57f2;}}}window['xiancheng']=!![];if(!_0x22d4cf){if(_0x4523e3[_0x2d9ebd(0x6a8,0x606,0x608,0x671)](_0x4523e3['CIuVU'],_0x4523e3[_0x2d9ebd(0x4eb,0x58d,0x520,0x567)]))throw new Error('未能生成图片\x20URL'+'。');else _0x167a29=_0x4523e3[_0x16c2e7(-0x1cd,-0x165,-0x176,-0x104)](_0x3359e5,_0x39c71a);}return _0x4523e3[_0x2d9ebd(0x6fe,0x638,0x6c8,0x65f)](addLog,_0x4523e3['mLqWy']),setItemImg,{'image':_0x22d4cf,'change':_0x4523e3[_0x16c2e7(-0x1c4,-0x16d,-0x14a,-0xd8)](_0x2ec846,'')};}}catch(_0x27e0da){window['xiancheng']=!![],_0x4523e3[_0x16c2e7(-0x131,-0x204,-0x19e,-0x1b2)](addLog,_0x16c2e7(-0x61,-0x81,-0xf9,-0x165)+_0x16c2e7(-0x110,-0x144,-0x119,-0x146)+_0x27e0da['message']),console[_0x16c2e7(-0x191,-0x1b8,-0x202,-0x178)](_0x2d9ebd(0x66c,0x571,0x5dc,0x5d5)+_0x16c2e7(-0x17e,-0x1be,-0x1cd,-0x174)+_0x2d9ebd(0x626,0x591,0x5cb,0x615),_0x27e0da);throw _0x27e0da;}}async function comfyuigenerate(_0x336f14){const _0xcabd26={'aXhzA':_0x355066(0x37b,0x2dc,0x341,0x2fb)+'rs','TJZkF':function(_0x5c49ec,_0x5962e3){return _0x5c49ec(_0x5962e3);},'IIlDI':_0x355066(0x257,0x2e3,0x327,0x2f4),'Qejel':_0x355066(0x48f,0x42a,0x443,0x3f8),'lQbem':function(_0x2539e0,_0x2d14ba){return _0x2539e0!=_0x2d14ba;},'lxPZn':function(_0x45cdd7,_0x567726,_0x307d5f,_0x25d442){return _0x45cdd7(_0x567726,_0x307d5f,_0x25d442);},'uKfxp':function(_0x2d52b7,_0x5eba9e){return _0x2d52b7(_0x5eba9e);},'vuguB':'Error\x20gene'+_0x355066(0x37a,0x286,0x2ae,0x301)+_0x107e61(0x540,0x4c4,0x53f,0x506)},{id:_0x335a5a,prompt:_0x3998f9,width:_0x278557,height:_0x4e3ea5,change:_0x3cce0e}=_0x336f14;function _0x107e61(_0x4550d4,_0x314f0b,_0x3c3155,_0x14f52e){return _0x16a1(_0x4550d4-0x303,_0x3c3155);}_0xcabd26[_0x355066(0x34f,0x27e,0x251,0x2e1)](addLog,_0x355066(0x277,0x28b,0x329,0x2e6)+':\x20'+_0x335a5a+(_0x107e61(0x4e2,0x4dc,0x54d,0x504)+':\x20')+_0x3998f9+(_0x3cce0e?'\x20-\x20Change:'+'\x20'+_0x3cce0e:''));function _0x355066(_0x4ae212,_0x289e17,_0x3728b4,_0x5984a7){return _0x16a1(_0x5984a7-0x132,_0x289e17);}try{if(_0xcabd26[_0x355066(0x2bd,0x2ce,0x30b,0x2ec)]===_0xcabd26[_0x107e61(0x525,0x576,0x531,0x4c7)]){const _0xe68eea=/<lora:([^:]+)(?:\.safetensors)?:([^>]+)(?::1)?>/g;return _0x3ac924[_0x355066(0x2a7,0x2fd,0x3b8,0x328)](_0xe68eea,(_0x166183,_0x13acf1,_0x4ef298)=>{if(_0x166183['includes'](_0xcabd26[_0x1914c1(0x39f,0x281,0x34f,0x2fd)]))return _0x166183;function _0x3d14b9(_0x4b0088,_0xc9db29,_0x4e480a,_0x3dd34c){return _0x107e61(_0x4e480a- -0x4c4,_0xc9db29-0x1dc,_0x3dd34c,_0x3dd34c-0xa9);}function _0x1914c1(_0x1784b5,_0x56890d,_0x46b717,_0x4abdf9){return _0x107e61(_0x4abdf9- -0x223,_0x56890d-0x14d,_0x56890d,_0x4abdf9-0x169);}if(_0x4ef298[_0x1914c1(0x35a,0x395,0x35a,0x3ab)](':'))return _0x3d14b9(0x9a,0x44,0x7b,0x55)+_0x13acf1+(_0x3d14b9(-0x8a,0x18,0x8,0x89)+_0x3d14b9(0x132,0x2e,0xaf,0x37))+_0x4ef298+'>';return _0x3d14b9(-0xa,-0x1d,0x7b,0xf2)+_0x13acf1+(_0x3d14b9(0x33,0x7,0x8,-0x7)+'rs:')+_0x4ef298+_0x1914c1(0x310,0x2f7,0x363,0x354);});}else{const {image:_0x25a524,change:_0x3c8b32}=await generateComfyUIImage({'prompt':_0x3998f9,'width':_0x278557,'height':_0x4e3ea5,'change':_0x3cce0e});_0xcabd26['lQbem'](extension_settings[extensionName][_0x107e61(0x589,0x5e7,0x599,0x607)],'0')?(await _0xcabd26[_0x107e61(0x5b9,0x572,0x56e,0x5b6)](setItemImg,_0x3998f9,_0x25a524,_0x3c8b32),_0xcabd26[_0x355066(0x41b,0x3bf,0x47f,0x3e5)](addLog,_0x107e61(0x4ed,0x473,0x486,0x4ee)+_0x355066(0x35f,0x2c8,0x255,0x2d8)+'\x20'+_0x3998f9)):_0xcabd26[_0x107e61(0x4b2,0x48a,0x425,0x413)](addLog,_0x355066(0x3d4,0x3c7,0x351,0x3ab)+'库');const _0x56df59={};_0x56df59['id']=_0x335a5a,_0x56df59[_0x107e61(0x5af,0x610,0x5cf,0x56b)]=!![],_0x56df59[_0x107e61(0x4fa,0x4f7,0x55a,0x4e1)]=_0x25a524,_0x56df59['prompt']=_0x3998f9,_0x56df59[_0x107e61(0x51e,0x596,0x59d,0x4aa)]=_0x3c8b32,eventSource[_0x355066(0x320,0x35d,0x37d,0x30a)](EventType['GENERATE_I'+_0x355066(0x35e,0x440,0x39b,0x3ac)+_0x355066(0x355,0x313,0x2c5,0x321)],_0x56df59),_0xcabd26[_0x107e61(0x5b6,0x59c,0x615,0x56e)](addLog,_0x355066(0x43b,0x432,0x36e,0x3ef)+_0x107e61(0x510,0x55b,0x514,0x4b0)+_0x335a5a+')');}}catch(_0x1117c1){const _0x110620=_0x355066(0x32c,0x249,0x2b6,0x2e7)+_0x107e61(0x4a3,0x43d,0x40c,0x48c)+_0x335a5a+_0x107e61(0x53c,0x4e2,0x59a,0x5b8)+_0x1117c1[_0x107e61(0x4d0,0x558,0x4cb,0x479)];addLog(_0x107e61(0x566,0x54c,0x4cc,0x5e3)+_0x110620),console[_0x107e61(0x49d,0x51a,0x46d,0x52c)](_0xcabd26[_0x107e61(0x4d3,0x48c,0x539,0x4f0)],_0x1117c1);const _0x22277f={};_0x22277f['id']=_0x335a5a,_0x22277f[_0x355066(0x44a,0x367,0x3fb,0x3de)]=![],_0x22277f['error']=_0x1117c1[_0x355066(0x32b,0x265,0x30b,0x2ff)],_0x22277f[_0x107e61(0x5c5,0x5d3,0x57f,0x5c2)]=_0x3998f9,eventSource[_0x107e61(0x4db,0x54b,0x55f,0x45a)](EventType[_0x355066(0x32c,0x3d0,0x2f7,0x33b)+'MAGE_RESPO'+'NSE'],_0x22277f),addLog(_0x107e61(0x51d,0x510,0x55a,0x484)+'ID:\x20'+_0x335a5a+')');}}function initializeComfyuiListener(){function _0x2f8fd5(_0x2abd62,_0x3aa81c,_0x4eb47a,_0x21cd73){return _0x16a1(_0x21cd73-0x38b,_0x3aa81c);}const _0x2867a9={'FVNWV':function(_0x4b1161,_0x27e4c6){return _0x4b1161(_0x27e4c6);}};eventSource['on'](EventType[_0x2f8fd5(0x4fb,0x5ae,0x576,0x594)+'MAGE_REQUE'+'ST'],comfyuigenerate);function _0x146eba(_0x497807,_0x32a10d,_0x18c863,_0x265401){return _0x16a1(_0x265401-0x1d5,_0x18c863);}_0x2867a9['FVNWV'](addLog,'comfyui\x20生图'+_0x146eba(0x3dd,0x38f,0x38f,0x3b5));}export async function replaceWithcomfyui(){function _0x5bb4c9(_0x4367f8,_0x48b8b2,_0x237868,_0x5de282){return _0x16a1(_0x48b8b2- -0x229,_0x237868);}const _0x5e0a15={'WQyRw':function(_0x544b7f,_0x96d1f8){return _0x544b7f+_0x96d1f8;},'BJafk':function(_0x2a0038,_0x104a99){return _0x2a0038(_0x104a99);},'gPwcB':function(_0x48dafa,_0x41a166){return _0x48dafa(_0x41a166);},'LszqD':_0x5bb4c9(-0x3a,0x20,0x1e,-0x5d)+_0x45720c(0x337,0x33a,0x324,0x3b0),'OHmCC':function(_0x44ea79,_0x52df2d){return _0x44ea79==_0x52df2d;},'XMSCN':function(_0x4ec343,_0x6c69f5){return _0x4ec343===_0x6c69f5;},'UNQcd':function(_0x382c1e){return _0x382c1e();},'TZRcE':function(_0x1b8d60,_0x54f364){return _0x1b8d60!==_0x54f364;},'QxCvt':_0x45720c(0x338,0x2ac,0x2be,0x211),'APnMR':_0x45720c(0x2d2,0x36a,0x39a,0x351),'ZGPgK':'comfyui\x20生图'+_0x45720c(0x23d,0x2d9,0x237,0x301)};function _0x45720c(_0xe402a1,_0x3bd91e,_0x5951e3,_0x416511){return _0x16a1(_0x3bd91e-0xce,_0xe402a1);}if(_0x5e0a15['OHmCC'](extension_settings[extensionName]['mode'],_0x5bb4c9(-0x4d,-0x84,-0x9d,-0x14)))_0x5e0a15[_0x45720c(0x410,0x38d,0x3f0,0x415)]('Sfgup',_0x5bb4c9(-0x31,-0x3e,-0xe,-0x94))?_0x45ab7f['Character\x20'+_0x1d0755+_0x45720c(0x2b6,0x270,0x222,0x1f6)]&&(_0x3515de=_0x5e0a15[_0x5bb4c9(-0x97,-0x47,-0xad,-0x31)](_0x5e0a15[_0x45720c(0x349,0x2b0,0x223,0x285)](_0x485f5b,',\x20'),_0x5e0a15['BJafk'](_0x3f8c22,_0x276e5d[_0x45720c(0x36c,0x38a,0x3a4,0x427)+_0x4d8d81+_0x5bb4c9(-0x3d,-0x87,0x3,0x1a)]))):(!window[_0x45720c(0x2b1,0x334,0x3cb,0x2ef)+'ComfyuiLis'+_0x45720c(0x400,0x375,0x39d,0x355)]&&(window[_0x5bb4c9(-0x65,0x3d,0xa5,-0x20)+'ComfyuiLis'+_0x45720c(0x2fa,0x375,0x353,0x387)]=!![],_0x5e0a15['UNQcd'](initializeComfyuiListener)),_0x5e0a15[_0x45720c(0x318,0x326,0x399,0x2ef)](initializeImageProcessing));else{if(window[_0x45720c(0x391,0x334,0x337,0x39f)+'ComfyuiLis'+'tener']){if(_0x5e0a15[_0x5bb4c9(0x14,0x56,0x1b,0x53)](_0x5e0a15[_0x5bb4c9(0x89,0x4f,0x86,0x5c)],_0x5e0a15['APnMR']))eventSource[_0x45720c(0x20a,0x2a3,0x2ae,0x21a)+_0x45720c(0x413,0x37b,0x310,0x2f8)](EventType[_0x5bb4c9(-0x2b,-0x20,-0x38,-0x1a)+_0x45720c(0x400,0x362,0x2ee,0x363)+'ST'],comfyuigenerate),window[_0x5bb4c9(-0x53,0x3d,-0x2e,0x16)+'ComfyuiLis'+_0x45720c(0x418,0x375,0x3af,0x3f5)]=![],_0x5e0a15[_0x5bb4c9(-0x65,-0x8c,-0x1f,-0x54)](addLog,_0x5e0a15[_0x5bb4c9(0x20,0x16,0x7,0x1a)]);else{_0x5e0a15[_0x5bb4c9(-0x103,-0x8c,0x4,-0x19)](_0xa4da26,'轮询超时，服务器可能'+_0x45720c(0x323,0x39b,0x37f,0x331));throw new _0x129154(_0x5e0a15['LszqD']);}}}}
//# sourceMappingURL=http://localhost:8000/comfyui.js.map