(function(_0x4ce9b7,_0x4210f1){function _0x208e1a(_0x5d05f4,_0x55abe2,_0x50987d,_0x5a5afc){return _0x1840(_0x5d05f4-0x26f,_0x55abe2);}function _0x3f723a(_0x1d905f,_0x12b036,_0x4bf66f,_0x366773){return _0x1840(_0x1d905f- -0x104,_0x366773);}const _0x4858c0=_0x4ce9b7();while(!![]){try{const _0x50c4f5=parseInt(_0x208e1a(0x40a,0x39e,0x402,0x448))/(0x3*-0xa82+0x1*-0xb7c+0x2b03)+parseInt(_0x3f723a(0x106,0x180,0x8e,0x13e))/(-0x2271+-0xad*-0x22+0xb79)+parseInt(_0x208e1a(0x38e,0x319,0x2d5,0x323))/(0xefa+-0x3*-0x3f1+-0x1aca)*(-parseInt(_0x3f723a(0x109,0xd0,0x64,0xe0))/(0x18f0+0x25*-0x8f+-0x441))+-parseInt(_0x3f723a(0x56,0x60,0x6f,0x29))/(-0x12*-0xac+-0x17*-0x187+0x6a*-0x72)+-parseInt(_0x208e1a(0x4e1,0x42e,0x450,0x542))/(-0x6cb*0x2+0x20a2*-0x1+-0x1*-0x2e3e)*(-parseInt(_0x208e1a(0x403,0x387,0x3d4,0x42f))/(0x148*0xc+-0x1*-0x13bb+-0x2314*0x1))+parseInt(_0x3f723a(0x59,0x11,0x5a,0xd5))/(0xc91*0x1+0x3e*-0x92+0x16d3*0x1)+parseInt(_0x3f723a(0x1a,0xa7,-0x52,0x70))/(-0x1b94+0x8b0+0x55*0x39)*(-parseInt(_0x3f723a(0x12b,0x159,0x13a,0x162))/(0x270+-0x17ed+0x1587));if(_0x50c4f5===_0x4210f1)break;else _0x4858c0['push'](_0x4858c0['shift']());}catch(_0x4ac35a){_0x4858c0['push'](_0x4858c0['shift']());}}}(_0x563b,-0x6*-0x7b4+0x2ef83+0x8663*0x2));const _0x341e1f=(function(){let _0x4a583e=!![];return function(_0xc945e8,_0x93eabc){const _0x2ada13=_0x4a583e?function(){if(_0x93eabc){const _0x379aa0=_0x93eabc['apply'](_0xc945e8,arguments);return _0x93eabc=null,_0x379aa0;}}:function(){};return _0x4a583e=![],_0x2ada13;};}()),_0x407215=_0x341e1f(this,function(){const _0x1181fe={};_0x1181fe[_0xd8d232(-0x1ba,-0x52,-0x68,-0x103)]='(((.+)+)+)'+'+$';const _0x6a4b18=_0x1181fe;function _0xd8d232(_0x2c2463,_0x4f8fe8,_0x19b00b,_0x49e690){return _0x1840(_0x49e690- -0x2ce,_0x19b00b);}function _0x2000c3(_0x44f062,_0x272d02,_0x5dabd5,_0x21b2b5){return _0x1840(_0x272d02- -0x145,_0x21b2b5);}return _0x407215[_0x2000c3(0x94,0x62,0x6e,0x118)]()[_0xd8d232(-0x86,-0x15b,-0x1aa,-0x10f)](_0x6a4b18[_0x2000c3(0x6,0x86,0xc1,0xd3)])[_0x2000c3(0x2c,0x62,0xa0,0xcc)]()['constructo'+'r'](_0x407215)['search'](_0x6a4b18[_0x2000c3(0x13f,0x86,0x41,0x82)]);});_0x407215();import{sleep,generateRandomSeed,zhengmian,fumian,getRequestHeaders,prompt_replace,addLog,clearLog,parsePromptStringWithCoordinates,prompt_replace_for_character}from'./utils.js';import{extension_settings}from'../../../../extensions.js';import{extensionName,EventType}from'./config.js';function _0x563b(){const _0x57a52c=['mtf8mxW2Fde4','uM10wwi','z3rszg8','u0vSvNG','5z2q5Qch55Qe5O+q56s66k+n5A2x56YM5lIY44cc','zM9YBwf0','shPlA0u','ifbYB21WDa','vMHjCfe','Dxj1te0','qvbjioIVT+AXGUwKSEI0PsaO','Df9LBMq','ls0Tls0Tls0Tlq','zxvMt2m','y29TzNL1Av9ZyW','DwvJCwm','BfjMB3O','zty0ioAvSoAnRUwKHoEqHUoaGG','iIvZDgvWCYuI','5yIg6kEs6iMY5QIH5BYpoIdOP6pMNPdLUky','B3iGChjVBxb0oG','z1Pesge','y0TUAM8','yw4Gy2XPzw50kq','qwrVv3e','veHIvhq','uwTdCMO','kerPDMLKzv9YBW','wuXvyKG','6k+35Rgc5AsX6lsLloEkTUAaGEEGGtOG','y2XPzw50','ndqYnZa1rK52DNLk','5PYQ6io95lUoqvbj5zon5BQu5lIT5OM+','5PIV5zcM5zcV55sO5yIg6kEs6iMY5QIH5BYpia','mJyYnJeZnNPvB0n6Ea','ALryz3C','sNrftKK','5ywO6io95O+q56s66k+n57Yw6l6r5zMO','l3bYB21WDa','5BEY5PAT5BYa6l+E5O6L44cc','CNm6','57Yt5A2y6k6+572U5lI65lIn5A2y5ywL5PwW5O2U','cKngrYbty2fSzq','v3fOwg0','yuXKBLq','Cg5N','AwqGBM90ihjLDa','zMrwCuu','zxbZ','C2fTCgXLCL9Uyq','tufhrv9srvfvrq','Bwz5l2DLBMvYyq','q2HrwMC','CMvZCg9UC2uY','C3rYAw5NAwz5','zfrPtw8','AgfZt3DUuhjVCa','iIvZyw1WBgvYxW','zhrO','zw1PDa','zgf0ys4','BgvZktOG','y0fSBe8','rKviCMG','C2XhzMe','B0LpEMS','s0Pwwxm','qKnUtNi','CMvZDwX0','uLPhA2S','wfDht08','BMfTzt0','5lIT55QeihbYB21WDooaGG','qLzfBhy','v05qzem','y2rAqw4','tMntrLe','s0DNzge','q29TzNL1AuXPCW','iIvPCgeLiG','lcdOR6BMG4u6ia','yuvcug4','uwLitLC','C2vLza','jNr5Cgu9B3v0Ca','B2rVAMm','5yYw5lI6igrHDgeGvvi','r0XfEfK','ChjVBxb0','mtC2nZv0zvzetha','AfjRvKe','Aw1Hz2vZ','6l2U6k+I5y6g5y+Y6k6W5B2v5PE25yE66zszoG','y2HHBMDL','thLgv0C','wgPzwwi','mZmZmtCWz2n3qMrn','CMvWBgfJzufSBa','A3DIDfe','y19Mzw53zwK','DxnvAe0','y29TzNL1AxnHBq','B3v0Chv0CW','BMvNyxrPDMvqCG','5zU+5yop5BEY5A2y5ywL5PwW5O2U5BQtigy','y19XDwfUEMHVBG','y29TzNL1AsdNLj/LM74','ktOG','Dg9tDhjPBMC','5lQl5lU255Ur5zcS5zMO5BEY5ywZ6zET44cc','DwD1yw4Gy2XPzq','wunYq28','ywvNzMW','zMLSzw5HBwu','C3vJy2vZCW','y2zNx3nJywXL','CLPewuq','wfvmBuu','wg5fD04','iIvZy2HLzhvSzq','rvjrwLO','5lQl5lU255Ur5zcS5zMO5BEY5yID5AEl5yYw44cc','uhfbu3O','5yIW5PAh5lU25zcn44cc','CMvHzefZrgf0yq','ChjVBxb0x2LK','6l+E5O6L5zco6ycj5OUP','C2nOzwr1BgvY','tu9eruXFtKfnrq','swfMqu8','BMvNyxrPDMvFCa','ohW2Fde0Fde1Fa','C2vHCMnO','DLzHBKK','sLnptIdOP6pMNPdLPlhOTkxVViW','y29TzNL1Av93Aq','suq6ia','q3HiBxe','y2vKltm3zdi5ma','yxbWBgLJyxrPBW','ChPmDgC','6l2U6k+I6lAf5PE277Ym5PYn5yQH5zMO5y+V6io9','yu95Axy','zM5wvuC','qMHvwva','iIv2ywuLiG','AwDODa','rvL1wLi','uKPQtwq','ChPNDuW','Eu1mqxK','cI0TlsdNLj/LM77LJ4lMLBdMIQu','q2HHCMfJDgvYia','pgXVCMe6','zvzXy1K','u2nLBMuGq29TCa','u3L1v0m','u09XAey','v0jRuM0','EhnvCgi','EvH0rfy','C3rHDhvZ','zgf0yq','CMvTB3zLtgLZDa','B3nPDgLVBG','Dgv4Da','vgfTsLy','C1rWwfG','EufqzMi','v0rhD2i','iIv3Awr0AcuI','B2fgtKK','DLvhBu0','55sF5zU+5Rwb56Il5O2v6i635yIW5BYc5BI4ia','EgLHBMnOzw5N','u1jXsw4','owmWltrLmZKToq','DMfL','wMnKDuS','DgvUzxi','CM9TChq','v2Lbswe','y19Pzhf1yw56Aa','r0T0Ava','ksaTifbYB21WDa','wffTB1i','D2LKDgG','phDSCJO','Bwz5DwK','Bg9N','iIvJzMDFC2nHBa','tLLJte0','C3rLChm','qvbjiowtJEw6Los4REAYOEACIEwBVG','ANnVBG','qvfux2nVBwz5Dq','CMvWBgfJzq','qxHTzge','6k+VoIa','yxjKA3m','oxWXnNWZFdb8nW','C3vQt20','tLnf','Fdv8mtL8mtv8na','r0vorvjbvevFsq','BgHlsvy','zhnMvwq','nZm0ntKWBuD2tu5K','uvjVvwW','AxbH','mJb0s0TbweW','zsuI','y29TzNL1Av9Ozq','cUI0N+MDOUApKoEKUUIVJtOG','oJe+','sufpzKi','q3jSENm','B25N','y29TzNL1Aq','C3newLy','rxH6qu8','y29TzNL1AvvYBa','sgLZDg9YEsbYzq','6lsF6z2I5O+q56s66k+noIa','uurdufy','ue9tva','rvbxqxy','iIvJx3HPAMLLjq','BIuI','rKfns1e','z2u6','l2fWAs9Zzc9JBW','wLDWr0O','wuLZAwm','l2HPC3rVCNKV','y0Dxqu4','Cgf5Bg9HzdiYmG','iIvWCM9TChqLiG','CIuI','t1DluLa','iIvnt0rftf9oqq','iIvJx2LKCxvHBG','B2jXz0q','5zU+54Mh55sF5OIq6l+h56Il5lIT5y+r55sF6zsz','mJG2mJKWvg5yBKrV','ufbkqLK','ExvZAgvPzf9JBW','B0j1Cui','t0j5CxO','ntmZzwyZytmTmW','y29TzNL1Av9Zzq','zML4zwrqCM9TCa','BMfTzsuI','BgvUz3rO','tuuLiG','BMffBva','AML1z3vHBIbJBa','5y+r6ycb55sF5zU+5AsX6lsL5zon5BQuicG','uujVAg4','vLPoz0y','iIvZzwvKjsi','5PYQ6io955sF5OIq5zU+54Mhifvsta','EYjJBgLLBNrFAq','rg9Qwe0','mtz8m3W5Fdv8mq','EMHVBMCLiG','D29YA2vY','s2HWwuK','cUMhH+AGT+wzQdOG','ufHPtLq','cI0Tls0Tls0Tlq','y29TzNL1AwnHBG','twX6z3a','s1jqt0S','A2fVDhvWAwfU','6k+35AgR5yAzq29TzNLvsq','ueP2DwW','Aw1Hz2veyxrH','u0j5sxu','54Mh5PwW5O2UicHQAxvNDq','t2L2vxe','5y+r6ycb5yIWienVBwz5vq','zMv2v1y','6zsz6k+VoIa','A0LwC3K','sLnVtei','Bwv0Ag9K','uwzwDuG','qvfIquW','cUwWUUwVUdOG','CgXLCK5HBwu','6k+35Rgc5Bc65A+4oIdLRR3LUQyGlq','5Ps25yIW55sF5zU+6k+35RgcicHjra','q0X5B1m','yxbWBhK','tgXksgW','DNDoAgG','zxj0Eq','rw5KCg9PBNqGza','zgLYzwn0ignVBq','6i635y+w5zU+54Mh5AsX6lsLloEkTUAaGEEGGq','yK5nt2O','y194AwPPzq','zxjYB3i','zMzWqLa','B25LCNjVCG','AvzIt1G','rvr2thK','Dg9Rzw4','iIvOzwLNAhqLiG','DhjPBq','mZa2s3zYEgTL','zgPQEue','B3L0v1m','shLTtxi','EuXus0i','ENHSs3y','cLzbrtOG','ANPYyLy','tfDSsNy','iIvJB21MExvPyW','C3bSAxq','EM15uvi','D0LuEuy','vunqx2nVBwz5Dq','wwPxC3O','wwTHCuq','6l2U6k+I5PE25y+r55sF5BYc5BI4oIa','y29TzNL1Av9ZDa','CMf0Aw5NigLTyq','BwvZC2fNzq','cUAOOEwEIZOG','DxjUigLTywDLia','CgTLBfO','u21Tywm','lcdPQ5JLUQyGlsa','CgfYC2u','AgvPz2H0','x3bYB21WDcuI','C0Pwt1a','AfHYy1O','v0PLzvm','ssdNMOtMNidNU4GGCgf5Ba','zci6iG','EfvSsLq','A0PtC1C','BKXtuw8','B25SB2fKzw5K','tufhrv9srvnqtW','zwq6ia','DxjS','odfTtK5Qrhy','mZiYoty4rhLpv2fU','cUATPEAvSdOG','iIvJx2zLBNDLAq','CffkANe','B1j1sMG','iIvUzwDHDgL2zq','DgLZAg0','wfPRBK4','AgzvtgK','cUENJEwTKdOG','AgvKDwXLCG','q29UDgvUDc1uEq','rxjYB3iGz2vUzq','B25Njsi','lNnHzMv0zw5ZBW','Euvvyxa','ExvYCK4','5zMO6lAf5PE244cc','BLbgrgm','Aw5PDgLHBgL6zq','ExvZAgu','B21WDa','Aw5JBhvKzxm','C25zwwy','DMXLueW','vNnMCLm','q1jgq20','cLnJAgvKDwXLCG'];_0x563b=function(){return _0x57a52c;};return _0x563b();}import{setItemImg}from'./database.js';import{saveChatDebounced,saveSettingsDebounced,eventSource}from'../../../../../script.js';import{initializeImageProcessing}from'./iframe.js';async function replacepro(_0x4de4f8,_0x357b5e){function _0x25589c(_0x2d888a,_0x57a2f0,_0x13cdd6,_0x57095e){return _0x1840(_0x13cdd6- -0x2a8,_0x57095e);}function _0x32382a(_0x355cf3,_0x279952,_0x3fc52b,_0x4c2d1a){return _0x1840(_0x279952- -0x1b3,_0x3fc52b);}const _0x42e1b0={'cAllO':'payload222','XQmoR':_0x32382a(-0x13c,-0x8f,-0xe,-0x55)+_0x25589c(-0x164,-0x1ca,-0x197,-0x1d2),'QDCPV':function(_0x2ca63f,_0x4f657b){return _0x2ca63f+_0x4f657b;},'ffpBP':function(_0x374b69,_0x5c1209){return _0x374b69(_0x5c1209);},'CLyoS':_0x32382a(0xcc,0x78,-0x1,0x2b)+'ME%\x22','dTiMo':function(_0x5b4db6,_0x443933){return _0x5b4db6+_0x443933;},'cAaAb':_0x25589c(-0xd6,-0x107,-0x7c,-0x18)+_0x32382a(0xc1,0x91,0x137,0x136),'tishm':_0x25589c(-0x137,-0x153,-0x187,-0xea)+'%\x22','yAPfb':'\x22%steps%\x22','hVYOB':'\x22%c_quanzh'+_0x25589c(-0x237,-0x154,-0x17c,-0x17a),'wITyF':function(_0x33972d,_0x5c053e){return _0x33972d(_0x5c053e);},'MhGaD':function(_0x21454d,_0x41b4a8){return _0x21454d(_0x41b4a8);},'hXrcZ':_0x32382a(0xe1,0x32,0x4e,0xe0),'YjWsz':function(_0x2e18d4,_0x53c7ac){return _0x2e18d4(_0x53c7ac);},'rZDYD':'\x22%vae%\x22','fnVUG':function(_0x52ce95,_0x31aa62){return _0x52ce95+_0x31aa62;},'QfVuH':function(_0x565347,_0x475323){return _0x565347+_0x475323;},'VhIpQ':_0x32382a(-0x72,-0x29,-0x6,-0xc7),'EXCah':_0x25589c(-0x75,-0x80,-0x80,-0x75),'vlePL':function(_0x1425f6,_0x48339a){return _0x1425f6+_0x48339a;},'xVExf':_0x25589c(-0x50,-0x81,-0x8a,0x1a)+'\x22','pQJjq':_0x32382a(0x1d,0xbd,0x174,0x43),'WqhXm':function(_0x16ee9f,_0x47509d){return _0x16ee9f(_0x47509d);}},_0x447497=('0|11|7|2|1'+'7|12|19|1|'+_0x32382a(0xa5,0x90,0xae,0x4c)+_0x32382a(-0x50,0xb,0xb3,-0x5a)+'4|13|10|8')[_0x25589c(-0xcc,-0x47,-0x2c,0x52)]('|');let _0x1835ff=0x1*0x2572+-0xc1*0x7+-0x3d*0x87;while(!![]){switch(_0x447497[_0x1835ff++]){case'0':console[_0x32382a(0xa3,0x45,0x8b,0xf7)](_0x42e1b0[_0x32382a(-0x22,-0x3a,-0xbb,-0x9a)],_0x4de4f8);continue;case'1':_0x357b5e=_0x357b5e['replaceAll'](_0x42e1b0[_0x32382a(-0x34,0x41,-0x5e,-0x1e)],''+_0x42e1b0[_0x32382a(0x11c,0x68,0x10f,0xd7)](_0x42e1b0['QDCPV']('\x22',_0x4de4f8[_0x25589c(-0x13b,-0x9c,-0xeb,-0x37)+_0x25589c(-0x169,-0xa1,-0xb9,-0x12e)]),'\x22'));continue;case'2':_0x357b5e=_0x357b5e['replaceAll'](_0x25589c(-0x8b,-0x127,-0xaf,-0x12f)+_0x32382a(0x7f,0x5b,-0x29,0x100),_0x42e1b0[_0x25589c(0xb,0x52,-0x3d,-0xf5)](Number,_0x4de4f8[_0x32382a(-0x16,-0x5,-0x8a,-0x1e)]));continue;case'3':_0x357b5e=_0x357b5e['replaceAll'](_0x42e1b0[_0x32382a(0x88,0xad,0xa9,0x164)],'\x22'+_0x4de4f8[_0x32382a(-0x27,0x8,0xa1,-0x64)]+'\x22');continue;case'4':_0x357b5e=_0x357b5e[_0x25589c(-0x16d,-0x19b,-0x10c,-0x104)](_0x32382a(0x10,-0x1,-0x85,-0x22)+_0x25589c(-0xf4,-0x12b,-0x7f,-0x51),''+_0x42e1b0['QDCPV'](_0x42e1b0[_0x32382a(-0x82,-0x41,0x7a,-0x7)]('\x22',_0x4de4f8[_0x32382a(0x64,0x7,-0xa7,0x1)]),'\x22'));continue;case'5':_0x357b5e=_0x357b5e[_0x25589c(-0x1a0,-0xf7,-0x10c,-0x4f)](_0x42e1b0['cAaAb'],Number(_0x4de4f8[_0x25589c(-0x8,-0x8a,-0xb7,-0x104)+_0x25589c(-0x16,-0x107,-0x94,-0x103)]));continue;case'6':_0x357b5e=_0x357b5e['replaceAll'](_0x42e1b0[_0x25589c(-0xd9,-0x201,-0x183,-0xf0)],_0x42e1b0[_0x32382a(0x31,0xb8,0xc4,0xef)](Number,_0x4de4f8[_0x32382a(-0x1c,-0x15,0x3c,0x18)]));continue;case'7':_0x357b5e=_0x357b5e[_0x32382a(-0x72,-0x17,0x24,0x14)](_0x42e1b0[_0x32382a(0x1,0x30,0x53,-0x72)],_0x42e1b0[_0x32382a(0x3b,0xb8,0xcc,0xd7)](Number,_0x4de4f8[_0x25589c(-0x114,-0x91,-0xad,-0x49)]));continue;case'8':return _0x357b5e;case'9':_0x357b5e=_0x357b5e[_0x25589c(-0xb4,-0x121,-0x10c,-0x131)](_0x42e1b0['hVYOB'],_0x42e1b0[_0x25589c(-0x165,-0x190,-0x1a6,-0x15f)](Number,_0x4de4f8[_0x25589c(-0x14b,-0x111,-0x104,-0x96)+'g']));continue;case'10':console[_0x25589c(-0x153,-0x128,-0xb0,-0x16b)](_0x357b5e);continue;case'11':_0x357b5e=_0x357b5e[_0x25589c(-0x1aa,-0x104,-0x10c,-0x161)]('\x22%seed%\x22',_0x42e1b0['MhGaD'](Number,_0x4de4f8['seed']));continue;case'12':_0x357b5e=_0x357b5e['replaceAll'](_0x42e1b0[_0x25589c(-0x15c,-0x1ea,-0x195,-0x132)],_0x42e1b0[_0x32382a(-0xb8,-0xaf,-0x152,-0xdf)](Number,_0x4de4f8['width']));continue;case'13':_0x357b5e=_0x357b5e['replaceAll'](_0x42e1b0[_0x32382a(0x29,-0x4,0x9b,0x8d)],''+_0x42e1b0[_0x25589c(-0x190,-0xef,-0xde,-0x3e)](_0x42e1b0[_0x32382a(0x75,0xa7,0x10,0x47)]('\x22',_0x4de4f8[_0x32382a(-0x60,0x39,-0x1c,0x83)]),'\x22'));continue;case'14':_0x357b5e=_0x357b5e[_0x25589c(-0x177,-0x121,-0x10c,-0x136)]('\x22%comfyuic'+'ankaotupia'+_0x32382a(0xde,0x6c,0x6,0xf3),''+(_0x42e1b0['QfVuH']('\x22',_0x4de4f8[_0x32382a(0x5a,0x97,0x56,0x56)+_0x32382a(0xbe,0x9a,0x7d,0x72)])+'\x22'));continue;case'15':_0x357b5e=_0x357b5e['replaceAll'](_0x42e1b0[_0x32382a(0x3e,-0x70,-0x4,-0xe4)],''+(_0x42e1b0['dTiMo']('\x22',_0x4de4f8[_0x25589c(-0x12d,-0xa7,-0x9c,-0xe5)])+'\x22'));continue;case'16':_0x357b5e=_0x357b5e[_0x25589c(-0x139,-0x1b1,-0x10c,-0x12f)](_0x42e1b0['EXCah'],''+_0x42e1b0[_0x25589c(-0x1dc,-0x1a2,-0x171,-0x171)]('\x22'+_0x4de4f8[_0x25589c(-0x16e,-0x99,-0x115,-0x11b)],'\x22'));continue;case'17':_0x357b5e=_0x357b5e['replaceAll'](_0x25589c(-0xf0,-0x14b,-0x134,-0xac)+_0x32382a(0x140,0x84,0xdd,0xa3),''+_0x42e1b0[_0x32382a(-0x13a,-0x7c,0xc,-0x3d)]('\x22'+_0x4de4f8[_0x32382a(0x15,-0x47,-0x101,0x2b)+'me'],'\x22'));continue;case'18':_0x357b5e=_0x357b5e[_0x32382a(-0x3e,-0x17,-0x28,0x6b)](_0x42e1b0['xVExf'],_0x42e1b0['MhGaD'](Number,_0x4de4f8[_0x32382a(0xfd,0xb6,0x134,0x99)]));continue;case'19':_0x357b5e=_0x357b5e[_0x25589c(-0x1a1,-0x122,-0x10c,-0x17c)](_0x42e1b0[_0x25589c(-0x19a,-0x1e4,-0x186,-0x104)],_0x42e1b0[_0x32382a(-0x44,-0x4d,-0xed,-0x8c)](Number,_0x4de4f8['height']));continue;}break;}}function _0x1840(_0x5f0354,_0x5f0116){const _0x5ee108=_0x563b();return _0x1840=function(_0xb593e5,_0x1cf22e){_0xb593e5=_0xb593e5-(0x80+0x3*0xa0e+-0x49*0x68);let _0x11c981=_0x5ee108[_0xb593e5];if(_0x1840['nNIwMs']===undefined){var _0x1bf919=function(_0x5c7f1c){const _0x951beb='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x3c38a3='',_0x10afdc='',_0x5f1c4e=_0x3c38a3+_0x1bf919;for(let _0x31085f=0x56*0x4c+-0x274*0x2+-0x14a0,_0x37743e,_0xfcc68b,_0x330e53=-0x5cd+0x26ac+-0x20df;_0xfcc68b=_0x5c7f1c['charAt'](_0x330e53++);~_0xfcc68b&&(_0x37743e=_0x31085f%(-0x5*0xa3+-0xb*-0x2e9+-0x1cd0)?_0x37743e*(-0x10c9*-0x1+-0x1*-0x1c99+-0x2d22)+_0xfcc68b:_0xfcc68b,_0x31085f++%(-0x6*0x614+0x1dd6+0x6a6))?_0x3c38a3+=_0x5f1c4e['charCodeAt'](_0x330e53+(-0x2*-0x8bf+0xe87*-0x1+-0x7*0x6b))-(-0x1748+-0x1fc*-0x8+-0x2*-0x3b9)!==-0x166a*0x1+-0x52*-0x59+-0x14*0x4e?String['fromCharCode'](0x105*0x17+-0x2365+-0xcf1*-0x1&_0x37743e>>(-(0x3*0x709+-0x2121+0x46*0x2c)*_0x31085f&0x1365+-0xd21+-0x5e*0x11)):_0x31085f:-0x4*-0x7b5+0x4*0x710+-0x3b14){_0xfcc68b=_0x951beb['indexOf'](_0xfcc68b);}for(let _0x3cea7f=-0x188f+-0x2*-0x101+0x168d,_0x4b7fdf=_0x3c38a3['length'];_0x3cea7f<_0x4b7fdf;_0x3cea7f++){_0x10afdc+='%'+('00'+_0x3c38a3['charCodeAt'](_0x3cea7f)['toString'](0x580+-0x260b+-0x1eb*-0x11))['slice'](-(0xc*-0x1a2+-0x1*0x1a6e+0x2e08));}return decodeURIComponent(_0x10afdc);};_0x1840['agIcHe']=_0x1bf919,_0x5f0354=arguments,_0x1840['nNIwMs']=!![];}const _0x428abe=_0x5ee108[-0x5b9*0x5+0x35*-0x53+0x2dcc],_0x1e33c0=_0xb593e5+_0x428abe,_0x3d49de=_0x5f0354[_0x1e33c0];if(!_0x3d49de){const _0x13f101=function(_0x26c46f){this['keJAHn']=_0x26c46f,this['pITKSc']=[-0xd08+0x1ebd+-0x11b4,-0x1d10+0x2f*0xa3+-0xdd,-0xe4b*0x2+0x1f99+-0x303],this['YPYCyx']=function(){return'newState';},this['xMoeuF']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['tTEwUo']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x13f101['prototype']['YfzntV']=function(){const _0x21e620=new RegExp(this['xMoeuF']+this['tTEwUo']),_0x4d0efc=_0x21e620['test'](this['YPYCyx']['toString']())?--this['pITKSc'][0x1e48+0x17d1+-0x3618*0x1]:--this['pITKSc'][-0x77d+0x1541*0x1+-0xdc4];return this['HQJWjF'](_0x4d0efc);},_0x13f101['prototype']['HQJWjF']=function(_0x579869){if(!Boolean(~_0x579869))return _0x579869;return this['HRGQKc'](this['keJAHn']);},_0x13f101['prototype']['HRGQKc']=function(_0xdd9301){for(let _0x8b5a8d=-0x2467+0xd*0x281+-0x11*-0x3a,_0x3a923f=this['pITKSc']['length'];_0x8b5a8d<_0x3a923f;_0x8b5a8d++){this['pITKSc']['push'](Math['round'](Math['random']())),_0x3a923f=this['pITKSc']['length'];}return _0xdd9301(this['pITKSc'][-0xb46+0x28b+0x8bb]);},new _0x13f101(_0x1840)['YfzntV'](),_0x11c981=_0x1840['agIcHe'](_0x11c981),_0x5f0354[_0x1e33c0]=_0x11c981;}else _0x11c981=_0x3d49de;return _0x11c981;},_0x1840(_0x5f0354,_0x5f0116);}export async function generateComfyUIImage({prompt:_0x49f371,width:_0x28108d,height:_0x148ed5,change:_0x4ad901}){const _0x250835={'vwNhh':'标准模式:\x20使用请求'+_0x4329b9(-0xff,-0x98,-0x83,-0x16f),'OByqz':function(_0x2318f4,_0x49313e){return _0x2318f4+_0x49313e;},'JSoLB':function(_0x55f181,_0x6ec1ed){return _0x55f181(_0x6ec1ed);},'jzrbV':_0x4329b9(-0x86,-0x33,-0x11f,-0x5e)+_0x806c95(0x25d,0x247,0x19f,0x2db)+_0x4329b9(-0x130,-0x83,-0xae,-0x138)+'。','uehUH':function(_0x4e03ab,_0x375e57){return _0x4e03ab!==_0x375e57;},'RmtYb':_0x4329b9(-0x7f,-0x6a,-0x83,-0x130)+_0x806c95(0x211,0x1dd,0x20d,0x1cb)+'|17|2|10|1'+'4|13|8|12|'+_0x806c95(0x146,0x1f1,0x1be,0xb0),'TamJV':function(_0x1004e8,_0x141990){return _0x1004e8(_0x141990);},'aLdnT':_0x806c95(0x158,0x1b0,0x171,0x1ab),'eufOc':function(_0x3a2e26,_0x188578){return _0x3a2e26(_0x188578);},'ERQZZ':'\x22%prompt%\x22','Axmda':_0x4329b9(-0x9d,-0xb8,-0x62,-0x14c),'WbESd':'\x22%sampler_'+_0x806c95(0x242,0x1af,0x1b4,0x263),'aegfl':_0x4329b9(-0x56,-0x7b,-0xb1,-0xad)+_0x4329b9(-0x3e,0x2c,-0x7c,0x22),'lhKIV':function(_0x2717e3,_0x43815e){return _0x2717e3(_0x43815e);},'vvHbr':'\x22%ipa%\x22','oIOzk':_0x4329b9(-0x57,-0xca,-0xcf,0x56)+_0x806c95(0x244,0x262,0x269,0x1a8),'THbTt':_0x806c95(0x27b,0x21d,0x22b,0x1fe),'xMxkt':function(_0x2055c2,_0x29c10c){return _0x2055c2(_0x29c10c);},'SByIu':'ComfyUI\x20服务'+_0x806c95(0x13b,0xbb,0x16e,0xd8),'yurrN':_0x4329b9(-0xae,-0x1a,-0x116,-0x122),'ExzAO':_0x4329b9(-0x8c,-0x113,-0x12a,-0xed),'NYcLM':_0x806c95(0x138,0xbb,0x95,0x1bc)+'rs','IafAO':_0x806c95(0x159,0xa4,0x1c2,0xf7)+_0x806c95(0x14a,0xb5,0x104,0x1e4),'odojc':function(_0x4d19f1,_0x479448){return _0x4d19f1(_0x479448);},'Smmac':_0x806c95(0x1e1,0x20c,0x21a,0x265)+_0x4329b9(-0xa3,-0xa7,-0xe4,-0x74),'PPJBY':function(_0x166588,_0xb47aab){return _0x166588<=_0xb47aab;},'cKnjo':function(_0x38a432,_0x267140){return _0x38a432+_0x267140;},'pzguL':function(_0x53c24e,_0x580762){return _0x53c24e>_0x580762;},'mPRtn':function(_0x93a10a,_0xa1b705){return _0x93a10a(_0xa1b705);},'xsUpb':function(_0x1b5413,_0x29743d){return _0x1b5413===_0x29743d;},'ardks':_0x4329b9(-0x5e,-0x10d,-0x95,-0xe7),'RJjMd':function(_0x68f0ee){return _0x68f0ee();},'fdVqE':function(_0x1e1bb1){return _0x1e1bb1();},'NcSFQ':function(_0x59a58e,_0x26c539){return _0x59a58e(_0x26c539);},'sujOm':function(_0x4de70d,_0x5fafbb){return _0x4de70d(_0x5fafbb);},'slGfa':function(_0x1c5c07,_0x357a3d){return _0x1c5c07||_0x357a3d;},'Mlzgp':function(_0x5025ad,_0xda3769){return _0x5025ad===_0xda3769;},'GKtiP':_0x4329b9(-0xc9,-0xe6,-0x68,-0x173),'lKLOv':function(_0x1fb220,_0x597146){return _0x1fb220===_0x597146;},'foLCr':_0x4329b9(-0xcd,-0xe4,-0xe9,-0x9a),'TswIj':_0x4329b9(-0x34,-0x8a,-0xbc,0x81)+'模型。','AdoWq':function(_0xa0395a,_0x40f665){return _0xa0395a(_0x40f665);},'vUGmM':function(_0x58dd61,_0x422ee8){return _0x58dd61(_0x422ee8);},'CRFCm':_0x806c95(0x117,0x9d,0xaa,0x178),'IfVGC':_0x806c95(0x1bb,0x1a8,0x1cd,0x1f5),'oRuJh':function(_0x4e5d86,_0x27856b){return _0x4e5d86+_0x27856b;},'pYlWC':_0x4329b9(-0x15,0x10,0x47,-0x21),'hRkVA':_0x4329b9(-0x12d,-0x7a,-0x156,-0x11e),'QBohn':function(_0x4ded43,_0x34ddf4){return _0x4ded43(_0x34ddf4);},'WiAIa':function(_0x49bd3a,_0x493065){return _0x49bd3a<=_0x493065;},'PJvul':function(_0x211ec1,_0x39aa41){return _0x211ec1!==_0x39aa41;},'LWlJv':_0x4329b9(-0xfa,-0x1a5,-0x19a,-0x181),'zmyQR':function(_0x505f34,_0x1dfc35){return _0x505f34!==_0x1dfc35;},'IAOfB':_0x4329b9(-0xa7,-0x14b,-0x14e,-0xe3),'lRfoz':function(_0x398031,_0x3ea2de){return _0x398031+_0x3ea2de;},'SRqIn':function(_0xdeb794,_0x39575d){return _0xdeb794(_0x39575d);},'KRPOK':function(_0x5896d6,_0x1f1143,_0x11ee56,_0x53edf9,_0x22ea77,_0x34fa4e){return _0x5896d6(_0x1f1143,_0x11ee56,_0x53edf9,_0x22ea77,_0x34fa4e);},'naEmP':_0x806c95(0x1e2,0x176,0x1af,0x1e5),'bmOyw':_0x806c95(0x19e,0x111,0x248,0x117),'Crlzs':function(_0x412673,_0x24b48a){return _0x412673(_0x24b48a);},'FEHrh':function(_0x2b1998,_0x3e82d2,_0x2a46f7){return _0x2b1998(_0x3e82d2,_0x2a46f7);},'rbnEo':_0x4329b9(-0x122,-0x186,-0x1d3,-0x16a),'SOqhF':_0x806c95(0x23f,0x1b1,0x2c7,0x203)+_0x4329b9(-0x97,-0x37,-0x10,-0x72)+_0x806c95(0x1d0,0x160,0x161,0x1da)+'f371f8','arrwN':'OAWjj','WNPdC':_0x4329b9(-0xa0,-0xa8,-0xc4,-0x9e),'YLUbH':function(_0x1011ad,_0x1e8a95){return _0x1011ad===_0x1e8a95;},'sLxZF':'jiuguan','WDGwb':function(_0x528d52,_0x30065c){return _0x528d52(_0x30065c);},'xUlJT':function(_0x55da01,_0x53a4c4){return _0x55da01===_0x53a4c4;},'aEBPn':'hfULi','AkPsp':_0x4329b9(-0xe9,-0x122,-0x163,-0xb9),'uecqc':_0x4329b9(-0xe5,-0x12b,-0xdf,-0x194),'GLExY':_0x806c95(0x1cc,0x1d7,0x177,0x140)+'尝试作为原始\x20Bas'+_0x4329b9(-0x136,-0x147,-0xc7,-0xd2),'OWKRP':_0x4329b9(-0x77,-0x103,-0x7d,0x2f),'VZNgF':'Endpoint\x20d'+_0x806c95(0x174,0x154,0xc7,0x10e)+_0x4329b9(-0x177,-0xef,-0xd4,-0x213)+_0x4329b9(-0x10b,-0x9c,-0xd7,-0x14c),'ETvLy':function(_0x160910,_0x53b333){return _0x160910(_0x53b333);},'uruLM':'图片生成成功\x20(ji'+_0x4329b9(-0xd9,-0xdd,-0x15c,-0x166)+'nt)。','ocycP':_0x806c95(0x16c,0x109,0x16b,0x223),'FdVlo':_0x4329b9(-0xbc,-0x125,-0x168,-0x3b)+'n/json','vVanI':_0x4329b9(-0x15c,-0x104,-0x1fb,-0x197),'ChQZg':function(_0x44a75b,_0x3bb289){return _0x44a75b===_0x3bb289;},'snYYf':'ZaOam','yMLAy':_0x806c95(0x1bc,0x1c7,0x1fc,0x10c),'CxHmq':function(_0x41ff18,_0x25c80b){return _0x41ff18(_0x25c80b);},'PXiNT':'YfiTq','eVqcY':_0x4329b9(-0x112,-0x136,-0x1c8,-0x128),'iYKnO':_0x806c95(0x231,0x199,0x28e,0x2c2),'HzKkE':'图片生成成功\x20(di'+'rect\x20comfy'+'ui)。','YCrCo':_0x4329b9(-0xe1,-0x5f,-0x68,-0x104),'SybPU':_0x806c95(0x166,0x16a,0x143,0xe5)+_0x4329b9(-0xcc,-0x163,-0x2c,-0x111),'WJeeS':_0x806c95(0x1aa,0x24c,0x24c,0x1c4),'sJVOP':function(_0x17cd7e,_0x49b21d){return _0x17cd7e(_0x49b21d);},'kJSsW':_0x4329b9(-0xba,-0x10c,-0x11,-0xd)+_0x806c95(0x16d,0x179,0x111,0x12b),'nLSQo':_0x4329b9(-0x42,-0x83,-0x87,-0x4)+'。','djjyA':function(_0x139b2f,_0x5df739){return _0x139b2f(_0x5df739);},'nPFDc':'图像已成功获取并格式'+_0x4329b9(-0xf1,-0x192,-0x4d,-0x11a)+'L。'};_0x250835['RJjMd'](clearLog),_0x250835[_0x4329b9(-0xfb,-0xad,-0x8e,-0x17a)](addLog,'开始\x20ComfyUI'+'\x20生图流程。客户端为'+extension_settings[extensionName][_0x4329b9(-0x129,-0x96,-0x1aa,-0x11d)]);function _0x806c95(_0x4326aa,_0x5a7feb,_0x578691,_0x797eed){return _0x1840(_0x4326aa-0xb,_0x578691);}_0x250835[_0x806c95(0x20f,0x160,0x20f,0x24f)](addLog,_0x806c95(0x269,0x315,0x2d9,0x2df)+'\x20'+(_0x28108d||'默认')+_0x4329b9(-0x174,-0x1c0,-0x16d,-0x132)+_0x250835[_0x4329b9(-0x107,-0x119,-0x154,-0xf2)](_0x148ed5,'默认'));if(_0x250835['Mlzgp'](extension_settings[extensionName][_0x4329b9(-0xc7,-0x106,-0x139,-0x9b)][_0x806c95(0x27c,0x1d4,0x233,0x1d6)](),_0x250835[_0x806c95(0x1fd,0x168,0x287,0x183)])){if(_0x250835['lKLOv'](_0x250835['foLCr'],_0x806c95(0x1c0,0x10e,0x1a1,0x1cf))){addLog(_0x250835['TswIj']),toastr['error'](_0x806c95(0x259,0x1df,0x253,0x219)+'模型。');return;}else _0x31e528=!![];}const _0x1e18d0=extension_settings[extensionName][_0x806c95(0x223,0x2ac,0x2b0,0x16e)][_0x806c95(0x27c,0x324,0x2d3,0x299)](),_0x432408=_0x4ad901&&_0x4ad901[_0x4329b9(-0x11,0xd,-0x69,0x43)]()!==''?_0x4ad901:_0x49f371;_0x250835[_0x806c95(0x15e,0x181,0x1e5,0xd8)](addLog,'用于生成的Tag:\x20'+_0x432408);let _0x380ad8=![];_0x432408['includes'](_0x4329b9(-0xac,-0x23,-0x109,-0x152)+_0x4329b9(-0xa3,-0x142,-0x7f,0xe))&&(_0x380ad8=!![]);_0x250835['vUGmM'](addLog,_0x806c95(0x167,0x1d5,0x1bd,0x103)+_0x4329b9(-0x12c,-0x80,-0x1c1,-0xad)+_0x806c95(0x183,0x200,0x1d5,0x11b)+_0x380ad8);let _0x2d59e0={},_0x30f8aa='',_0x267d5d='';if(_0x380ad8){_0x250835['odojc'](addLog,'分角色模式:\x20解析带'+_0x4329b9(-0x143,-0xf6,-0xab,-0x97)),_0x2d59e0=_0x250835[_0x4329b9(-0xf2,-0x36,-0x102,-0x185)](parsePromptStringWithCoordinates,_0x432408),_0x30f8aa=_0x2d59e0[_0x250835[_0x806c95(0x118,0x152,0xcb,0xa8)]];for(let _0x4e1737=0xd6*-0x1+0x10*0x53+-0x35*0x15;_0x250835[_0x4329b9(-0x52,-0x1c,-0x107,0x11)](_0x4e1737,-0x306*0x1+-0x9*-0x311+-0x1*0x188f);_0x4e1737++){_0x250835[_0x4329b9(-0xa8,-0x161,0x8,-0xdf)](_0x250835[_0x4329b9(-0x149,-0x12e,-0xdf,-0x141)],_0x250835['IfVGC'])?(_0x339464(_0x250835[_0x806c95(0x26e,0x21e,0x258,0x2e0)]),_0x36273b=_0x43ad3e):_0x2d59e0[_0x806c95(0x1de,0x1ab,0x21f,0x1f7)+_0x4e1737+_0x4329b9(-0x140,-0x1dd,-0xb4,-0x1c5)]&&(_0x267d5d=_0x250835[_0x806c95(0x12e,0xb2,0x1cc,0x1bb)](_0x250835['cKnjo'](_0x267d5d,',\x20'),_0x2d59e0[_0x4329b9(-0xaf,-0x82,-0x4a,-0x14)+_0x4e1737+'\x20Prompt']));}}else _0x250835['pYlWC']===_0x250835[_0x4329b9(-0xed,-0x121,-0xe0,-0x13b)]?_0x4a8e5a=_0x250835['OByqz'](_0xcf26e1+',\x20',_0xa9c939(_0x35fe91[_0x4329b9(-0xaf,-0x8f,-0x101,-0x143)+_0x3fad5c+_0x806c95(0x14d,0x113,0x147,0xca)])):(_0x250835[_0x4329b9(-0x45,-0x9d,-0xd6,-0x2)](addLog,_0x250835[_0x806c95(0x26e,0x24e,0x2eb,0x31c)]),_0x30f8aa=_0x432408);let {modifiedPrompt:_0x1e147f,insertions:_0x476dc5}=await prompt_replace(_0x30f8aa,_0x267d5d);if(_0x380ad8)for(let _0x1abf86=0x42d*0x1+0x9b8*0x1+-0xde4;_0x250835[_0x4329b9(-0x92,-0x11d,-0x2d,-0x118)](_0x1abf86,-0x1*-0x1c17+-0x1e0b*0x1+0x18*0x15);_0x1abf86++){if(_0x250835[_0x4329b9(-0x33,-0xb1,0x52,-0x1e)](_0x806c95(0x193,0x124,0x132,0x1a3),_0x250835[_0x806c95(0x285,0x303,0x260,0x2e6)])){_0x250835[_0x806c95(0x263,0x319,0x31c,0x229)](_0x3c6098,_0x250835[_0x4329b9(-0x9,-0x53,-0x22,-0x88)]);throw new _0x52eed2(_0x4329b9(-0x1d,0x39,-0xcd,-0xba)+_0x806c95(0x174,0x113,0x1e1,0x18c)+_0x4329b9(-0x177,-0x116,-0x160,-0xb9)+'data.');}else{if(_0x2d59e0[_0x4329b9(-0xaf,-0xf8,-0x21,-0x104)+_0x1abf86+'\x20Prompt']){if(_0x250835['zmyQR'](_0x250835[_0x806c95(0x21d,0x184,0x22e,0x209)],_0x250835['IAOfB']))return _0x2192d2;else _0x1e147f=_0x250835[_0x4329b9(-0x137,-0x108,-0x172,-0x10e)](_0x250835[_0x4329b9(-0x131,-0x1e1,-0xa6,-0xf5)](_0x1e147f,',\x20'),_0x250835[_0x4329b9(-0x98,-0x29,-0x62,-0x9f)](prompt_replace_for_character,_0x2d59e0['Character\x20'+_0x1abf86+_0x4329b9(-0x140,-0x1bd,-0x196,-0x169)]));}}}let _0x593033=await _0x250835[_0x806c95(0x257,0x2b7,0x312,0x2b1)](zhengmian,extension_settings[extensionName][_0x806c95(0x13e,0x108,0x153,0x1b1)][extension_settings[extensionName][_0x4329b9(-0x51,-0xa3,0x1f,-0xae)+'mfyui']][_0x806c95(0x241,0x18b,0x2e2,0x2bd)+'t'],_0x1e147f,extension_settings[extensionName][_0x4329b9(-0x14f,-0xf3,-0x1bc,-0x1ff)][extension_settings[extensionName][_0x4329b9(-0x51,0x54,-0xeb,-0xf7)+'mfyui']][_0x4329b9(-0x4c,0x21,-0xaa,-0xac)+_0x806c95(0x151,0x120,0x15c,0x189)],extension_settings[extensionName][_0x806c95(0x209,0x278,0x2a9,0x15b)+'i'],_0x476dc5);_0x593033=_0xdcdb44(_0x593033);function _0xdcdb44(_0x1f2060){function _0x5559dd(_0x28f9c1,_0x10805b,_0x43819a,_0x46b7b4){return _0x4329b9(_0x10805b-0x2e,_0x10805b-0x50,_0x43819a,_0x46b7b4-0x2d);}function _0x39574a(_0x1ef2a7,_0x5a4573,_0x475897,_0x143be5){return _0x4329b9(_0x475897-0x1e3,_0x5a4573-0x2a,_0x1ef2a7,_0x143be5-0x4b);}const _0x4b8dea={'RZGkk':_0x250835[_0x39574a(0x4b,0x2b,0x9d,0xd1)],'vTXlG':function(_0x375268,_0x13ec52){function _0x492943(_0x1193a6,_0x45dc53,_0x371111,_0x17ba1f){return _0x39574a(_0x1193a6,_0x45dc53-0x16a,_0x17ba1f- -0x14f,_0x17ba1f-0x1be);}return _0x250835[_0x492943(0x96,0x13,-0x2c,-0xd)](_0x375268,_0x13ec52);},'QiHNW':_0x5559dd(-0xa6,-0x88,0x35,-0x1f),'aXosb':function(_0x4409dd,_0x2e66cd){return _0x4409dd+_0x2e66cd;},'ssDZV':_0x250835[_0x39574a(0x11c,0x145,0xc8,0xea)],'JtENI':function(_0x243cbf,_0x102e06){return _0x250835['eufOc'](_0x243cbf,_0x102e06);},'SElVx':_0x250835[_0x39574a(0x17e,0xe6,0x114,0x62)],'bNMOj':function(_0xd77be9,_0x4cef05){function _0x1c8eef(_0x3e3c02,_0x21ed3f,_0x1d8e18,_0x28cd93){return _0x39574a(_0x3e3c02,_0x21ed3f-0x161,_0x28cd93-0xca,_0x28cd93-0x14d);}return _0x250835[_0x1c8eef(0x245,0x2fa,0x261,0x25e)](_0xd77be9,_0x4cef05);},'zxlKv':_0x250835[_0x5559dd(-0xe7,-0x54,-0x91,-0xd8)],'yukBc':_0x250835['WbESd'],'oBuqB':_0x39574a(0x207,0x173,0x1dc,0x1d1)+'ankaotupia'+_0x39574a(0x13e,0x1c7,0x180,0x145),'cdZAn':function(_0x4b25fd,_0x50890a){return _0x4b25fd+_0x50890a;},'yEUap':_0x250835[_0x39574a(0x1c1,0x1ac,0x10c,0x183)],'aOyiv':function(_0x26a683,_0x269add){function _0x1322bb(_0x59b83a,_0x244c9d,_0x4afc4a,_0x734ec7){return _0x39574a(_0x734ec7,_0x244c9d-0x24,_0x244c9d- -0x250,_0x734ec7-0xe3);}return _0x250835[_0x1322bb(-0x16e,-0xe7,-0x60,-0x186)](_0x26a683,_0x269add);},'ZWpGJ':function(_0x1c161b,_0xd81824){return _0x250835['OByqz'](_0x1c161b,_0xd81824);},'VsfrS':_0x250835['vvHbr'],'HymMr':function(_0x16a351,_0x3eb0be){function _0x4ada9b(_0x7d7fe9,_0x813570,_0x2033cd,_0x1d2c57){return _0x39574a(_0x813570,_0x813570-0x5b,_0x2033cd-0x162,_0x1d2c57-0x107);}return _0x250835[_0x4ada9b(0x293,0x344,0x2f6,0x357)](_0x16a351,_0x3eb0be);},'fevWV':function(_0x35e7e1,_0x7c6f9d){function _0x58fa14(_0x2149e5,_0x315ee2,_0x10e4c3,_0x5f33b2){return _0x5559dd(_0x2149e5-0x44,_0x5f33b2-0x3a6,_0x315ee2,_0x5f33b2-0x152);}return _0x250835[_0x58fa14(0x2d0,0x349,0x28d,0x333)](_0x35e7e1,_0x7c6f9d);},'McSrb':_0x39574a(0x18c,0x218,0x17f,0x1a8)+'\x22','AQbAL':_0x39574a(0x9a,0x1a,0x85,0x7b)+'_prompt%\x22','OivUq':function(_0x5c90cb,_0x2aa8be){function _0x5e9763(_0x4a4c5f,_0x5a2255,_0x4e88cf,_0x47cec1){return _0x39574a(_0x4e88cf,_0x5a2255-0x55,_0x47cec1-0x46c,_0x47cec1-0x135);}return _0x250835[_0x5e9763(0x617,0x598,0x5ac,0x600)](_0x5c90cb,_0x2aa8be);},'pzLtg':function(_0x30c524,_0x29a457){return _0x250835['JSoLB'](_0x30c524,_0x29a457);},'wbFzZ':_0x250835[_0x5559dd(-0xc5,-0xd8,-0xe0,-0x14b)],'VUTua':_0x250835[_0x5559dd(-0xdc,-0x100,-0x73,-0x44)]},_0x157ac8=/<lora:([^:]+)(?:\.safetensors)?:([^>]+)(?::1)?>/g;return _0x1f2060[_0x5559dd(0x7,-0x55,-0xe9,-0xe0)](_0x157ac8,(_0x291e6b,_0x1cec60,_0xf31220)=>{if(_0x291e6b[_0x142307(0x84,0x106,0x17,0x69)](_0x8fe68f(-0x20e,-0x1aa,-0x1e7,-0x1d4)+'rs')){if(_0x250835['uehUH']('xusHX',_0x142307(0x158,0x135,0x17f,0x1e9)))return _0x291e6b;else{const _0xef4694=_0x4b8dea[_0x142307(0xcf,0xf7,0xd6,0x77)]['split']('|');let _0x58edd0=0x727*-0x3+-0xb26*-0x3+-0xbfd;while(!![]){switch(_0xef4694[_0x58edd0++]){case'0':_0x54a5d2=_0x4cc25e[_0x8fe68f(-0xc8,-0x221,-0x190,-0x165)](_0x142307(0x148,0x11a,0xf7,0x14a)+_0x142307(0x15d,0xd5,0x17e,0xc8),_0x4b8dea['vTXlG'](_0x1f72e2,_0x1a4521['cfg_scale']));continue;case'1':_0x579869=_0xdd9301['replaceAll'](_0x4b8dea[_0x142307(0xdc,0x113,0x18e,0x132)],''+_0x4b8dea['aXosb']('\x22'+_0x8b5a8d['vae'],'\x22'));continue;case'2':_0x5f0354=_0x5f0116['replaceAll']('\x22%c_quanzh'+'ong%\x22',_0x5ee108(_0xb593e5[_0x8fe68f(-0x126,-0xd7,-0xb2,-0x15d)+'g']));continue;case'3':_0x31e6e4=_0x128c6c[_0x142307(0xeb,0x136,0x162,0x4c)](_0x4b8dea[_0x142307(0x165,0x1c6,0x165,0x104)],_0x4b8dea['JtENI'](_0x18fbbd,_0x167170[_0x142307(0x14a,0x1ca,0x1b2,0x1fc)]));continue;case'4':_0x1e1bbf=_0x21ee00[_0x8fe68f(-0x1a6,-0xa7,-0x122,-0x165)](_0x4b8dea[_0x8fe68f(-0x20b,-0x270,-0x23d,-0x1c3)],''+_0x4b8dea[_0x8fe68f(-0x13d,-0x14e,-0xaa,-0x99)]('\x22'+_0x32ca82[_0x142307(0xe2,0xa5,0x152,0x17f)],'\x22'));continue;case'5':_0x49a0af=_0x1fb4ed['replaceAll'](_0x4b8dea[_0x142307(0x1c6,0x245,0x119,0x22c)],_0x37d064(_0x5ddcb1[_0x142307(0x144,0x95,0x192,0xeb)]));continue;case'6':_0x3a923f[_0x8fe68f(-0xc8,-0x14c,-0xa0,-0x109)](_0x181a82);continue;case'7':_0x3a7dbf=_0x17936c['replaceAll'](_0x4b8dea['yukBc'],''+_0x4b8dea['aXosb'](_0x4b8dea[_0x8fe68f(-0xb7,-0xb8,-0xd0,-0x99)]('\x22',_0x268cfd[_0x8fe68f(-0x1ff,-0x1d9,-0x238,-0x195)+'me']),'\x22'));continue;case'8':_0x37743e=_0xfcc68b[_0x8fe68f(-0x145,-0x103,-0x1b8,-0x165)](_0x4b8dea[_0x8fe68f(-0x164,-0x16,-0x10e,-0xcf)],''+_0x4b8dea[_0x142307(0xd5,0xf4,0x155,0xb3)]('\x22'+_0x330e53['comfyuican'+_0x8fe68f(-0xbe,-0x10,-0x37,-0xb4)],'\x22'));continue;case'9':_0xdc34a4[_0x8fe68f(-0x163,-0xfb,-0x136,-0x109)](_0x142307(0x176,0x1b9,0xe8,0x15b),_0x5d672f);continue;case'10':_0x1cf22e=_0x11c981[_0x142307(0xeb,0xd0,0x18f,0xad)](_0x4b8dea[_0x8fe68f(-0x138,-0x1ae,-0x1da,-0x1d3)],_0x4b8dea[_0x8fe68f(-0xda,-0xf1,-0x1b7,-0x138)](_0x1bf919,_0x428abe[_0x142307(0x140,0xd1,0x12e,0x124)+'ong']));continue;case'11':_0x26c46f=_0x21e620[_0x8fe68f(-0x125,-0x12a,-0x16c,-0x165)](_0x8fe68f(-0x1a2,-0x1a8,-0x1b3,-0x14f)+'r%\x22',''+(_0x4b8dea[_0x142307(0x172,0xca,0x144,0x1c3)]('\x22',_0x4d0efc['scheduler'])+'\x22'));continue;case'12':_0x3cea7f=_0x4b7fdf[_0x8fe68f(-0x1aa,-0x179,-0xd6,-0x165)](_0x4b8dea[_0x8fe68f(-0x1ed,-0x26e,-0x14f,-0x1c9)],''+_0x4b8dea[_0x142307(0x1c4,0x1dd,0x19f,0x24e)]('\x22'+_0x13f101['ipa'],'\x22'));continue;case'13':_0x3c38a3=_0x10afdc[_0x8fe68f(-0x19d,-0x1eb,-0x14b,-0x165)]('\x22%c_fenwei'+'%\x22',_0x4b8dea[_0x142307(0x1a4,0x16d,0x1f0,0x1aa)](_0x5f1c4e,_0x31085f['c_fenwei']));continue;case'14':_0x1e33c0=_0x3d49de[_0x8fe68f(-0x223,-0x182,-0x17f,-0x165)](_0x4b8dea['McSrb'],_0x4b8dea[_0x142307(0xae,0x88,0x15b,0x9f)](_0x5c7f1c,_0x951beb['c_xijie']));continue;case'15':_0x5c1ded=_0x3cfb73[_0x142307(0xeb,0x108,0x36,0x8b)](_0x4b8dea[_0x142307(0x1aa,0x14d,0x178,0x109)],''+_0x4b8dea[_0x8fe68f(-0x52,-0x163,-0xa1,-0xae)]('\x22'+_0x5d20bb[_0x8fe68f(-0xb1,-0x167,-0xf2,-0x144)+_0x8fe68f(-0xd2,-0xe2,-0xab,-0x112)],'\x22'));continue;case'16':_0x4685e5=_0x21ba32['replaceAll'](_0x8fe68f(-0xbf,-0x16e,-0x105,-0xc2),_0x4b8dea[_0x142307(0x116,0xd6,0xec,0x1c3)](_0xccc7d4,_0x564122[_0x8fe68f(-0x1ae,-0xcb,-0xd3,-0x173)]));continue;case'17':_0x1e22d2=_0x29d61b[_0x142307(0xeb,0x107,0xa2,0x46)](_0x4b8dea['wbFzZ'],'\x22'+_0xeab002[_0x142307(0x10a,0x10b,0x12c,0x75)]+'\x22');continue;case'18':return _0x2fa198;case'19':_0xf15bcd=_0x342748[_0x8fe68f(-0x1e4,-0x1f8,-0xdd,-0x165)](_0x4b8dea['VUTua'],_0x4b8dea[_0x142307(0x116,0x19a,0x61,0x132)](_0x576b3e,_0x2844c5[_0x8fe68f(-0x145,-0x266,-0x14e,-0x1f1)]));continue;}break;}}}if(_0xf31220[_0x142307(0x84,-0x1,0xaf,0x1c)](':'))return _0x142307(0x123,0x183,0x101,0x74)+_0x1cec60+(_0x8fe68f(-0x19e,-0x1f6,-0x231,-0x1d4)+_0x8fe68f(-0x1bf,-0x1a4,-0x25a,-0x19e))+_0xf31220+'>';function _0x8fe68f(_0x146de7,_0x27fa95,_0x24d40c,_0x1e49d8){return _0x5559dd(_0x146de7-0x5d,_0x1e49d8- -0xad,_0x146de7,_0x1e49d8-0x1ad);}function _0x142307(_0x55d21c,_0x11a9b2,_0x4fc60b,_0x1899bc){return _0x39574a(_0x4fc60b,_0x11a9b2-0x1d1,_0x55d21c- -0x12,_0x1899bc-0x149);}return'<lora:'+_0x1cec60+(_0x8fe68f(-0x27b,-0x1f9,-0x14d,-0x1d4)+_0x8fe68f(-0x172,-0x231,-0x146,-0x19e))+_0xf31220+_0x8fe68f(-0x123,-0x131,-0xfc,-0xf0);});}if(extension_settings[extensionName][_0x806c95(0x250,0x213,0x207,0x22d)][_0x4329b9(-0x14d,-0x13d,-0xac,-0xa5)](_0x806c95(0x16b,0xcb,0xd1,0x160))){if(_0x250835[_0x806c95(0x245,0x20f,0x1b2,0x284)]===_0x4329b9(-0xab,-0x167,-0x60,-0x4c))_0x593033=_0x593033['replaceAll'](_0x806c95(0x1df,0x1f8,0x25b,0x256),_0x806c95(0x201,0x2be,0x22e,0x273)),_0x593033=_0x593033[_0x806c95(0x1a7,0x24c,0x245,0x16a)](_0x250835[_0x4329b9(-0x88,-0x113,-0x7f,-0x92)],'');else return _0x593c1f[_0x4329b9(-0xec,-0xdd,-0x81,-0x14a)][-0x6d3*0x1+0xbb9*-0x1+-0x1*-0x128c][_0x806c95(0x1b7,0x106,0x248,0x219)];}console[_0x806c95(0x203,0x1c7,0x164,0x1b9)](_0x250835['bmOyw'],_0x593033),_0x250835[_0x806c95(0x21e,0x1e2,0x245,0x2d6)](addLog,'正面提示词:\x20'+_0x593033);let _0x1a7586=await _0x250835['FEHrh'](fumian,extension_settings[extensionName]['yushe'][extension_settings[extensionName][_0x4329b9(-0x51,0x50,-0x105,0x47)+_0x4329b9(-0x8b,-0x112,-0x9c,-0x28)]][_0x806c95(0x1ad,0x220,0x12c,0x248)+_0x4329b9(-0x14e,-0xb9,-0x1a5,-0x12e)],extension_settings[extensionName][_0x806c95(0x10e,0x1a9,0x158,0x173)+'i']);extension_settings[extensionName]['worker'][_0x806c95(0x140,0xec,0x1fb,0x176)](_0x250835['rbnEo'])?_0x1a7586=_0x1a7586[_0x806c95(0x1a7,0x234,0x138,0x227)](_0x250835[_0x806c95(0x13a,0xeb,0x9f,0x189)],_0x250835[_0x4329b9(-0x6b,-0x80,-0x90,-0x11e)]):_0x1a7586=_0xdcdb44(_0x1a7586);_0x250835['xMxkt'](addLog,_0x806c95(0x225,0x193,0x18a,0x20b)+_0x1a7586),_0x593033=_0x593033[_0x806c95(0x1a7,0x21b,0x1b2,0x1e2)]('\x0a',',')[_0x4329b9(-0xe6,-0xc9,-0x68,-0x78)]('\x5c\x5c','\x5c')[_0x4329b9(-0xe6,-0x152,-0x158,-0x15f)]('\x5c','\x5c\x5c'),_0x1a7586=_0x1a7586['replaceAll']('\x0a',',')[_0x4329b9(-0xe6,-0x17f,-0x18d,-0x5f)]('\x5c\x5c','\x5c')[_0x806c95(0x1a7,0x196,0x155,0x227)]('\x5c','\x5c\x5c');let _0x381d5b={'prompt':_0x593033,'negative_prompt':_0x1a7586,'steps':extension_settings[extensionName][_0x806c95(0x112,0x143,0xa5,0xcd)+_0x806c95(0x176,0x115,0xe2,0x1d3)],'sampler_name':extension_settings[extensionName][_0x806c95(0x1ab,0x134,0xf4,0x18b)+_0x806c95(0x268,0x1af,0x29a,0x2ed)],'width':_0x28108d?_0x28108d:extension_settings[extensionName][_0x806c95(0x1cd,0x1f0,0x160,0x224)+_0x806c95(0x180,0x1b4,0x104,0xf9)],'height':_0x148ed5?_0x148ed5:extension_settings[extensionName][_0x4329b9(-0x73,0x3f,-0x5e,-0x10e)+_0x4329b9(-0xb5,-0xfe,-0x15e,-0xca)],'cfg_scale':extension_settings[extensionName]['cfg_comfyu'+'i'],'seed':extension_settings[extensionName]['comfyui_se'+'ed']===-0x248e+0xbb5+0x18d9||extension_settings[extensionName][_0x4329b9(-0x4d,0x3a,-0xaf,-0x15)+'ed']==='0'||_0x250835[_0x4329b9(-0x37,-0xab,-0xd3,-0xc5)](extension_settings[extensionName][_0x4329b9(-0x4d,0x3e,-0x28,-0x1)+'ed'],'')||_0x250835[_0x4329b9(-0xa8,-0xef,-0x2,-0x12f)](extension_settings[extensionName][_0x806c95(0x240,0x23a,0x266,0x2ba)+'ed'],-(-0xddf+0xd55*0x1+0x8b))||_0x250835['lKLOv'](extension_settings[extensionName][_0x806c95(0x240,0x23e,0x280,0x1de)+'ed'],'-1')?_0x250835[_0x4329b9(-0x118,-0x174,-0xec,-0xe7)](generateRandomSeed):extension_settings[extensionName][_0x806c95(0x240,0x1ac,0x213,0x219)+'ed'],'MODEL_NAME':extension_settings[extensionName][_0x4329b9(-0xc7,-0x167,-0x176,-0x132)],'c_quanzhong':extension_settings[extensionName][_0x4329b9(-0xde,-0x166,-0x111,-0x176)+'g'],'c_idquanzhong':extension_settings[extensionName][_0x4329b9(-0x91,-0x93,-0x141,0x18)+_0x806c95(0x21f,0x2d9,0x212,0x2bf)],'c_xijie':extension_settings[extensionName][_0x806c95(0x274,0x2d4,0x269,0x305)],'c_fenwei':extension_settings[extensionName][_0x806c95(0x1a9,0x110,0x12f,0x10f)],'comfyuicankaotupian':window[_0x806c95(0x255,0x1c5,0x21f,0x27f)+'kaotupian'],'ipa':extension_settings[extensionName][_0x806c95(0x217,0x16e,0x28a,0x295)],'scheduler':extension_settings[extensionName][_0x806c95(0x154,0x1c6,0xf0,0x1d2)+_0x4329b9(-0x159,-0x1f3,-0x1a2,-0x13d)],'vae':extension_settings[extensionName]['comfyui_va'+'e']};function _0x4329b9(_0x121d6e,_0x406690,_0x4ab740,_0x28f4d7){return _0x1840(_0x121d6e- -0x282,_0x4ab740);}const _0x28390d=_0x4329b9(-0xb0,-0x56,0x9,-0xa4)+'告\x20---\x0a正面提示'+'词:\x20'+_0x381d5b['prompt']+_0x806c95(0x21b,0x1ee,0x193,0x21a)+_0x381d5b[_0x4329b9(-0xc5,-0xef,-0xd7,-0x150)+_0x806c95(0x1fa,0x244,0x2ac,0x13c)]+_0x806c95(0x115,0x90,0x178,0x15c)+_0x381d5b[_0x806c95(0x1c6,0x16c,0x25e,0x20d)]+_0x4329b9(-0x3b,0x41,0x3e,-0x4)+_0x381d5b[_0x4329b9(-0x116,-0x1c2,-0xc6,-0x190)+'me']+_0x806c95(0x12b,0xdc,0x106,0xbb)+_0x381d5b['steps']+(_0x4329b9(-0x11d,-0x172,-0x1d8,-0x18d)+':\x20')+_0x381d5b[_0x806c95(0x1b9,0x242,0x261,0x1f6)]+_0x4329b9(-0x15a,-0x100,-0x1eb,-0x198)+_0x381d5b['seed']+_0x806c95(0x267,0x210,0x264,0x275)+_0x381d5b[_0x806c95(0x200,0x20f,0x19d,0x145)]+'x'+_0x381d5b['height']+_0x806c95(0x283,0x24b,0x232,0x274)+_0x381d5b['vae']+(_0x4329b9(-0x148,-0x100,-0xc1,-0xd8)+':\x20')+_0x381d5b[_0x806c95(0x1c5,0x281,0x120,0x1f9)]+(_0x806c95(0x254,0x26e,0x2da,0x2b2)+_0x806c95(0x152,0x141,0x9f,0x13a)+'-\x0a');_0x250835['AdoWq'](addLog,_0x28390d);const _0x5c9b90=_0x250835[_0x4329b9(-0xaa,-0x3,-0xd2,-0x71)];_0x381d5b=await _0x250835[_0x806c95(0x185,0x1d2,0x157,0x1cb)](replacepro,_0x381d5b,extension_settings[extensionName][_0x806c95(0x250,0x1ab,0x2fe,0x1a8)]),_0x381d5b=_0x4329b9(-0x41,-0xce,0x7,-0x12)+_0x806c95(0x121,0x63,0xf6,0x19a)+_0x5c9b90+('\x22,\x20\x22prompt'+'\x22:')+_0x381d5b+'}',addLog(_0x806c95(0x25f,0x20d,0x239,0x1d2)+_0x806c95(0x120,0x19c,0x163,0xcc)+'oad:\x20'+_0x381d5b);let _0x214ce4=!![];while(_0x214ce4){if(window['xiancheng']){if(_0x250835['arrwN']!==_0x250835[_0x4329b9(-0xfd,-0x127,-0x148,-0xd3)])_0x214ce4=![];else{const _0x51430c=_0x1cee2d[_0x4329b9(-0x173,-0x1c9,-0x14a,-0x1e1)](_0xe87d96);_0xded25b=_0x51430c[_0x4329b9(-0x142,-0x17d,-0x1ce,-0xc6)],_0x1613f3=_0x51430c[_0x4329b9(-0xa5,-0x158,-0x12a,-0x139)];}}else await _0x250835[_0x4329b9(-0x6f,-0xe8,0x11,-0x60)](sleep,0x3b2*0x2+-0x3c*0x49+0x4*0x368);};try{if(_0x806c95(0x228,0x2de,0x17d,0x2cc)===_0x4329b9(-0xe8,-0x45,-0x168,-0x76)){_0x2173ea(_0x4329b9(-0x17c,-0x231,-0x1ac,-0x236)+_0xe822ae);throw _0x28a689;}else{window[_0x806c95(0x1f4,0x2b0,0x275,0x22b)]=![];let _0x3cc4b1;if(_0x250835[_0x4329b9(-0x12b,-0x9b,-0xeb,-0x1dd)](extension_settings[extensionName][_0x806c95(0x164,0x17d,0x16b,0xaa)],_0x250835['sLxZF'])){const _0x2752f8={};_0x2752f8[_0x806c95(0x128,0xf7,0x91,0x13c)]=_0x1e18d0,_0x2752f8['prompt']=_0x381d5b;const _0x2ed732=await _0x250835[_0x4329b9(-0x108,-0x1ae,-0x16e,-0xfa)](fetch,_0x4329b9(-0x60,-0x22,-0x44,-0xc9)+_0x806c95(0x179,0x22f,0xfa,0x204)+'te',{'method':_0x806c95(0x227,0x24f,0x2a0,0x2d1),'body':JSON[_0x4329b9(-0x111,-0x138,-0x55,-0x89)](_0x2752f8),'headers':_0x250835[_0x806c95(0x1ef,0x274,0x154,0x231)](getRequestHeaders,window[_0x806c95(0x27a,0x2cf,0x2a5,0x2ee)])});if(!_0x2ed732['ok']){const _0x19b3fe=await _0x2ed732[_0x4329b9(-0xa2,-0x10c,-0xf5,-0x11e)]();addLog(_0x806c95(0x150,0x17b,0xec,0x16a)+_0x806c95(0x246,0x261,0x19d,0x2f7)+'ient):\x20'+_0x19b3fe);throw new Error(_0x806c95(0x163,0x1c1,0x17f,0x1d0)+_0x2ed732[_0x806c95(0x1e7,0x23d,0x1b2,0x1be)]+',\x20详情:\x20'+_0x19b3fe);}const _0x3cb3d=await _0x2ed732['text']();let _0x347aa6,_0x5e9381;try{if(_0x250835[_0x4329b9(-0x16b,-0x1b9,-0x1d5,-0xdc)](_0x806c95(0x132,0x1d7,0x1e3,0x17a),_0x250835[_0x4329b9(-0xf6,-0xa9,-0x13e,-0xca)])){const _0x3e858e=JSON['parse'](_0x3cb3d);_0x347aa6=_0x3e858e['format'],_0x5e9381=_0x3e858e[_0x4329b9(-0xa5,-0x4b,-0x122,-0xd1)];}else{_0x250835['xMxkt'](_0x13bebf,'轮询超时，服务器可能'+_0x806c95(0x16d,0x1ae,0x106,0x1d0));throw new _0x124e35(_0x250835[_0x4329b9(-0x31,-0xa8,-0xd8,0x59)]);}}catch(_0x288ed0){if(_0x250835['zmyQR'](_0x250835['AkPsp'],_0x250835[_0x806c95(0x155,0xd3,0x17c,0xa3)]))_0x250835[_0x4329b9(-0x13a,-0x15f,-0x1e5,-0x14c)](addLog,_0x250835[_0x4329b9(-0xf0,-0x9a,-0x179,-0x34)]),_0x347aa6=_0x4329b9(-0x11a,-0x132,-0x151,-0x18a),_0x5e9381=_0x3cb3d;else{const _0x1c20bc=_0x2bcd12?function(){if(_0x2525e4){const _0x2df0f5=_0xab0733['apply'](_0x55e26c,arguments);return _0x2d6830=null,_0x2df0f5;}}:function(){};return _0x207c5b=![],_0x1c20bc;}}if(!_0x5e9381){if(_0x250835[_0x806c95(0x122,0x154,0xcd,0x1be)](_0x250835[_0x806c95(0x235,0x2ca,0x1eb,0x23e)],_0x250835[_0x806c95(0x235,0x17b,0x24c,0x2f3)])){_0x250835[_0x806c95(0x192,0x1f0,0x21f,0xfc)](addLog,_0x250835[_0x806c95(0x284,0x2e4,0x326,0x1f9)]);throw new Error(_0x250835[_0x4329b9(-0x44,-0x74,-0x5f,-0xda)]);}else _0x3c35ee=_0x250835[_0x806c95(0x23e,0x2de,0x2c8,0x18a)](_0x114f5e+',\x20',_0x54e978[_0x806c95(0x1de,0x1db,0x176,0x233)+_0x3f8d31+'\x20Prompt']);}_0x250835[_0x806c95(0x279,0x1c8,0x246,0x2c3)](addLog,_0x250835[_0x4329b9(-0x13e,-0x89,-0x1ec,-0x1c1)]),_0x3cc4b1='data:image'+'/'+_0x347aa6+';base64,'+_0x5e9381;}else{const _0x5f29bc=new URL(_0x250835[_0x4329b9(-0x15f,-0xb6,-0x141,-0x19f)](_0x1e18d0,_0x250835['ocycP'])),_0x9589ff={};_0x9589ff[_0x806c95(0x135,0xb0,0x180,0xf4)+'pe']=_0x250835['FdVlo'];const _0x2ecd2f={};_0x2ecd2f[_0x4329b9(-0x29,0x48,-0xbc,0x2e)]=_0x806c95(0x227,0x1bc,0x1d8,0x22b),_0x2ecd2f['body']=_0x381d5b,_0x2ecd2f['headers']=_0x9589ff;const _0x460d4e=await fetch(_0x5f29bc,_0x2ecd2f);if(!_0x460d4e['ok']){if(_0x250835['vVanI']===_0x250835[_0x4329b9(-0xc2,-0xc3,-0xa3,-0x65)]){const _0xad2475=await _0x460d4e['text']();_0x250835[_0x806c95(0x153,0x1c8,0x18e,0x18f)](addLog,_0x806c95(0x150,0x11e,0x17c,0x1ea)+_0x4329b9(-0x1c,-0xae,0x12,-0x84)+'fyui):\x20'+_0xad2475);throw new Error(_0x806c95(0x163,0x15c,0xe9,0x130)+_0x460d4e[_0x4329b9(-0xa6,-0xdd,-0x114,-0x41)]+_0x4329b9(-0xf7,-0x60,-0x44,-0x74)+_0xad2475);}else _0x4a4e85=_0x41200e['replaceAll'](_0x250835[_0x4329b9(-0x153,-0x167,-0x10a,-0xc7)],_0x250835[_0x4329b9(-0x6b,-0x4a,-0xbb,-0xce)]),_0x470bca=_0x21e867['replaceAll'](_0x250835[_0x4329b9(-0x88,-0xca,0x20,-0xa6)],'');}const _0x149f22=await _0x460d4e['json']();let _0x353116=_0x149f22[_0x806c95(0x1c3,0x257,0x1d2,0x14f)],_0x3e1ed5=-0x409*0x8+-0x1d5d+-0x1*-0x3da5;while(!![]){if(_0x250835['ChQZg'](_0x4329b9(-0xa9,-0x12a,0x6,-0x13a),_0x250835[_0x806c95(0x141,0xed,0x8e,0x131)]))return _0x4329b9(-0xae,-0x94,-0x4d,-0x6c)+_0x49755c+('.safetenso'+'rs:')+_0x432cd9+'>';else try{if(_0x250835[_0x806c95(0x288,0x301,0x30a,0x212)](_0x250835[_0x806c95(0x1dc,0x1f8,0x160,0x122)],_0x806c95(0x1bc,0x192,0x265,0x248)))_0x52416c=![];else{const _0x3b1687=await _0x250835[_0x4329b9(-0xbe,-0x6f,-0x11c,-0x121)](fetch,_0x1e18d0+_0x806c95(0x230,0x1d7,0x206,0x272)+_0x353116);if(!_0x3b1687['ok']){if(_0x250835['uehUH'](_0x250835[_0x4329b9(-0x3a,-0xf0,0x1,-0xa1)],_0x806c95(0x281,0x2ec,0x256,0x1e2))){_0x250835[_0x4329b9(-0xfb,-0x130,-0x13a,-0x175)](addLog,_0x806c95(0x1a2,0x164,0x193,0x1e8)+'\x20'+_0x3b1687[_0x806c95(0x1e7,0x1b0,0x157,0x19d)]);throw new Error(_0x806c95(0x224,0x175,0x1a9,0x271)+'quest\x20fail'+_0x4329b9(-0x166,-0x16e,-0x1b1,-0x15a)+_0x3b1687[_0x806c95(0x1e7,0x216,0x1cb,0x17c)]);}else{_0x4bdfe2(_0x250835[_0x806c95(0x1c7,0x26a,0x1da,0x24e)]),_0x551047=_0x250835['odojc'](_0x20c898,_0x313562),_0x4368ca=_0x4a3325[_0x250835['Smmac']];for(let _0x44207b=-0x112f+0x1cba+0xd3*-0xe;_0x250835[_0x806c95(0x23b,0x1dc,0x1b9,0x2f0)](_0x44207b,0xdf9+-0x1b*-0xad+-0x2034);_0x44207b++){_0xbfe900[_0x806c95(0x1de,0x190,0x1ed,0x1f6)+_0x44207b+_0x806c95(0x14d,0x1dd,0x1f4,0xc4)]&&(_0x45b873=_0x250835[_0x806c95(0x23e,0x201,0x207,0x22d)](_0x250835[_0x4329b9(-0x131,-0x9b,-0x1d8,-0xf2)](_0x4418f6,',\x20'),_0x37d9cf[_0x806c95(0x1de,0x220,0x1ee,0x26b)+_0x44207b+_0x4329b9(-0x140,-0x9d,-0xdc,-0x1e8)]));}}}let _0x32025a=await _0x3b1687[_0x4329b9(-0x85,-0x13d,-0xfd,-0x127)]();console['log'](_0x250835[_0x806c95(0x1e0,0x242,0x285,0x1ee)],_0x32025a);if(_0x32025a[_0x4329b9(-0x10f,-0x126,-0x14a,-0x146)+_0x806c95(0x26f,0x1b7,0x2aa,0x2d3)](_0x353116)){if(_0x250835[_0x4329b9(-0x113,-0x7a,-0x127,-0x16d)](_0x4329b9(-0x17d,-0xee,-0x11a,-0x14c),_0x250835['iYKnO']))throw new _0xed3351('未能从API响应中找'+_0x806c95(0x1c1,0x23b,0x216,0x198));else{function _0x19915a(_0x1f46ac){function _0x58b567(_0x92fc34,_0x550fca,_0x55898e,_0x3e9a1c){return _0x4329b9(_0x550fca-0x25,_0x550fca-0x15a,_0x3e9a1c,_0x3e9a1c-0x18e);}function _0x3837c6(_0x19d0bf,_0x23f16d,_0x3a020e,_0x3961b0){return _0x806c95(_0x23f16d- -0x108,_0x23f16d-0x80,_0x3961b0,_0x3961b0-0x13c);}for(const _0x15cdfe in _0x1f46ac){const _0x24c785=_0x1f46ac[_0x15cdfe];if(_0x24c785[_0x58b567(-0x9c,-0xc7,-0x40,-0xa7)]&&_0x250835[_0x3837c6(0x18d,0xd3,0x180,0x2e)](_0x24c785[_0x3837c6(0x95,0x99,0xa1,0x10d)][_0x58b567(0x63,-0x25,0x7a,-0xb6)],-0x2cb*-0x3+-0x218*-0x1+-0xa79*0x1))return _0x24c785[_0x3837c6(0x7d,0x99,0xda,0x70)][0x1*0x4fb+0x2150+-0x264b][_0x3837c6(0xfc,0xaf,0xf9,0x110)];}return null;}_0x250835[_0x4329b9(-0x45,-0xd8,0x4b,-0xed)](addLog,_0x250835[_0x806c95(0x14c,0x145,0x15b,0x178)]);let _0x116a0a=_0x19915a(_0x32025a[_0x353116][_0x250835[_0x4329b9(-0xd8,-0xab,-0x36,-0x7d)]]);if(!_0x116a0a)throw new Error(_0x250835['SybPU']);let _0x30c573=_0x1e18d0+('/view?file'+_0x806c95(0x18d,0x229,0x146,0x143))+_0x116a0a+(_0x4329b9(-0xf3,-0xa4,-0xd3,-0xa3)+'ut');const _0xe65e33=await _0x250835[_0x4329b9(-0x9b,-0x79,-0xb,-0xda)](fetch,_0x30c573);if(!_0xe65e33['ok'])throw new Error(_0x806c95(0x272,0x238,0x264,0x292)+':\x20'+_0xe65e33['status']);const _0x1dcafb=await _0xe65e33['blob']();_0x3cc4b1=await new Promise((_0x410b13,_0x21dd10)=>{function _0x2e512b(_0x1ec32a,_0x2342b0,_0x2aac15,_0x3fa8a7){return _0x4329b9(_0x2aac15-0x409,_0x2342b0-0x107,_0x3fa8a7,_0x3fa8a7-0x1b3);}function _0x2c47c9(_0x30f2b8,_0x52dc9f,_0x4966a2,_0x542bcd){return _0x806c95(_0x30f2b8- -0x3d5,_0x52dc9f-0x122,_0x4966a2,_0x542bcd-0x42);}if(_0x250835[_0x2c47c9(-0x1f0,-0x235,-0x246,-0x236)](_0x250835['ardks'],_0x250835[_0x2e512b(0x345,0x435,0x389,0x422)])){const _0x9abcce=new FileReader();_0x9abcce[_0x2e512b(0x236,0x2e5,0x2a1,0x302)]=()=>_0x410b13(_0x9abcce[_0x2c47c9(-0x24b,-0x26b,-0x2ea,-0x21f)]),_0x9abcce[_0x2c47c9(-0x15e,-0x142,-0xe3,-0x1c2)]=_0x21dd10,_0x9abcce[_0x2c47c9(-0x213,-0x15f,-0x24f,-0x232)+'URL'](_0x1dcafb);}else _0x55782f=_0x250835['mPRtn'](_0x230d27,_0x1cb133);});break;}}await _0x250835['AdoWq'](sleep,-0x26*-0xe5+-0xca4+-0x1172),_0x3e1ed5++;if(_0x250835[_0x4329b9(-0xb2,-0x11f,-0xc9,-0xf4)](_0x3e1ed5,0x1008+0x179e+-0x26de)){if(_0x250835['lKLOv'](_0x250835[_0x4329b9(-0x16e,-0xeb,-0xb9,-0x1ef)],_0x250835[_0x806c95(0x11f,0xc6,0x1cf,0xf1)])){_0x250835[_0x806c95(0x11d,0xdb,0x72,0xc7)](addLog,_0x250835[_0x806c95(0x123,0x178,0x1d6,0x6c)]);throw new Error(_0x250835[_0x806c95(0x25c,0x304,0x1d1,0x2da)]);}else!_0x350165['initialize'+'ComfyuiLis'+_0x4329b9(-0x94,-0x83,-0xf9,-0xb3)]&&(_0x1fd3dd[_0x806c95(0x13d,0x1aa,0x1a7,0x15a)+_0x4329b9(-0xf9,-0x1a3,-0x117,-0x1b3)+'tener']=!![],_0x250835[_0x806c95(0x1da,0x285,0x143,0x13c)](_0x5f45a4)),_0x250835[_0x806c95(0x175,0x17f,0x1c0,0x20c)](_0x32af27);}}}catch(_0x307454){_0x250835[_0x4329b9(-0xa1,-0x46,-0x9b,-0x115)](addLog,_0x4329b9(-0x17c,-0x209,-0x230,-0x1a8)+_0x307454);throw _0x307454;}}}window['xiancheng']=!![];if(!_0x3cc4b1)throw new Error(_0x250835[_0x4329b9(-0x169,-0x1fc,-0x14a,-0xd6)]);return _0x250835[_0x806c95(0x27e,0x30a,0x30a,0x1f0)](addLog,_0x250835[_0x806c95(0x13c,0x14f,0xd4,0x1f7)]),setItemImg,{'image':_0x3cc4b1,'change':_0x250835[_0x806c95(0x186,0x17d,0x13e,0x18d)](_0x4ad901,'')};}}catch(_0x4099a5){window['xiancheng']=!![],_0x250835['QBohn'](addLog,_0x4329b9(-0x54,-0x42,-0x85,-0x100)+_0x4329b9(-0x81,0x33,-0x42,-0x64)+_0x4099a5[_0x4329b9(-0x179,-0x1ca,-0x184,-0x14e)]),console[_0x4329b9(-0x18,-0x1c,-0xbf,0xd)]('Error\x20gene'+_0x4329b9(-0x17a,-0x11e,-0x19f,-0x222)+_0x4329b9(-0x61,0x39,-0xd7,-0xb1),_0x4099a5);throw _0x4099a5;}}async function comfyuigenerate(_0x1fdd67){const _0x224de0={'XWGOO':_0x5c472a(0x92,0x45,0xb5,0xc6)+_0x5c472a(0xde,0x173,0xc4,0x119),'FXjzA':function(_0x127065,_0x1af1ed){return _0x127065>_0x1af1ed;},'BCnNr':function(_0x36dfb0,_0x3e8b6e){return _0x36dfb0===_0x3e8b6e;},'Xrxbx':_0x4cac22(0x1ba,0x17a,0x24a,0x275),'ZcduK':function(_0x360691,_0x18feaf){return _0x360691(_0x18feaf);},'gZDHa':_0x5c472a(0x24,0x3c,0xde,0x192),'KJVYs':function(_0x5abc3c,_0x4aa120){return _0x5abc3c(_0x4aa120);},'jTXgw':function(_0x2c5ff3,_0x52fcb9){return _0x2c5ff3!==_0x52fcb9;},'obqgD':'sPNYb'},{id:_0x57cd61,prompt:_0x533d53,width:_0x5deb71,height:_0x1c53cb,change:_0x4d135b}=_0x1fdd67;addLog(_0x5c472a(0xe5,0xf9,0x16f,0x21e)+':\x20'+_0x57cd61+(_0x5c472a(0xd9,0xd9,0x103,0x119)+':\x20')+_0x533d53+(_0x4d135b?'\x20-\x20Change:'+'\x20'+_0x4d135b:''));function _0x5c472a(_0x108ca6,_0x142803,_0x4225be,_0x399492){return _0x1840(_0x4225be- -0xf0,_0x108ca6);}function _0x4cac22(_0x14afc6,_0x21682e,_0x4139fe,_0x19c1c3){return _0x1840(_0x14afc6- -0x8c,_0x21682e);}try{if(_0x224de0[_0x4cac22(0xf2,0x16d,0x182,0x113)](_0x224de0['Xrxbx'],_0x224de0['Xrxbx'])){const {image:_0x19957f,change:_0x5a1e94}=await _0x224de0[_0x5c472a(0x120,0x10f,0xfd,0xa9)](generateComfyUIImage,{'prompt':_0x533d53,'width':_0x5deb71,'height':_0x1c53cb,'change':_0x4d135b});extension_settings[extensionName]['cache']!='0'?(await setItemImg(_0x533d53,_0x19957f,_0x5a1e94),_0x224de0[_0x4cac22(0x161,0x197,0x190,0x206)](addLog,_0x5c472a(0xb7,0x28,0xb3,0x66)+_0x5c472a(-0x1b,0x4e,0x5f,0xaf)+'\x20'+_0x533d53)):_0x224de0['BCnNr'](_0x224de0[_0x4cac22(0xc4,0x11,0x10e,0x97)],_0x4cac22(0x15a,0x9d,0x12f,0xe2))?(_0x4d0bd4['on'](_0x21d098['GENERATE_I'+_0x5c472a(0xfa,0x23,0x7d,0x10f)+'ST'],_0x3edf43),_0x1ee066(_0x224de0[_0x4cac22(0xf5,0x12a,0xbc,0x141)])):_0x224de0[_0x5c472a(0x2e,-0x2e,0x8d,0x4f)](addLog,_0x5c472a(0x2f,0x98,0x74,-0x11)+'库');const _0x422824={};_0x422824['id']=_0x57cd61,_0x422824['success']=!![],_0x422824[_0x4cac22(0x1c4,0x133,0x282,0x209)]=_0x19957f,_0x422824['prompt']=_0x533d53,_0x422824[_0x5c472a(0x60,0x158,0xa8,0x38)]=_0x5a1e94,eventSource['emit'](EventType[_0x5c472a(0xbb,0x122,0x117,0x182)+_0x4cac22(0x8f,0x5b,-0x25,0x38)+'NSE'],_0x422824),_0x224de0[_0x5c472a(0xde,0x36,0x8d,0x2a)](addLog,'发送生图成功响应\x20('+_0x4cac22(0x137,0x12d,0x1cf,0xee)+_0x57cd61+')');}else{const _0x4ef964=_0x4cb063[_0x2642ad];if(_0x4ef964[_0x4cac22(0x10a,0x198,0xfd,0x88)]&&_0x224de0['FXjzA'](_0x4ef964['images'][_0x5c472a(0xda,0x1f5,0x148,0x1bb)],-0x1e08+0xa*-0x354+0x10*0x3f5))return _0x4ef964[_0x5c472a(0xa1,0x6a,0xa6,0x54)][-0x11c6+0x1*-0x1f1b+-0x1*-0x30e1][_0x4cac22(0x120,0x152,0x178,0x12d)];}}catch(_0x20bc8b){if(_0x224de0[_0x5c472a(0x128,0x7,0x6e,0x73)](_0x224de0[_0x5c472a(0x19a,0x1b0,0x13d,0x1cb)],_0x224de0[_0x4cac22(0x1a1,0x24f,0x180,0x10b)])){const _0x3ac95a=_0x1c8d14[_0x5c472a(0x17d,0x22c,0x171,0x18f)](_0x594c33,arguments);return _0xec2170=null,_0x3ac95a;}else{const _0x35f6b7=_0x5c472a(0xa8,0x1a8,0xf8,0xfe)+'(ID:\x20'+_0x57cd61+_0x5c472a(0x13,0x110,0xb6,0x136)+_0x20bc8b[_0x4cac22(0x7d,0xe7,-0x3c,0x117)];_0x224de0['KJVYs'](addLog,_0x4cac22(0x1ca,0x214,0x284,0x122)+_0x35f6b7),console[_0x4cac22(0x1de,0x216,0x13b,0x15a)](_0x5c472a(-0x5b,-0x3f,0x3b,-0x35)+_0x4cac22(0x7c,0xf9,0xc8,0xf8)+'ge:',_0x20bc8b);const _0x183d15={};_0x183d15['id']=_0x57cd61,_0x183d15[_0x4cac22(0x121,0x8a,0x116,0x122)]=![],_0x183d15['error']=_0x20bc8b[_0x5c472a(-0x23,0x0,0x19,0xbe)],_0x183d15['prompt']=_0x533d53,eventSource[_0x4cac22(0xea,0x115,0x61,0xc5)](EventType['GENERATE_I'+_0x4cac22(0x8f,-0x4,-0x22,0xdc)+_0x4cac22(0x179,0x162,0x1ca,0x1b6)],_0x183d15),addLog(_0x4cac22(0x1b0,0x20b,0x168,0x112)+_0x5c472a(0xfc,0x44,0xd3,0x70)+_0x57cd61+')');}}}function initializeComfyuiListener(){function _0x1c797c(_0x5bef7d,_0x16cf0c,_0x4939e6,_0x2fb064){return _0x1840(_0x5bef7d- -0x93,_0x16cf0c);}const _0x358706={};_0x358706[_0x1c797c(0xaa,0x19,0xd6,0xed)]=_0x1c797c(0x112,0x6a,0x65,0x67)+_0x1c797c(0x121,0x123,0x87,0x69);function _0x523a3d(_0x2e94d1,_0x114462,_0x418752,_0x1fac1c){return _0x1840(_0x114462- -0x1d0,_0x2e94d1);}const _0x28cd80=_0x358706;eventSource['on'](EventType['GENERATE_I'+_0x523a3d(0x4f,-0x63,-0x69,-0x4b)+'ST'],comfyuigenerate),addLog(_0x28cd80[_0x1c797c(0xaa,0x13b,0x107,0x10d)]);}export async function replaceWithcomfyui(){const _0x307eef={'BVElv':function(_0x1bf688,_0x335c50){return _0x1bf688>_0x335c50;},'kIVsy':function(_0xf29c22,_0x2793fa){return _0xf29c22==_0x2793fa;},'MWoaz':_0x25a377(0x457,0x462,0x3e3,0x3da),'xbiFV':function(_0x347c75,_0x4af4b4){return _0x347c75===_0x4af4b4;},'ncYvZ':'uvEQP','qHlFF':_0x25a377(0x3dc,0x43b,0x46c,0x427),'oytWS':function(_0x23e0a3){return _0x23e0a3();},'DojXM':function(_0x4ac307,_0xd376c){return _0x4ac307(_0xd376c);},'FAMKQ':'comfyui\x20生图'+_0x4fd5a3(0x46,0xc2,0x12b,0xa8)};function _0x25a377(_0xb3aa72,_0x4fb683,_0x466f78,_0x2eba54){return _0x1840(_0x2eba54-0x1c5,_0x466f78);}function _0x4fd5a3(_0xa4e76,_0x1e3386,_0x4946b0,_0x481360){return _0x1840(_0x481360- -0x100,_0x4946b0);}if(_0x307eef[_0x4fd5a3(0x161,0xb3,0xa6,0x157)](extension_settings[extensionName]['mode'],_0x307eef['MWoaz'])){if(_0x307eef['xbiFV'](_0x307eef['ncYvZ'],_0x307eef['qHlFF'])){for(const _0x374ad5 in _0x2a5a2a){const _0x4c0912=_0x788bb5[_0x374ad5];if(_0x4c0912[_0x25a377(0x3e8,0x3e3,0x31c,0x35b)]&&_0x307eef[_0x4fd5a3(0x45,0xfe,0x19,0x84)](_0x4c0912['images']['length'],0x1132+-0x1dad+0xc7b))return _0x4c0912['images'][0x2*-0xcce+-0x2610+0x19*0x28c][_0x25a377(0x319,0x2b6,0x333,0x371)];}return null;}else!window['initialize'+_0x4fd5a3(0x13b,0x141,0xec,0x89)+'tener']&&(window[_0x4fd5a3(-0x42,-0x6e,0x29,0x32)+_0x25a377(0x2fa,0x3d8,0x40b,0x34e)+_0x25a377(0x3ea,0x39e,0x367,0x3b3)]=!![],_0x307eef[_0x25a377(0x4cc,0x3b3,0x3a2,0x439)](initializeComfyuiListener)),initializeImageProcessing();}else window[_0x25a377(0x3ae,0x280,0x30e,0x2f7)+_0x25a377(0x2db,0x31d,0x2b2,0x34e)+_0x4fd5a3(0x13e,0x5c,0x160,0xee)]&&(eventSource[_0x4fd5a3(0xcf,0x9b,0x51,0xde)+'ener'](EventType[_0x4fd5a3(0x154,0x184,0x174,0x107)+_0x4fd5a3(0x27,0x127,0x93,0x6d)+'ST'],comfyuigenerate),window[_0x25a377(0x2e4,0x28c,0x394,0x2f7)+_0x4fd5a3(0xfe,0x79,0x31,0x89)+_0x4fd5a3(0x158,0x153,0x58,0xee)]=![],_0x307eef[_0x4fd5a3(0x100,0xab,0xea,0x142)](addLog,_0x307eef[_0x4fd5a3(0x19a,0xc7,0x17e,0x120)]));}
//# sourceMappingURL=http://localhost:8000/comfyui.js.map