<div id="st-chatu8-settings">
<div id="ch-settings-modal" class="st-chatu8-modal-backdrop" style="display: none;">
    <div class="st-chatu8-modal-content" tabindex="-1">
        <div class="st-chatu8-modal-header">
            <h2>通用ai插图吧 <span id="ch-version-display" class="st-chatu8-version-tag"></span><span id="ch-title-update-notification" style="display: none; color: var(--st-chatu8-accent-color); font-weight: bold; font-size: 0.8em;"> (发现新版本, 请到“关于”中更新)</span></h2>
            <span id="ch-settings-modal-close" class="st-chatu8-modal-close">&times;</span>
        </div>
        <div class="st-chatu8-settings-layout">
            <div class="st-chatu8-sidebar">
                <div class="st-chatu8-sidebar-header">
                    <div class="st-chatu8-sidebar-header-buttons">
                        <button class="st-chatu8-sidebar-btn" id="ch-toggle-theme" title="切换主题"><i class="fa-solid fa-moon"></i></button>
                        <button class="st-chatu8-sidebar-btn" id="ch-restore-settings" title="重置设置"><i class="fa-solid fa-arrow-rotate-left"></i></button>
                        <button class="st-chatu8-sidebar-btn" id="ch-export-settings" title="导出设置"><i class="fa-solid fa-file-export"></i></button>
                        <button class="st-chatu8-sidebar-btn" id="ch-import-settings" title="导入设置"><i class="fa-solid fa-file-import"></i></button>
                    </div>
                </div>
                <nav class="st-chatu8-nav">
                    <a href="#" class="st-chatu8-nav-link" data-tab="main">主要设置</a>
                    <a href="#" class="st-chatu8-nav-link" data-tab="sd">SD</a>
                    <a href="#" class="st-chatu8-nav-link" data-tab="novelai">NovelAI</a>
                    <a href="#" class="st-chatu8-nav-link" data-tab="comfyui">ComfyUI</a>
                    <a href="#" class="st-chatu8-nav-link" data-tab="ai">AI</a>
                    <a href="#" class="st-chatu8-nav-link" data-tab="vocabulary">词库</a>
                    <!-- <a href="#" class="st-chatu8-nav-link" data-tab="worldbook">世界书</a> -->
                    <a href="#" class="st-chatu8-nav-link" data-tab="theme">主题设置</a>
                    <a href="#" class="st-chatu8-nav-link" data-tab="fab">悬浮球</a>
                    <a href="#" class="st-chatu8-nav-link" data-tab="image-cache">图片缓存</a>
                    <a href="#" class="st-chatu8-nav-link" data-tab="about">关于 <span id="ch-update-indicator" class="st-chatu8-update-indicator" style="display: none;" title="有新版本可用！">!</span></a>
                    <a href="#" class="st-chatu8-nav-link" data-tab="log">日志</a>
                </nav>
            </div>
            <div class="st-chatu8-content">
                <div class="st-chatu8-tab-content" id="ch-tab-theme">
                    <div class="st-chatu8-settings-section">
                        <h3>主题设置</h3>
                        <div class="st-chatu8-field">
                            <label for="theme_id">主题预设</label>
                            <div class="st-chatu8-profile-controls">
                                <select id="theme_id" class="st-chatu8-select"></select>
                                <button class="st-chatu8-icon-btn" id="theme_save_style" title="保存"><i class="fa-solid fa-save"></i></button>
                                <button class="st-chatu8-icon-btn" id="theme_export_current" title="导出当前"><i class="fa-solid fa-upload"></i></button>
                                <button class="st-chatu8-icon-btn" id="theme_export_all" title="导出全部"><i class="fa-solid fa-file-export"></i></button>
                                <button class="st-chatu8-icon-btn" id="theme_import" title="导入"><i class="fa-solid fa-download"></i></button>
                                <button class="st-chatu8-icon-btn danger" id="theme_delete_style" title="删除"><i class="fa-solid fa-trash"></i></button>
                            </div>
                        </div>
                        <div id="theme-color-pickers" class="st-chatu8-grid">
                            <!-- Color pickers will be dynamically inserted here -->
                        </div>
                    </div>
                </div>
                <div class="st-chatu8-tab-content" id="ch-tab-main">
                    <div class="st-chatu8-settings-section">
                        <h3>主要设置</h3>
                        <div class="st-chatu8-field">
                            <label for="scriptEnabled">启用插件</label>
                            <div class="st-chatu8-toggle">
                                <input id="scriptEnabled" type="checkbox"/>
                                <span class="st-chatu8-slider"></span>
                            </div>
                        </div>
                        <div class="st-chatu8-field">
                            <label for="mode">模式</label>
                            <select id="mode" class="st-chatu8-select">
                                <option value="sd">SD</option>
                                <option value="novelai">NovelAI</option>
                                <option value="comfyui">ComfyUI</option>
                            </select>
                        </div>
                        <div class="st-chatu8-field">
                            <label for="client">客户端</label>
                            <select id="client" class="st-chatu8-select">
                                <option value="browser">浏览器</option>
                                <option value="jiuguan">酒馆</option>
                            </select>
                        </div>
                        <div class="st-chatu8-field">
                            <label for="dbclike">隐藏按钮（双击图片触发）</label>
                            <div class="st-chatu8-toggle">
                                <input id="dbclike" type="checkbox"/>
                                <span class="st-chatu8-slider"></span>
                            </div>
                        </div>
                        <div class="st-chatu8-field">
                            <label for="zidongdianji">自动点击生成</label>
                            <div class="st-chatu8-toggle">
                                <input id="zidongdianji" type="checkbox"/>
                                <span class="st-chatu8-slider"></span>
                            </div>
                        </div>
                        <div class="st-chatu8-field">
                            <label for="longPressToEdit">长按图片修改tag</label>
                            <div class="st-chatu8-toggle">
                                <input id="longPressToEdit" type="checkbox"/>
                                <span class="st-chatu8-slider"></span>
                            </div>
                        </div>
                        <div class="st-chatu8-field">
                            <label for="newlineFixEnabled">换行修复</label>
                            <div class="st-chatu8-toggle">
                                <input id="newlineFixEnabled" type="checkbox"/>
                                <span class="st-chatu8-slider"></span>
                            </div>
                        </div>
                    </div>
                    <div class="st-chatu8-settings-section">
                        <h3>标记</h3>
                        <div class="st-chatu8-field">
                            <label for="startTag">开始标记</label>
                            <input type="text" id="startTag" class="st-chatu8-text-input">
                        </div>
                        <div class="st-chatu8-field">
                            <label for="endTag">结束标记</label>
                            <input type="text" id="endTag" class="st-chatu8-text-input">
                        </div>
                    </div>
                    <div class="st-chatu8-settings-section">
                        <h3>查找模式</h3>
                        <div class="st-chatu8-field">
                            <label for="heavyFrontendMode">重前端模式</label>
                            <div class="st-chatu8-toggle">
                                <input id="heavyFrontendMode" type="checkbox"/>
                                <span class="st-chatu8-slider"></span>
                            </div>
                        </div>
                    </div>
                    <div class="st-chatu8-settings-section">
                        <h3>缓存管理</h3>
                        <div class="st-chatu8-field">
                            <label for="cache">缓存有效期</label>
                            <select id="cache" class="st-chatu8-select">
                                <option value="0">不缓存</option>
                                <option value="1">缓存一天</option>
                                <option value="7">缓存一星期</option>
                                <option value="30">缓存一个月</option>
                                <option value="365">缓存一年</option>
                            </select>
                        </div>
                        <div class="st-chatu8-field">
                            <label>操作</label>
                            <div>
                                <button id="Clear-Cache" class="st-chatu8-btn danger">清除图片缓存</button>
                                <button id="migrate-database-btn" class="st-chatu8-btn">数据迁移</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="st-chatu8-tab-content" id="ch-tab-sd">
                    <div class="ch-prompts-section st-chatu8-settings-section">
                        <h3>固定提示词</h3>
                        <div class="st-chatu8-field">
                            <label for="yusheid">提示词预设</label>
                            <div class="st-chatu8-profile-controls">
                                <select id="yusheid" class="st-chatu8-select"></select>
                                <button class="st-chatu8-icon-btn" id="st_chatu8_tishici_update_style" title="保存"><i class="fa-solid fa-save"></i></button>
                                <button class="st-chatu8-icon-btn" id="st_chatu8_tishici_save_style" title="另存为"><i class="fa-solid fa-file-export"></i></button>
                                <button class="st-chatu8-icon-btn" id="st_chatu8_tishici_export_current" title="导出当前"><i class="fa-solid fa-upload"></i></button>
                                <button class="st-chatu8-icon-btn" id="st_chatu8_tishici_export_all" title="导出全部"><i class="fa-solid fa-file-export"></i></button>
                                <button class="st-chatu8-icon-btn" id="st_chatu8_tishici_import" title="导入"><i class="fa-solid fa-download"></i></button>
                                <button class="st-chatu8-icon-btn danger" id="st_chatu8_tishici_delete_style" title="删除"><i class="fa-solid fa-trash"></i></button>
                            </div>
                        </div>
                        <div class="st-chatu8-field-col">
                            <label for="fixedPrompt">固定正面提示词 <span class="st-chatu8-unsaved-warning" title="设置尚未保存" style="display: none;"><i class="fa-solid fa-triangle-exclamation"></i></span></label>
                            <textarea id="fixedPrompt" class="st-chatu8-textarea" rows="4"></textarea>
                            <div id="fixedPrompt-results" class="ch-autocomplete-results"></div>
                        </div>
                        <div class="st-chatu8-field-col">
                            <label for="fixedPrompt_end">后置固定正面提示词 <span class="st-chatu8-unsaved-warning" title="设置尚未保存" style="display: none;"><i class="fa-solid fa-triangle-exclamation"></i></span></label>
                            <textarea id="fixedPrompt_end" class="st-chatu8-textarea" rows="4"></textarea>
                            <div id="fixedPrompt_end-results" class="ch-autocomplete-results"></div>
                        </div>
                        <div class="st-chatu8-field-col">
                            <label for="negativePrompt">固定负面提示词 <span class="st-chatu8-unsaved-warning" title="设置尚未保存" style="display: none;"><i class="fa-solid fa-triangle-exclamation"></i></span></label>
                            <textarea id="negativePrompt" class="st-chatu8-textarea" rows="4"></textarea>
                            <div id="negativePrompt-results" class="ch-autocomplete-results"></div>
                        </div>
                        <h3>LORA</h3>
                        <div class="st-chatu8-field">
                            <label for="sd_cchatu_8_lora">添加 LORA</label>
                            <div class="st-chatu8-profile-controls">
                                <select id="sd_cchatu_8_lora" class="st-chatu8-select"></select>
                                <button class="st-chatu8-icon-btn" id="sd_add_lora" title="添加"><i class="fa-solid fa-plus"></i></button>
                            </div>
                        </div>
                    </div>
                        <div class="st-chatu8-settings-section"> 
                        <h3>提示词替换</h3>

                        <div class="st-chatu8-field">
                            <label for="prompt_replace_id">提示词替换</label>
                            <div class="st-chatu8-profile-controls">
                                <select id="prompt_replace_id" class="st-chatu8-select"></select>
                                <button class="st-chatu8-icon-btn" id="prompt_replace_update_style" title="保存"><i class="fa-solid fa-save"></i></button>
                                <button class="st-chatu8-icon-btn" id="prompt_replace_save_style" title="另存为"><i class="fa-solid fa-file-export"></i></button>
                                <button class="st-chatu8-icon-btn" id="prompt_replace_export_current" title="导出当前"><i class="fa-solid fa-upload"></i></button>
                                <button class="st-chatu8-icon-btn" id="prompt_replace_export_all" title="导出全部"><i class="fa-solid fa-file-export"></i></button>
                                <button class="st-chatu8-icon-btn" id="prompt_replace_import" title="导入"><i class="fa-solid fa-download"></i></button>
                                <button class="st-chatu8-icon-btn danger" id="prompt_replace_delete_style" title="删除"><i class="fa-solid fa-trash"></i></button>
                            </div>
                        </div>
                        <div class="st-chatu8-field-col">
                            <label for="prompt_replace_text">替换规则 <span class="st-chatu8-unsaved-warning" title="设置尚未保存" style="display: none;"><i class="fa-solid fa-triangle-exclamation"></i></span></label>
                            <textarea id="prompt_replace_text" class="st-chatu8-textarea" rows="4"></textarea>
                        </div>
                    </div>
                        <div class="st-chatu8-settings-section"> 
                        <div class="st-chatu8-field">
                            <label for="AQT_sd">正面质量预设</label>
                            <select id="AQT_sd" class="st-chatu8-select">
                                <option value="best quality, amazing quality, very aesthetic, absurdres">启用</option>
                                <option value="">禁用</option>
                            </select>
                        </div>
                        <div class="st-chatu8-field">
                            <label for="UCP_sd">负面质量预设</label>
                            <select id="UCP_sd" class="st-chatu8-select">
    <option value="">无</option>
    <option value="bad proportions, out of focus, username, text, bad anatomy, lowres, worstquality, watermark, cropped, bad body, deformed, mutated, disfigured, poorly drawn face, malformed hands, extra arms, extra limb, missing limb, too many fingers, extra legs, bad feet, missing fingers, fused fingers, acnes, floating limbs, disconnected limbs, long neck, long body, mutation, ugly, blurry, low quality, sketches, normal quality, monochrome, grayscale, signature, logo, jpeg artifacts, unfinished, displeasing, chromatic aberration, extra digits, artistic error, scan, abstract, photo, realism, screencap">作者预设</option>
    <option value="negativeXL_D, negativeXL, source_furry, extra limbs, deformations, long fingers, fused fingers, inaccurate_anatomy, bad proportions, poorly drawn hands, bad hands, extra_fingers, extra_hand, extra_arm, distorted fingers, ugly hands, creepy hands, six fingers, malformed fingers, long_fingers, interlocked fingers:1.2, ugly, deformed, uneven, asymmetrical, unnatural, missing fingers, extra digit, fewer digits, opaque eyes, small eyes, ugly eyes, blurred eyes, bad face, (bad anatomy, ugly face:1.2), (worst quality, low quality, not detailed, low resolution:1.2), motion_blur, blur, blur_censor, blurry, simple_background, text, error, cropped, normal quality, jpeg artifacts, watermark, logo, signature, username, artist name">作者预set 2</option>
                            </select>
                        </div>
                    </div>
                    <div class="st-chatu8-settings-section">
                        <h3>Stable Diffusion 设置</h3>
                        <div class="st-chatu8-field">
                            <label for="sdUrl">API 地址</label>
                            <div class="st-chatu8-input-group">
                                <i class="fa-solid fa-exclamation-triangle st-chatu8-url-warning-icon" title="无效的URL格式"></i>
                                <input type="text" id="sdUrl" class="st-chatu8-text-input" placeholder="http://127.0.0.1:7860">
                                <button id="testSd" class="st-chatu8-btn">测试连接</button>
                            </div>
                        </div>
                        <div class="st-chatu8-field">
                            <label for="st_chatu8_sd_auth">身份验证</label>
                            <input type="text" id="st_chatu8_sd_auth" class="st-chatu8-text-input" placeholder="例： 用户名:密码">
                        </div>
                    </div>
                        <div class="st-chatu8-settings-section">
                        <h4>其他设置</h4>
                        
                            <div class="st-chatu8-field">
                                <label for="sd_cchatu_8_model">模型</label>
                                <select id="sd_cchatu_8_model" class="st-chatu8-select"></select>
                            </div>
                            <div class="st-chatu8-field">
                                <label for="sd_cchatu_8_vae">VAE</label>
                                <select id="sd_cchatu_8_vae" class="st-chatu8-select"></select>
                            </div>
                            <div class="st-chatu8-field">
                                <label for="sd_cchatu_8_samplerName">采样方法</label>
                                <select id="sd_cchatu_8_samplerName" class="st-chatu8-select"></select>
                            </div>
                            <div class="st-chatu8-field">
                                <label for="sd_cchatu_8_scheduler">调度器</label>
                                <select id="sd_cchatu_8_scheduler" class="st-chatu8-select"></select>
                            </div>

                        </div>
                        
                            <div class="st-chatu8-settings-section">
                                <h4>生成参数</h4>
                                <div class="st-chatu8-grid">
                                    <div class="st-chatu8-field">
                                        <label for="sd_csize">预设尺寸</label>
                                        <select id="sd_csize" class="st-chatu8-select">
                                            <option value="512x512">512x512 (1:1, 图标)</option>
                                            <option value="640x640">640x640 (1:1, 图标)</option>
                                            <option value="512x768">512x768 (2:3, 垂直)</option>
                                            <option value="768x512">768x512 (3:2, 水平)</option>
                                            <option value="1024x1024">1024x1024 (1:1, SDXL)</option>
                                            <option value="1216x832">1216x832 (19:13, 超高清)</option>
                                            <option value="832x1216">832x1216 (13:19, 超高清)</option>
                                        </select>
                                    </div>
                                    <div class="st-chatu8-field">
                                        <label for="sd_cwidth">宽度</label>
                                        <input type="number" id="sd_cwidth" class="st-chatu8-text-input">
                                    </div>
                                    <div class="st-chatu8-field">
                                        <label for="sd_cheight">高度</label>
                                        <input type="number" id="sd_cheight" class="st-chatu8-text-input">
                                    </div>
                                    <div class="st-chatu8-field">
                                        <label for="sd_csteps">采样步数</label>
                                        <input type="number" id="sd_csteps" class="st-chatu8-text-input">
                                    </div>
                                    <div class="st-chatu8-field">
                                        <label for="sdCfgScale">CFG缩放</label>
                                        <input type="number" id="sdCfgScale" class="st-chatu8-text-input">
                                    </div>

                                    <div class="st-chatu8-field">
                                        <label for="sd_cclip_skip">片段跳过</label>
                                        <input type="number" id="sd_cclip_skip" class="st-chatu8-text-input">
                                    </div>
                                    <div class="st-chatu8-field">
                                        <label for="sd_cseed">种子 (seed)</label>
                                        <input type="number" id="sd_cseed" class="st-chatu8-text-input" value="-1">
                                    </div>
  
                                </div>
                                </div>
                                    <div class="st-chatu8-settings-section">
                                        <h4>放大修复</h4>
                                     <div class="st-chatu8-field">
                                            <label for="sd_chires_fix">高清修复</label>
                                            <div class="st-chatu8-toggle">
                                                <input id="sd_chires_fix" type="checkbox"/>
                                                <span class="st-chatu8-slider"></span>
                                            </div>
                                        </div>
                                    <div class="st-chatu8-field">
                                        <label for="sd_chires_steps">高清修复步数</label>
                                        <input type="number" id="sd_chires_steps" class="st-chatu8-text-input">
                                    </div>    
                                    <div class="st-chatu8-field">
                                        <label for="sd_cchatu_8_upscaler">图像扩大器</label>
                                        <select id="sd_cchatu_8_upscaler" class="st-chatu8-select"></select>
                                    </div>
                                    <div class="st-chatu8-field">
                                        <label for="sd_cupscale_factor">扩大倍数</label>
                                        <input type="number" id="sd_cupscale_factor" class="st-chatu8-text-input">
                                    </div>
                                    
                                    <div class="st-chatu8-field">
                                        <label for="sd_cdenoising_strength">去噪强度</label>
                                        <input type="number" id="sd_cdenoising_strength" class="st-chatu8-text-input" step="0.1">
                                    </div>
                                   </div>
                               
                           

                                <div class="st-chatu8-settings-section">
                                    <h4>修复</h4>

                                    <div class="st-chatu8-field">
                                        <label for="restoreFaces">面部修复</label>
                                        <div class="st-chatu8-toggle">
                                            <input id="restoreFaces" type="checkbox"/>
                                            <span class="st-chatu8-slider"></span>
                                        </div>
                                    </div>
                                    <div class="st-chatu8-field">
                                        <label for="sd_cadetailer">使用ADetailer（脸部）</label>
                                        <div class="st-chatu8-toggle">
                                            <input id="sd_cadetailer" type="checkbox"/>
                                            <span class="st-chatu8-slider"></span>
                                        </div>
                                    </div> 
                               </div>
                            
                            </div>
                

                <div class="st-chatu8-tab-content" id="ch-tab-novelai">
                    <div class="ch-prompts-section st-chatu8-settings-section">
                        <h3>固定提示词</h3>
                        <div class="st-chatu8-field">
                            <label for="yusheid_novelai">提示词预设</label>
                            <div class="st-chatu8-profile-controls">
                                <select id="yusheid_novelai" class="st-chatu8-select"></select>
                                <button class="st-chatu8-icon-btn" id="st_chatu8_tishici_update_style_novelai" title="保存"><i class="fa-solid fa-save"></i></button>
                                <button class="st-chatu8-icon-btn" id="st_chatu8_tishici_save_style_novelai" title="另存为"><i class="fa-solid fa-file-export"></i></button>
                                <button class="st-chatu8-icon-btn" id="st_chatu8_tishici_export_current_novelai" title="导出当前"><i class="fa-solid fa-upload"></i></button>
                                <button class="st-chatu8-icon-btn" id="st_chatu8_tishici_export_all_novelai" title="导出全部"><i class="fa-solid fa-file-export"></i></button>
                                <button class="st-chatu8-icon-btn" id="st_chatu8_tishici_import_novelai" title="导入"><i class="fa-solid fa-download"></i></button>
                                <button class="st-chatu8-icon-btn danger" id="st_chatu8_tishici_delete_style_novelai" title="删除"><i class="fa-solid fa-trash"></i></button>
                            </div>
                        </div>
                        <div class="st-chatu8-field-col">
                            <label for="fixedPrompt_novelai">固定正面提示词 <span class="st-chatu8-unsaved-warning" title="设置尚未保存" style="display: none;"><i class="fa-solid fa-triangle-exclamation"></i></span></label>
                            <textarea id="fixedPrompt_novelai" class="st-chatu8-textarea" rows="4"></textarea>
                            <div id="fixedPrompt_novelai-results" class="ch-autocomplete-results"></div>
                        </div>
                        <div class="st-chatu8-field-col">
                            <label for="fixedPrompt_end_novelai">后置固定正面提示词 <span class="st-chatu8-unsaved-warning" title="设置尚未保存" style="display: none;"><i class="fa-solid fa-triangle-exclamation"></i></span></label>
                            <textarea id="fixedPrompt_end_novelai" class="st-chatu8-textarea" rows="4"></textarea>
                            <div id="fixedPrompt_end_novelai-results" class="ch-autocomplete-results"></div>
                        </div>
                        <div class="st-chatu8-field-col">
                            <label for="negativePrompt_novelai">固定负面提示词 <span class="st-chatu8-unsaved-warning" title="设置尚未保存" style="display: none;"><i class="fa-solid fa-triangle-exclamation"></i></span></label>
                            <textarea id="negativePrompt_novelai" class="st-chatu8-textarea" rows="4"></textarea>
                            <div id="negativePrompt_novelai-results" class="ch-autocomplete-results"></div>
                        </div>

                    </div>
                    <div class="st-chatu8-settings-section"> 
                        <h3>提示词替换</h3>
                        <div class="st-chatu8-field">
                            <label for="prompt_replace_id_novelai">提示词替换</label>
                            <div class="st-chatu8-profile-controls">
                                <select id="prompt_replace_id_novelai" class="st-chatu8-select"></select>
                                <button class="st-chatu8-icon-btn" id="prompt_replace_update_style_novelai" title="保存"><i class="fa-solid fa-save"></i></button>
                                <button class="st-chatu8-icon-btn" id="prompt_replace_save_style_novelai" title="另存为"><i class="fa-solid fa-file-export"></i></button>
                                <button class="st-chatu8-icon-btn" id="prompt_replace_export_current_novelai" title="导出当前"><i class="fa-solid fa-upload"></i></button>
                                <button class="st-chatu8-icon-btn" id="prompt_replace_export_all_novelai" title="导出全部"><i class="fa-solid fa-file-export"></i></button>
                                <button class="st-chatu8-icon-btn" id="prompt_replace_import_novelai" title="导入"><i class="fa-solid fa-download"></i></button>
                                <button class="st-chatu8-icon-btn danger" id="prompt_replace_delete_style_novelai" title="删除"><i class="fa-solid fa-trash"></i></button>
                            </div>
                        </div>
                        <div class="st-chatu8-field-col">
                            <label for="prompt_replace_text_novelai">替换规则 <span class="st-chatu8-unsaved-warning" title="设置尚未保存" style="display: none;"><i class="fa-solid fa-triangle-exclamation"></i></span></label>
                            <textarea id="prompt_replace_text_novelai" class="st-chatu8-textarea" rows="4"></textarea>
                        </div>
                    </div>
                        <div class="st-chatu8-settings-section"> 
                        <div class="st-chatu8-field">
                            <label for="addFurryDataset">添加福瑞数据集</label>
                            <select id="addFurryDataset" class="st-chatu8-select">
                                <option value="true">启用</option>
                                <option value="false" selected="">禁用</option>
                            </select>
                        </div>
                        <div class="st-chatu8-field">
                            <label for="AQT_novelai">正面质量预设</label>
                            <select id="AQT_novelai" class="st-chatu8-select">
                                <option value="best quality, amazing quality, very aesthetic, absurdres">启用</option>
                                <option value="">禁用</option>
                            </select>
                        </div>
                        <div class="st-chatu8-field">
                            <label for="UCP_novelai">负面质量预设</label>
                            <select id="UCP_novelai" class="st-chatu8-select">
                            </select>
                        </div>
                    </div>
                    <div class="st-chatu8-settings-section">
                        <h3>NovelAI 设置</h3>
                        <div class="st-chatu8-field-col">
                            <label for="novelaiApi">NovelAI API</label>
                            <input type="text" id="novelaiApi" class="st-chatu8-text-input">
                        </div>
                        <div class="st-chatu8-field">
                            <label for="novelaisite">站点</label>
                            <select id="novelaisite" class="st-chatu8-select">
                                <option>官网</option>
                                <option>其他站点</option>
                            </select>
                        </div>
                        <div class="st-chatu8-field" id="novelai-other-site-field">
                            <label for="novelaiOtherSite">其他novelai站点</label>
                            <input type="text" id="novelaiOtherSite" class="st-chatu8-text-input">
                        </div>
                        <div class="st-chatu8-field">
                            <label for="novelaimode">模型</label>
                            <select id="novelaimode" class="st-chatu8-select">
                                <option>nai-diffusion-3</option>
                                <option>nai-diffusion-4-full</option>
                                <option>nai-diffusion-4-curated-preview</option>
                                <option>nai-diffusion-4-5-curated</option>
                                <option>nai-diffusion-4-5-full</option>
                            </select>
                        </div>
                        <div class="st-chatu8-field">
                            <label for="novelai_sampler">采样方法</label>
                            <select id="novelai_sampler" class="st-chatu8-select">
                                <option value="k_euler">Euler</option>
                                <option value="ddim_v3">DDIM</option>
                                <option value="k_dpmpp_2s_ancestral"> DPM++ 2S Ancestral</option>
                                <option value="k_dpmpp_2m">DPM++ 2M</option>
                                <option value="k_euler_ancestral"> Euler Ancestral</option>
                                <option value="k_dpmpp_2m_sde">DPM++ 2M SDE</option>
                                <option value="k_dpmpp_sde">DPM++ SDE</option>
                            </select>
                        </div>
                        <div class="st-chatu8-field">
                            <label for="Schedule">噪点表</label>
                            <select id="Schedule" class="st-chatu8-select">
                                <option>native</option>
                                <option>exponential</option>
                                <option>polyexponential</option>
                                <option>karras</option>
                            </select>
                        </div>
                        <div class="st-chatu8-field">
                            <label for="nai3Scale">Prompt Guidance</label>
                            <input type="number" id="nai3Scale" class="st-chatu8-text-input">
                        </div>
                        <div class="st-chatu8-field">
                            <label for="cfg_rescale">Prompt Guidance Rescale</label>
                            <input type="number" id="cfg_rescale" class="st-chatu8-text-input">
                        </div>
                        <div class="st-chatu8-field">
                            <label for="AI_use_coords">AI 默认角色位置</label>
                            <div class="st-chatu8-toggle">
                                <input id="AI_use_coords" type="checkbox"/>
                                <span class="st-chatu8-slider"></span>
                            </div>
                        </div>
                        <div class="st-chatu8-field" id="st-chatu8-nai3-sm-field">
                            <label for="sm">SMEA</label>
                            <div class="st-chatu8-toggle">
                                <input id="sm" type="checkbox"/>
                                <span class="st-chatu8-slider"></span>
                            </div>
                        </div>
                        <div class="st-chatu8-field" id="st-chatu8-nai3-dyn-field">
                            <label for="dyn">SMEA DYN</label>
                            <div class="st-chatu8-toggle">
                                <input id="dyn" type="checkbox"/>
                                <span class="st-chatu8-slider"></span>
                            </div>
                        </div>
                        <div class="st-chatu8-field">
                            <label for="nai3Variety">多样性 (Variety)</label>
                            <div class="st-chatu8-toggle">
                                <input id="nai3Variety" type="checkbox"/>
                                <span class="st-chatu8-slider"></span>
                            </div>
                        </div>
                        <div class="st-chatu8-field" id="st-chatu8-nai3-deceisp-field">
                            <label for="nai3Deceisp">减少伪影 (Decrisp)</label>
                            <div class="st-chatu8-toggle">
                                <input id="nai3Deceisp" type="checkbox"/>
                                <span class="st-chatu8-slider"></span>
                            </div>
                        </div>
                    </div>
                    <div class="st-chatu8-settings-section">
                        <h4>生成参数</h4>
                        <div class="st-chatu8-grid">
                            <div class="st-chatu8-field">
                                <label for="novelai_size">预设尺寸</label>
                                <select id="novelai_size" class="st-chatu8-select">
                                    <option value="512x512">512x512 (1:1, 图标)</option>
                                    <option value="640x640">640x640 (1:1, 图标)</option>
                                    <option value="512x768">512x768 (2:3, 垂直)</option>
                                    <option value="768x512">768x512 (3:2, 水平)</option>
                                    <option value="1024x1024">1024x1024 (1:1, SDXL)</option>
                                    <option value="1216x832">1216x832 (19:13, 超高清)</option>
                                    <option value="832x1216">832x1216 (13:19, 超高清)</option>
                                </select>
                            </div>
                            <div class="st-chatu8-field">
                                <label for="novelai_width">宽度 (width)</label>
                                <input type="number" id="novelai_width" class="st-chatu8-text-input">
                            </div>
                            <div class="st-chatu8-field">
                                <label for="novelai_height">高度 (height)</label>
                                <input type="number" id="novelai_height" class="st-chatu8-text-input">
                            </div>
                            <div class="st-chatu8-field">
                                <label for="novelai_steps">生成步数 (steps)</label>
                                <input type="number" id="novelai_steps" class="st-chatu8-text-input">
                            </div>
                            <div class="st-chatu8-field">
                                <label for="novelai_seed">种子 (seed)</label>
                                <input type="number" id="novelai_seed" class="st-chatu8-text-input">
                            </div>
                        </div>
                    </div>
                    <div class="st-chatu8-settings-section" id="nai-vibe-transfer-section">
                        <h3>氛围参考图 (Vibe Transfer)</h3>
                        <div class="st-chatu8-field">
                            <label for="nai3VibeTransfer">启用氛围参考</label>
                            <div class="st-chatu8-toggle">
                                <input id="nai3VibeTransfer" type="checkbox"/>
                                <span class="st-chatu8-slider"></span>
                            </div>
                        </div>
                        <div class="st-chatu8-field-col">
                            <label>图片预览</label>
                            <div id="novelai-image-preview-container" class="st-chatu8-image-preview-container">
                                <div class="st-chatu8-image-placeholder">
                                    <i class="fa-solid fa-image"></i>
                                    <span>没有选择图片</span>
                                </div>
                                <img id="previewImage_novelai" src="" alt="参考图预览">
                            </div>
                            <div class="st-chatu8-image-controls">
                                <input type="file" id="imageInput_novelai" accept="image/*" style="display:none;">
                                <button type="button" class="st-chatu8-btn" id="novelai-select-image-btn"><i class="fa-solid fa-upload"></i> 选择图片</button>
                                <button type="button" class="st-chatu8-btn danger" id="novelai-remove-image-btn" style="display: none;"><i class="fa-solid fa-trash"></i> 移除图片</button>
                            </div>
                        </div>
                        <div class="st-chatu8-field">
                            <label for="InformationExtracted">氛围提取信息</label>
                            <div class="st-chatu8-range-container">
                                <input type="range" id="InformationExtracted_range" class="st-chatu8-range-slider" min="0" max="1" step="0.01">
                                <input type="number" id="InformationExtracted" class="st-chatu8-range-input" min="0" max="1" step="0.01">
                            </div>
                        </div>
                        <div class="st-chatu8-field">
                            <label for="ReferenceStrength">氛围强度</label>
                            <div class="st-chatu8-range-container">
                                <input type="range" id="ReferenceStrength_range" class="st-chatu8-range-slider" min="0" max="1" step="0.01">
                                <input type="number" id="ReferenceStrength" class="st-chatu8-range-input" min="0" max="1" step="0.01">
                            </div>
                        </div>
                    </div>
                    <div class="st-chatu8-settings-section" id="nai-char-ref-section">
                        <h3>角色参考图 (Character Reference 仅浏览器端)</h3>
                        <div class="st-chatu8-field">
                            <label for="nai3CharRef">启用角色参考</label>
                            <div class="st-chatu8-toggle">
                                <input id="nai3CharRef" type="checkbox"/>
                                <span class="st-chatu8-slider"></span>
                            </div>
                        </div>
                        <div class="st-chatu8-field">
                            <label for="nai3StylePerception">风格感知</label>
                            <div class="st-chatu8-toggle">
                                <input id="nai3StylePerception" type="checkbox"/>
                                <span class="st-chatu8-slider"></span>
                            </div>
                        </div>
                        <div class="st-chatu8-field-col">
                            <label>图片预览</label>
                            <div id="novelai-char-ref-image-preview-container" class="st-chatu8-image-preview-container">
                                <div class="st-chatu8-image-placeholder">
                                    <i class="fa-solid fa-image"></i>
                                    <span>没有选择图片</span>
                                </div>
                                <img id="previewImage_nai_char_ref" src="" alt="角色参考图预览">
                            </div>
                            <div class="st-chatu8-image-controls">
                                <input type="file" id="imageInput_nai_char_ref" accept="image/*" style="display:none;">
                                <button type="button" class="st-chatu8-btn" id="novelai-select-char-ref-image-btn"><i class="fa-solid fa-upload"></i> 选择图片</button>
                                <button type="button" class="st-chatu8-btn danger" id="novelai-remove-char-ref-image-btn" style="display: none;"><i class="fa-solid fa-trash"></i> 移除图片</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="st-chatu8-tab-content" id="ch-tab-comfyui">
                    <div class="ch-prompts-section st-chatu8-settings-section">
                        <h3>固定提示词</h3>
                        <div class="st-chatu8-field">
                            <label for="yusheid_comfyui">提示词预设</label>
                            <div class="st-chatu8-profile-controls">
                                <select id="yusheid_comfyui" class="st-chatu8-select"></select>
                                <button class="st-chatu8-icon-btn" id="st_chatu8_tishici_update_style_comfyui" title="保存"><i class="fa-solid fa-save"></i></button>
                                <button class="st-chatu8-icon-btn" id="st_chatu8_tishici_save_style_comfyui" title="另存为"><i class="fa-solid fa-file-export"></i></button>
                                <button class="st-chatu8-icon-btn" id="st_chatu8_tishici_export_current_comfyui" title="导出当前"><i class="fa-solid fa-upload"></i></button>
                                <button class="st-chatu8-icon-btn" id="st_chatu8_tishici_export_all_comfyui" title="导出全部"><i class="fa-solid fa-file-export"></i></button>
                                <button class="st-chatu8-icon-btn" id="st_chatu8_tishici_import_comfyui" title="导入"><i class="fa-solid fa-download"></i></button>
                                <button class="st-chatu8-icon-btn danger" id="st_chatu8_tishici_delete_style_comfyui" title="删除"><i class="fa-solid fa-trash"></i></button>
                            </div>
                        </div>
                        <div class="st-chatu8-field-col">
                            <label for="fixedPrompt_comfyui">固定正面提示词 <span class="st-chatu8-unsaved-warning" title="设置尚未保存" style="display: none;"><i class="fa-solid fa-triangle-exclamation"></i></span></label>
                            <textarea id="fixedPrompt_comfyui" class="st-chatu8-textarea" rows="4"></textarea>
                            <div id="fixedPrompt_comfyui-results" class="ch-autocomplete-results"></div>
                        </div>
                        <div class="st-chatu8-field-col">
                            <label for="fixedPrompt_end_comfyui">后置固定正面提示词 <span class="st-chatu8-unsaved-warning" title="设置尚未保存" style="display: none;"><i class="fa-solid fa-triangle-exclamation"></i></span></label>
                            <textarea id="fixedPrompt_end_comfyui" class="st-chatu8-textarea" rows="4"></textarea>
                            <div id="fixedPrompt_end_comfyui-results" class="ch-autocomplete-results"></div>
                        </div>
                        <div class="st-chatu8-field-col">
                            <label for="negativePrompt_comfyui">固定负面提示词 <span class="st-chatu8-unsaved-warning" title="设置尚未保存" style="display: none;"><i class="fa-solid fa-triangle-exclamation"></i></span></label>
                            <textarea id="negativePrompt_comfyui" class="st-chatu8-textarea" rows="4"></textarea>
                            <div id="negativePrompt_comfyui-results" class="ch-autocomplete-results"></div>
                        </div>
                        
                        <h3>LORA</h3>
                        <div class="st-chatu8-field">
                            <label for="ComfyuiLORA">添加 LORA</label>
                            <div class="st-chatu8-profile-controls">
                                <select id="ComfyuiLORA" class="st-chatu8-select"></select>
                                <button class="st-chatu8-icon-btn" id="ComfyuiaddLORA" title="添加"><i class="fa-solid fa-plus"></i></button>
                            </div>
                        </div>
                        
                    </div>
                    <div class="st-chatu8-settings-section">
                        <h3>提示词替换</h3>

                        <div class="st-chatu8-field">
                            <label for="prompt_replace_id_comfyui">提示词替换</label>
                            <div class="st-chatu8-profile-controls">
                                <select id="prompt_replace_id_comfyui" class="st-chatu8-select"></select>
                                <button class="st-chatu8-icon-btn" id="prompt_replace_update_style_comfyui" title="保存"><i class="fa-solid fa-save"></i></button>
                                <button class="st-chatu8-icon-btn" id="prompt_replace_save_style_comfyui" title="另存为"><i class="fa-solid fa-file-export"></i></button>
                                <button class="st-chatu8-icon-btn" id="prompt_replace_export_current_comfyui" title="导出当前"><i class="fa-solid fa-upload"></i></button>
                                <button class="st-chatu8-icon-btn" id="prompt_replace_export_all_comfyui" title="导出全部"><i class="fa-solid fa-file-export"></i></button>
                                <button class="st-chatu8-icon-btn" id="prompt_replace_import_comfyui" title="导入"><i class="fa-solid fa-download"></i></button>
                                <button class="st-chatu8-icon-btn danger" id="prompt_replace_delete_style_comfyui" title="删除"><i class="fa-solid fa-trash"></i></button>
                            </div>
                        </div>
                        <div class="st-chatu8-field-col">
                            <label for="prompt_replace_text_comfyui">替换规则 <span class="st-chatu8-unsaved-warning" title="设置尚未保存" style="display: none;"><i class="fa-solid fa-triangle-exclamation"></i></span></label>
                            <textarea id="prompt_replace_text_comfyui" class="st-chatu8-textarea" rows="4"></textarea>
                        </div>
                    </div>
                    <div class="st-chatu8-settings-section"> 
                        <div class="st-chatu8-field">
                            <label for="AQT_comfyui">正面质量预设</label>
                            <select id="AQT_comfyui" class="st-chatu8-select">
                                <option value="best quality, amazing quality, very aesthetic, absurdres">启用</option>
                                <option value="">禁用</option>
                            </select>
                        </div>
                        <div class="st-chatu8-field">
                            <label for="UCP_comfyui">负面质量预设</label>
                            <select id="UCP_comfyui" class="st-chatu8-select">
    <option value="">无</option>
    <option value="bad proportions, out of focus, username, text, bad anatomy, lowres, worstquality, watermark, cropped, bad body, deformed, mutated, disfigured, poorly drawn face, malformed hands, extra arms, extra limb, missing limb, too many fingers, extra legs, bad feet, missing fingers, fused fingers, acnes, floating limbs, disconnected limbs, long neck, long body, mutation, ugly, blurry, low quality, sketches, normal quality, monochrome, grayscale, signature, logo, jpeg artifacts, unfinished, displeasing, chromatic aberration, extra digits, artistic error, scan, abstract, photo, realism, screencap">作者预设</option>
    <option value="negativeXL_D, negativeXL, source_furry, extra limbs, deformations, long fingers, fused fingers, inaccurate_anatomy, bad proportions, poorly drawn hands, bad hands, extra_fingers, extra_hand, extra_arm, distorted fingers, ugly hands, creepy hands, six fingers, malformed fingers, long_fingers, interlocked fingers:1.2, ugly, deformed, uneven, asymmetrical, unnatural, missing fingers, extra digit, fewer digits, opaque eyes, small eyes, ugly eyes, blurred eyes, bad face, (bad anatomy, ugly face:1.2), (worst quality, low quality, not detailed, low resolution:1.2), motion_blur, blur, blur_censor, blurry, simple_background, text, error, cropped, normal quality, jpeg artifacts, watermark, logo, signature, username, artist name">作者预set 2</option>
                            </select>
                        </div>
                    </div>
                    <div class="st-chatu8-settings-section">
                        <h3>工作流</h3>
                        <div class="st-chatu8-field">
                            <label for="workerid">工作流预设</label>
                            <div class="st-chatu8-profile-controls">
                                <select id="workerid" class="st-chatu8-select"></select>
                                <button class="st-chatu8-icon-btn" id="worker_update_style" title="保存"><i class="fa-solid fa-save"></i></button>
                                <button class="st-chatu8-icon-btn" id="worker_save_style" title="另存为"><i class="fa-solid fa-file-export"></i></button>
                                <button class="st-chatu8-icon-btn" id="worker_export_current" title="导出当前"><i class="fa-solid fa-upload"></i></button>
                                <button class="st-chatu8-icon-btn" id="worker_export_all" title="导出全部"><i class="fa-solid fa-file-export"></i></button>
                                <button class="st-chatu8-icon-btn" id="worker_import" title="导入"><i class="fa-solid fa-download"></i></button>
                                <button class="st-chatu8-icon-btn danger" id="worker_delete_style" title="删除"><i class="fa-solid fa-trash"></i></button>
                            </div>
                        </div>
                        <div class="st-chatu8-field-col">
                            <label for="worker">工作流 (JSON)</label>
                            <textarea id="worker" class="st-chatu8-textarea" rows="5"></textarea>
                            <button id="eidtwork" class="st-chatu8-btn" style="align-self: flex-end; margin-top: 10px;">简易修改</button>
                        </div>
                    </div>
                    <div class="st-chatu8-settings-section">
                        <h3>ComfyUI 设置</h3>
                        <div class="st-chatu8-field">
                            <label for="comfyuiUrl">API 地址</label>
                            <div class="st-chatu8-input-group">
                                <i class="fa-solid fa-exclamation-triangle st-chatu8-url-warning-icon" title="无效的URL格式"></i>
                                <input type="text" id="comfyuiUrl" class="st-chatu8-text-input" placeholder="http://127.0.0.1:8188">
                                <button id="testComfyui" class="st-chatu8-btn">连接comfyui</button>
                            </div>
                        </div>
                    </div>
                    <div class="st-chatu8-settings-section">
                        <h4>其他设置</h4>
                        <div class="st-chatu8-field">
                            <label for="MODEL_NAME">模型文件</label>
                            <select id="MODEL_NAME" class="st-chatu8-select"></select>
                        </div>
                        <div class="st-chatu8-field">
                            <label for="comfyuisamplerName">采样方法</label>
                            <select id="comfyuisamplerName" class="st-chatu8-select"></select>
                        </div>
                        <div class="st-chatu8-field">
                            <label for="comfyui_vae">VAE</label>
                            <select id="comfyui_vae" class="st-chatu8-select"></select>
                        </div>
                        <div class="st-chatu8-field">
                            <label for="comfyui_scheduler">调度器 (Scheduler)</label>
                            <select id="comfyui_scheduler" class="st-chatu8-select"></select>
                        </div>
                    </div>
                    <div class="st-chatu8-settings-section">
                        <h4>生成参数</h4>
                        <div class="st-chatu8-grid">
                            <div class="st-chatu8-field">
                                <label for="comfyui_size">预设尺寸</label>
                                <select id="comfyui_size" class="st-chatu8-select">
                                    <option value="512x512">512x512 (1:1, 图标)</option>
                                    <option value="640x640">640x640 (1:1, 图标)</option>
                                    <option value="512x768">512x768 (2:3, 垂直)</option>
                                    <option value="768x512">768x512 (3:2, 水平)</option>
                                    <option value="1024x1024">1024x1024 (1:1, SDXL)</option>
                                    <option value="1216x832">1216x832 (19:13, 超高清)</option>
                                    <option value="832x1216">832x1216 (13:19, 超高清)</option>
                                </select>
                            </div>
                            <div class="st-chatu8-field">
                                <label for="comfyui_width">宽度 (width)</label>
                                <input type="number" id="comfyui_width" class="st-chatu8-text-input">
                            </div>
                            <div class="st-chatu8-field">
                                <label for="comfyui_height">高度 (height)</label>
                                <input type="number" id="comfyui_height" class="st-chatu8-text-input">
                            </div>
                            <div class="st-chatu8-field">
                                <label for="comfyui_steps">生成步数 (steps)</label>
                                <input type="number" id="comfyui_steps" class="st-chatu8-text-input">
                            </div>
                            <div class="st-chatu8-field">
                                <label for="comfyui_seed">种子 (seed)</label>
                                <input type="number" id="comfyui_seed" class="st-chatu8-text-input">
                            </div>
                            <div class="st-chatu8-field">
                                <label for="cfg_comfyui">CFG</label>
                                <input type="number" id="cfg_comfyui" class="st-chatu8-text-input">
                            </div>
                        </div>
                    </div>

                     <div class="st-chatu8-settings-section">
                        <h3>参考图</h3>
                        <div class="st-chatu8-field-col">
                            <label>图片预览</label>
                            <div id="comfyui-image-preview-container" class="st-chatu8-image-preview-container">
                                <div class="st-chatu8-image-placeholder">
                                    <i class="fa-solid fa-image"></i>
                                    <span>没有选择图片</span>
                                </div>
                                <img id="previewImage2" src="" alt="参考图预览">
                            </div>
                            <div class="st-chatu8-image-controls">
                                <input type="file" id="imageInput2" accept="image/*" style="display:none;">
                                <button type="button" class="st-chatu8-btn" id="comfyui-select-image-btn"><i class="fa-solid fa-upload"></i> 选择图片</button>
                                <button type="button" class="st-chatu8-btn danger" id="comfyui-remove-image-btn" style="display: none;"><i class="fa-solid fa-trash"></i> 移除图片</button>
                            </div>
                        </div>
                        <div class="st-chatu8-field">
                            <label for="ipa">IPA 类型</label>
                            <select id="ipa" class="st-chatu8-select">
                                <option>STANDARD (medium strength)</option>
                                <option>LIGHT - SD1.5 only (low strength)</option>
                                <option>VIT-G (medium strength)</option>
                                <option>PLUS (high strength)</option>
                                <option>PLUS FACE (portraits)</option>
                                <option>FULL FACE - SD1.5 only (portraits stronger)</option>
                            </select>
                        </div>
                        <div class="st-chatu8-field">
                            <label for="c_fenwei">氛围强度</label>
                            <input type="number" id="c_fenwei" class="st-chatu8-text-input">
                        </div>
                        <div class="st-chatu8-field">
                            <label for="c_xijie">细节强度</label>
                            <input type="number" id="c_xijie" class="st-chatu8-text-input">
                        </div>
                        <div class="st-chatu8-field">
                            <label for="c_quanzhong">权重</label>
                            <input type="number" id="c_quanzhong" class="st-chatu8-text-input">
                        </div>
                        <div class="st-chatu8-field">
                            <label for="c_idquanzhong">FaceID 权重</label>
                            <input type="number" id="c_idquanzhong" class="st-chatu8-text-input">
                        </div>
                    </div>
                </div>

                <!-- <div class="st-chatu8-tab-content" id="ch-tab-worldbook">
                    <div class="st-chatu8-settings-section">
                        <h3>世界书设置</h3>
                        <div class="st-chatu8-field">
                            <label for="worldBookEnabled">启用世界书</label>
                            <div class="st-chatu8-toggle">
                                <input id="worldBookEnabled" type="checkbox"/>
                                <span class="st-chatu8-slider"></span>
                            </div>
                        </div>
                    </div>
                    <div class="st-chatu8-settings-section">
                        <h3>世界书预设</h3>
                        <div class="st-chatu8-field">
                            <label for="worldBook_id">预设</label>
                            <div class="st-chatu8-profile-controls">
                                <select id="worldBook_id" class="st-chatu8-select"></select>
                                <button class="st-chatu8-icon-btn" id="worldbook_update_style" title="保存"><i class="fa-solid fa-save"></i></button>
                                <button class="st-chatu8-icon-btn" id="worldbook_save_style" title="另存为"><i class="fa-solid fa-file-export"></i></button>
                                <button class="st-chatu8-icon-btn" id="worldbook_export_current" title="导出当前"><i class="fa-solid fa-upload"></i></button>
                                <button class="st-chatu8-icon-btn" id="worldbook_export_all" title="导出全部"><i class="fa-solid fa-file-export"></i></button>
                                <button class="st-chatu8-icon-btn" id="worldbook_import" title="导入"><i class="fa-solid fa-download"></i></button>
                                <button class="st-chatu8-icon-btn danger" id="worldbook_delete_style" title="删除"><i class="fa-solid fa-trash"></i></button>
                            </div>
                        </div>
                        <div class="st-chatu8-field-col">
                            <label for="worldbook_content">世界书内容 <span class="st-chatu8-unsaved-warning" title="设置尚未保存" style="display: none;"><i class="fa-solid fa-triangle-exclamation"></i></span></label>
                            <textarea id="worldbook_content" class="st-chatu8-textarea" rows="10"></textarea>
                        </div>
                    </div>
                </div> -->

                <div class="st-chatu8-tab-content" id="ch-tab-about">
                    <div class="st-chatu8-settings-section">
                        <h3>关于 文生图 🖼️</h3>
                        <p>插件作者: 从前跟你一样</p>
                        <div class="st-chatu8-about-links">
                            <a href="https://afdian.com/a/cqgnyy" target="_blank" class="st-chatu8-about-link support">
                                <i class="fa-solid fa-heart"></i>
                                <span>支持作者</span>
                                <span class="st-chatu8-cute-emoji">💖</span>
                            </a>
                            <a href="https://gxcgf4l6b2y.feishu.cn/wiki/UXtHw83pmiHnx1k4WpwcIn79nec?from=from_copylink" target="_blank" class="st-chatu8-about-link help">
                                <i class="fa-solid fa-circle-question"></i>
                                <span>查看帮助</span>
                                <span class="st-chatu8-cute-emoji">❓</span>
                            </a>
                        </div>
                    </div>
                    <div class="st-chatu8-settings-section">
                        <h3>检查更新</h3>
                        <button id="ch-check-update" class="st-chatu8-btn">检查更新</button>
                        <div class="st-chatu8-field-col" style="margin-top: 10px;">
                            <label for="ch-update-notes">更新说明</label>
                            <textarea id="ch-update-notes" class="st-chatu8-textarea" rows="5" readonly></textarea>
                        </div>
                    </div>
                </div>

                <div class="st-chatu8-tab-content" id="ch-tab-log">
                    <div class="st-chatu8-settings-section">
                        <h3>日志</h3>
                        <div class="st-chatu8-field">
                            <label>操作</label>
                            <div>
                                <button id="ch-export-log" class="st-chatu8-btn">导出日志</button>
                                <button id="ch-clear-log" class="st-chatu8-btn danger">清空日志</button>
                            </div>
                        </div>
                        <div class="st-chatu8-field-col">
                            <label for="ch-log-textarea">日志输出</label>
                            <textarea id="ch-log-textarea" class="st-chatu8-textarea" rows="20" readonly style="font-family: monospace; font-size: 12px;"></textarea>
                        </div>
                    </div>
                </div>

                <div class="st-chatu8-tab-content" id="ch-tab-fab">
                    <div class="st-chatu8-settings-section">
                        <h3>悬浮球设置</h3>
                        <div class="st-chatu8-field">
                            <label for="enable_chatu8_fab">启用悬浮球</label>
                            <div class="st-chatu8-toggle">
                                <input id="enable_chatu8_fab" type="checkbox"/>
                                <span class="st-chatu8-slider"></span>
                            </div>
                        </div>
                        <div class="st-chatu8-field">
                            <label for="chatu8_fab_bg_color">背景颜色</label>
                            <input type="color" id="chatu8_fab_bg_color" class="st-chatu8-color-picker">
                        </div>
                        <div class="st-chatu8-field">
                            <label for="chatu8_fab_icon_color">图标颜色</label>
                            <input type="color" id="chatu8_fab_icon_color" class="st-chatu8-color-picker">
                        </div>
                        <div class="st-chatu8-field">
                            <label for="chatu8_fab_opacity">不透明度</label>
                            <div class="st-chatu8-range-container">
                                <input type="range" id="chatu8_fab_opacity" class="st-chatu8-range-slider" min="0" max="1" step="0.1">
                                <input type="number" id="chatu8_fab_opacity_value" class="st-chatu8-range-input" min="0" max="1" step="0.1">
                            </div>
                        </div>
                        <div class="st-chatu8-field">
                            <label for="chatu8_fab_size">大小</label>
                            <div class="st-chatu8-range-container">
                                <input type="range" id="chatu8_fab_size" class="st-chatu8-range-slider" min="30" max="100" step="1">
                                <input type="number" id="chatu8_fab_size_value" class="st-chatu8-range-input" min="30" max="100" step="1">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="st-chatu8-tab-content" id="ch-tab-image-cache">
                    <div class="st-chatu8-settings-section">
                        <h3>图片缓存管理</h3>
                        <div class="st-chatu8-cache-controls">
                            <button id="image-cache-toggle-multiselect" class="st-chatu8-btn">多选</button>
                            <button id="image-cache-select-all" class="st-chatu8-btn">全选</button>
                            <button id="image-cache-deselect-all" class="st-chatu8-btn">取消全选</button>
                            <button id="image-cache-download-selected" class="st-chatu8-btn"><i class="fa-solid fa-download"></i> 下载选中</button>
                            <button id="image-cache-delete-selected" class="st-chatu8-btn danger"><i class="fa-solid fa-trash"></i> 删除选中</button>
                        </div>
                        <div id="image-cache-grid" class="st-chatu8-image-cache-grid">
                            <!-- Images will be loaded here -->
                        </div>
                        <div id="image-cache-pagination" class="st-chatu8-pagination">
                            <!-- Pagination controls will be here -->
                        </div>
                         <div id="image-cache-info" class="st-chatu8-cache-info"></div>
                    </div>
                </div>

                <div class="st-chatu8-tab-content" id="ch-tab-ai">
                    <div class="st-chatu8-settings-section">
                        <h3>AI 设置</h3>
                        <div class="st-chatu8-grid">
                            <div class="st-chatu8-field">
                                <label for="ai_model">模型</label>
                                <select id="ai_model" class="st-chatu8-select"></select>
                            </div>
                            <div class="st-chatu8-field">
                                <label for="ai_token">Token</label>
                                <div class="st-chatu8-input-group">
                                    <input type="text" id="ai_token" class="st-chatu8-text-input" placeholder="用于验证的Token">
                                    <a href="https://auth.pollinations.ai/" target="_blank" style="margin-left: 10px; white-space: nowrap; align-self: center;">注册</a>
                                </div>
                            </div>
                            <div class="st-chatu8-field">
                                <label for="ai_temperature">Temperature</label>
                                <input type="number" id="ai_temperature" class="st-chatu8-text-input" step="0.1">
                            </div>
                            <div class="st-chatu8-field">
                                <label for="ai_top_p">Top P</label>
                                <input type="number" id="ai_top_p" class="st-chatu8-text-input" step="0.1">
                            </div>
                            <div class="st-chatu8-field">
                                <label for="ai_presence_penalty">Presence Penalty</label>
                                <input type="number" id="ai_presence_penalty" class="st-chatu8-text-input" step="0.1">
                            </div>
                            <div class="st-chatu8-field">
                                <label for="ai_frequency_penalty">Frequency Penalty</label>
                                <input type="number" id="ai_frequency_penalty" class="st-chatu8-text-input" step="0.1">
                            </div>
                        </div>
                        <div class="st-chatu8-field">
                            <label for="ai_stream">流式响应 (Stream)</label>
                            <div class="st-chatu8-toggle">
                                <input id="ai_stream" type="checkbox"/>
                                <span class="st-chatu8-slider"></span>
                            </div>
                        </div>
                        <div class="st-chatu8-field">
                            <label for="ai_private">私密 (Private)</label>
                            <div class="st-chatu8-toggle">
                                <input id="ai_private" type="checkbox"/>
                                <span class="st-chatu8-slider"></span>
                            </div>
                        </div>
                    </div>
                    <div class="st-chatu8-settings-section">
                        <h3>AI 功能测试</h3>
                        <div class="st-chatu8-field-col">
                            <label for="ai-test-system">System Message</label>
                            <textarea id="ai-test-system" class="st-chatu8-textarea" rows="2"></textarea>
                        </div>
                        <div class="st-chatu8-field-col">
                            <label for="ai-test-user">User Message</label>
                            <textarea id="ai-test-user" class="st-chatu8-textarea" rows="3"></textarea>
                        </div>
                        <div class="st-chatu8-field">
                            <button id="ai-test-send" class="st-chatu8-btn">发送</button>
                        </div>
                        <div class="st-chatu8-field-col">
                            <label for="ai-test-output">AI 回复</label>
                            <textarea id="ai-test-output" class="st-chatu8-textarea" rows="5" readonly></textarea>
                        </div>
                    </div>
                </div>

                <div class="st-chatu8-tab-content" id="ch-tab-vocabulary">
                    <div class="st-chatu8-settings-section">
                        <h3>词库管理</h3>
                        <div class="st-chatu8-field">
                            <label>批量操作</label>
                            <div>
                                <button id="vocabulary-install-all-btn" class="st-chatu8-btn">安装全部</button>
                                <button id="vocabulary-uninstall-all-btn" class="st-chatu8-btn danger">卸载全部</button>
                            </div>
                        </div>
                        <div class="st-chatu8-field-col">
                            <label>可用词库(手机安装三四个就够了)</label>
                            <div id="vocabulary-file-list" class="st-chatu8-vocabulary-list"></div>
                        </div>
                    </div>
                    <div class="st-chatu8-settings-section">
                        <h3>标签浏览器</h3>
                        <div class="st-chatu8-field-col">
                            <textarea id="vocabulary-selected-tags" class="st-chatu8-textarea" rows="3" placeholder="点击下方的标签将会添加到这里..."></textarea>
                            <div class="st-chatu8-tag-browser-actions">
                                <button id="vocabulary-tag-backspace" class="st-chatu8-btn">回退</button>
                                <button id="vocabulary-tag-clear" class="st-chatu8-btn danger">清空</button>
                                <button id="vocabulary-tag-copy" class="st-chatu8-btn">复制</button>
                            </div>
                        </div>
                        <div id="vocabulary-tree-container" class="st-chatu8-tree-container"></div>
                    </div>
                    <div class="st-chatu8-settings-section">
                        <h3>搜索设置</h3>
                        <div class="st-chatu8-field">
                            <label for="vocabulary_search_startswith">开头匹配</label>
                            <div class="st-chatu8-toggle">
                                <input id="vocabulary_search_startswith" type="checkbox"/>
                                <span class="st-chatu8-slider"></span>
                            </div>
                        </div>
                        <div class="st-chatu8-field">
                            <label for="vocabulary_search_limit">最大结果数</label>
                            <input type="number" id="vocabulary_search_limit" class="st-chatu8-text-input" min="1" max="1000">
                        </div>
                        <div class="st-chatu8-field">
                            <label for="vocabulary_search_sort">排序方式</label>
                            <select id="vocabulary_search_sort" class="st-chatu8-select">
                                <option value="hot_asc">按热度升序</option>
                                <option value="hot_desc">按热度降序</option>
                                <option value="key_asc">按英文名升序</option>
                            </select>
                        </div>
                    </div>
                    <div class="st-chatu8-settings-section">
                        <h3>测试</h3>
                        <div class="st-chatu8-field">
                            <label for="vocabulary-search-input">搜索</label>
                            <div class="st-chatu8-input-group">
                                <input type="text" id="vocabulary-search-input" class="st-chatu8-text-input" placeholder="输入关键词...">
                                <button id="vocabulary-search-btn" class="st-chatu8-btn">搜索</button>
                            </div>
                        </div>
                        <div class="st-chatu8-field-col">
                            <label>搜索结果</label>
                            <div id="vocabulary-search-results" class="st-chatu8-textarea" style="height: 150px; overflow-y: auto;"></div>
                        </div>
                    </div>
                </div>
</div>
</div>
        </div>
    </div>
</div>
<div id="st-chatu8-fab" style="display: none;">
    <i class="fa-solid fa-paintbrush"></i>
</div>
